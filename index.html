<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedNexus - Second Brain</title>
    
    <!-- 1. Tailwind CSS (Visual) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'slide-down': 'slideDown 0.3s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            'from': { opacity: '0' },
                            'to': { opacity: '1' },
                        },
                        slideUp: {
                            'from': { opacity: '0', transform: 'translateY(20px)' },
                            'to': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideDown: {
                            'from': { transform: 'translateY(-100%)' },
                            'to': { transform: 'translateY(0)' },
                        }
                    },
                    colors: {
                        netflix: {
                            black: '#141414',
                            dark: '#181818',
                            red: '#E50914',
                            hover: '#b20710'
                        }
                    }
                }
            }
        }
    </script>

    <!-- 2. Fonte Inter (Google Fonts) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- 3. React & ReactDOM & Babel -->
    <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.263.1"
            }
        }
    </script>
    <script type="module" src="https://esm.sh/run"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Estiliza√ß√£o da barra de rolagem fina */
        .scrollbar-thin::-webkit-scrollbar { width: 6px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background-color: #334155; border-radius: 20px; }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover { background-color: #475569; }
    </style>
</head>
<body class="bg-[#0F172A] text-slate-300">
    <div id="root"></div>

    <!-- 4. Aplica√ß√£o React -->
    <script type="text/babel" data-type="module">
        import React, { useState, useRef, useEffect, useMemo } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            BookOpen, Brain, Activity, Stethoscope, FileText, Calendar, 
            Search, Bell, ChevronRight, ChevronLeft, PlayCircle, FolderOpen, 
            ArrowLeft, GraduationCap, Microscope, Users, PlusCircle, Save, Check, ExternalLink, FileSearch, FileQuestion, X,
            Play, MonitorPlay, Library, ListVideo, CheckCircle2, Lock, Layers
        } from 'lucide-react';

        // --- DADOS DAS AULAS: ANATOMIA DO SISTEMA LOCOMOTOR ---
        const LOCOMOTOR_LESSONS = [
            { title: "Divis√£o do Sistema Esquel√©tico e Ossos do Cr√¢nio", videoId: "3zIB_Yx_KIo" },
            { title: "M√∫sculos Cabe√ßa e Pesco√ßo", videoId: "63Tu1eWZU1Y" },
            { title: "Ossos da Face", videoId: "5SUxOhF9bdA" },
            { title: "Articula√ß√£o Sinovial", videoId: "KUWhdX_LzRE" },
            { title: "Artrologia", videoId: "d89ulYm9rTA" },
            { title: "Classifica√ß√£o Morfol√≥gica dos Ossos", videoId: "yrIU8b-FZso" },
            { title: "Miologia", videoId: "wwVtP2nRxxo" },
            { title: "Articula√ß√µes do Esqueleto Apendicular Inferior", videoId: "fxFlx8rm1UA" },
            { title: "Esqueleto Apendicular Inferior", videoId: "z_sKd0Ko67Q" },
            { title: "M√∫sculos do Joelho e Perna", videoId: "ADWXcTztMzQ" },
            { title: "M√∫sculos do Quadril e Coxa", videoId: "cgOv-a5u7q0" },
            { title: "Articula√ß√µes do Esqueleto Apendicular Superior ‚Äì Cintura Escapular", videoId: "iajeQaLJgUo" },
            { title: "Articula√ß√µes do Esqueleto Apendicular Superior ‚Äì Cotovelo, Punho e M√£o", videoId: "-p5J5jeGy38" },
            { title: "Esqueleto Apendicular Superior", videoId: "YjihTDIP-8I" },
            { title: "M√∫sculos da Cintura Escapular, Ombro e Bra√ßo", videoId: "SSHRk3UBJqY" },
            { title: "M√∫sculos do Antebra√ßo", videoId: "bVJXllkIkhM" },
            { title: "M√∫sculos Intr√≠nsecos da M√£o", videoId: "kRqAy4COqW8" },
            { title: "Articula√ß√µes do Esqueleto Axial", videoId: "pnRpgeh94vQ" },
            { title: "M√∫sculos do Tronco", videoId: "7axOXHcKg7Y" },
            { title: "Ossos do Tronco", videoId: "zD5caxpgPq8" }
        ];

        // --- DADOS DAS AULAS: SISTEMA REPRODUTOR ---
        const REPRODUTOR_LESSONS = [
            { title: "Aparelho Reprodutor Feminino ‚Äì Ov√°rios e Tubas Uterinas #Aprenda 2", videoId: "dRndcgLMKxE" },
            { title: "Aparelho Reprodutor Feminino ‚Äì Ov√°rios e Tubas Uterinas #Aprenda", videoId: "_vM2Theh8aQ" },
            { title: "Aparelho Reprodutor Feminino ‚Äì √ötero, Vagina e Genit√°lia Externa", videoId: "hlvWc92TCbU" },
            { title: "Aula ‚Äì Aparelho Reprodutor Feminino ‚Äì √ötero #Aprenda", videoId: "AO-yzIQRTgA" },
            { title: "Histologia do Sistema Reprodutor Feminino #Aprenda", videoId: "g6wRCU67uPk" },
            { title: "Fisiologia do Sistema Reprodutor Feminino ‚Äì Ciclo Menstrual #Aprenda", videoId: "Ms2f95zIvPE" },
            { title: "Fisiologia do Sistema Reprodutor Feminino ‚Äì Horm√¥nios e sua Regula√ß√£o", videoId: "wshjJA7rDxQ" },
            { title: "Anatomia da Mama #Aprenda", videoId: "mJLCxaElpyw" },
            { title: "Gesta√ß√£o #Aprenda", videoId: "z1jTp44Hsi0" },
            { title: "Lacta√ß√£o #Aprenda", videoId: "HY3a1H50FNQ" },
            { title: "Aparelho Reprodutor Masculino #Aprenda", videoId: "KYtjV0Zzsy8" },
            { title: "Aparelho Reprodutor Masculino ‚Äì Ducto Deferente e Fun√≠culo Esperm√°tico", videoId: "gyy5mfnqSpU" },
            { title: "Aparelho Reprodutor Masculino ‚Äì Gl√¢ndula Seminal e Pr√≥stata #Aprenda", videoId: "L67P-boFlsU" },
            { title: "Aparelho Reprodutor Masculino ‚Äì P√™nis #Aprenda", videoId: "pgkoZ-HZ6p0" },
            { title: "Aparelho Reprodutor Masculino ‚Äì Test√≠culo e Epid√≠dimo #Aprenda", videoId: "4oSx4DoxgjA" }
        ];

        // --- DADOS DAS AULAS: EMBRIOLOGIA ---
        const EMBRIOLOGIA_LESSONS = [
            { title: "Gametog√™nese", videoId: "tMXgjHq61wQ" },
            { title: "Fecunda√ß√£o", videoId: "O9YsUhCQv64" },
            { title: "Zigoto e Blastocisto", videoId: "-iuWA5CQCMI" },
            { title: "√Çmnio e Celoma", videoId: "i29YGecX9UQ" },
            { title: "C√≥rion", videoId: "HbQ8Zpex0AA" },
            { title: "Membranas Fetais", videoId: "a3zj8iowhJ8" },
            { title: "Gastrula√ß√£o", videoId: "HVVclowB9qI" },
            { title: "Notocorda e Tubo Neural", videoId: "XUD3IUNK7Vk" },
            { title: "Somitos, Celoma Intra e Sistema Cardiovascular", videoId: "7rYQMJzQoYg" },
            { title: "Organog√™nese e Dobramento do Embri√£o", videoId: "iu5VjWLLoKU" },
            { title: "Embriologia da 4¬™ √† 8¬™ Semana", videoId: "tSqOhvdTDnc" },
            { title: "Embriologia da 9¬™ Semana ao Nascimento", videoId: "aFEVmlbJ708" },
            { title: "Cavidades do Corpo Embrion√°rio", videoId: "L2IZEut6Yok" },
            { title: "Desenvolvimento do Diafragma", videoId: "CeDWt2Qg3UE" },
            { title: "Arcos Far√≠ngeos e Derivados", videoId: "WEzfPk3OJ9o" },
            { title: "Bolsas, Sulcos e Membranas Far√≠ngeas", videoId: "Wxo8xMksxiU" },
            { title: "Embriologia do Pesco√ßo", videoId: "axyh2MK-XDU" },
            { title: "Embriologia da Face", videoId: "iExD4xImT24" },
            { title: "Embriologia do Palato", videoId: "xQO9_OJmuCI" },
            { title: "Prim√≥rdio Respirat√≥rio e Faringe", videoId: "fnJnYip6qWA" },
            { title: "Traqueia, Br√¥nquios e Pulm√µes", videoId: "f2k4ng4kLzQ" },
            { title: "Matura√ß√£o Pulmonar", videoId: "7ydEZDWXWmg" },
            { title: "Intestino Anterior: Es√¥fago e Est√¥mago", videoId: "kDNHoeo5Yio" },
            { title: "Intestino Anterior: Bolsa Omental e Duodeno", videoId: "IqL5Icry-ZQ" },
            { title: "Intestino Anterior: F√≠gado, Ves√≠cula Biliar e Sistema Biliar", videoId: "V3gyiEpoEXA" },
            { title: "Intestino Anterior: P√¢ncreas e Ba√ßo", videoId: "D4GpR1-IJ5M" },
            { title: "Intestino M√©dio: Hernia√ß√£o, Rota√ß√£o e Fixa√ß√£o", videoId: "MvR0FbqGD_Y" },
            { title: "Intestino M√©dio: Ceco, Ap√™ndice e Anomalias", videoId: "XU-voGzqC_c" },
            { title: "Intestino Posterior: Derivados e Cloaca", videoId: "kCVHiNzogbI" },
            { title: "Intestino Posterior: Canal Anal e Anomalias", videoId: "hRYdGI-D-aM" },
            { title: "Desenvolvimento do Cora√ß√£o e Vasos Sangu√≠neos", videoId: "8ivU4plbcUw" },
            { title: "Sistema Urogenital: Pronefron e Mesonefron", videoId: "L-M2H296atc" },
            { title: "Sistema Urin√°rio: Rins Metanefron e Ureteres", videoId: "y1e_gD80CDU" },
            { title: "Sistema Urin√°rio: Mudan√ßa Posicional dos Rins", videoId: "6a6NlPFMsUw" },
            { title: "Sistema Urin√°rio: Uretra, Suprarrenais e Hiperplasia", videoId: "-4rOo49djco" },
            { title: "Sistema Urin√°rio: Bexiga e Defeitos Cong√™nitos", videoId: "Tow8vrGpf6A" },
            { title: "Desenvolvimento das G√¥nadas Indiferenciadas", videoId: "Sb62GtZf0LY" },
            { title: "Desenvolvimento dos Test√≠culos e Ov√°rios", videoId: "JAQPFnvPcqg" },
            { title: "Ductos Genitais e Gl√¢ndulas Masculinas", videoId: "NEaIM5XcWQQ" },
            { title: "Ductos, Gl√¢ndulas Femininas e Vagina", videoId: "hOOyLb18Y0g" },
            { title: "Genit√°lias Externas Masculinas", videoId: "ndwz9H7n6T4" },
            { title: "Canal Inguinal e Descida dos Test√≠culos", videoId: "IA4m_VyzUrU" },
            { title: "Placenta", videoId: "BbYOX4kR3vc" }
        ];

        // --- DADOS DAS AULAS: RESUMO PEDIATRIA (ESTRAT√âGIA) ---
        const RESUMO_PEDIATRIA_LESSONS = [
            // üìò Bases e Desenvolvimento
            { section: "üìò Bases e Desenvolvimento", title: "Aleitamento materno", videoId: "uxFH5APBAzw" },
            { section: "üìò Bases e Desenvolvimento", title: "Crescimento", videoId: "xtAnCYyLqJ8" },
            { section: "üìò Bases e Desenvolvimento", title: "Desenvolvimento", videoId: "ValaKxfrDhA" },
            { section: "üìò Bases e Desenvolvimento", title: "Puberdade", videoId: "NXtaFxWf2Rw" },
            { section: "üìò Bases e Desenvolvimento", title: "Vitaminas", videoId: "dkLzP-CmOrI" },
            { section: "üìò Bases e Desenvolvimento", title: "Desnutri√ß√£o", videoId: "Hhl7VZw8DzI" },
            { section: "üìò Bases e Desenvolvimento", title: "Obesidade", videoId: "gHkmaktBCFw" },
            
            // ü´Å Doen√ßas Respirat√≥rias
            { section: "ü´Å Doen√ßas Respirat√≥rias", title: "Bronquite", videoId: "4pAKcs_SMqc" },
            { section: "ü´Å Doen√ßas Respirat√≥rias", title: "Asma", videoId: "QDzuTUWGR98" },
            { section: "ü´Å Doen√ßas Respirat√≥rias", title: "Pneumonia", videoId: "6BmJ2V18y4k" },
            { section: "ü´Å Doen√ßas Respirat√≥rias", title: "Tuberculose", videoId: "nEi03VWylls" },
            { section: "ü´Å Doen√ßas Respirat√≥rias", title: "Fibrose", videoId: "AD_XQvSfCDk" },
            
            // ‚ù§Ô∏è Cardio / Reumatologia
            { section: "‚ù§Ô∏è Cardio / Reumatologia", title: "Febre reum√°tica", videoId: "68U_ki_N3J0" },
            { section: "‚ù§Ô∏è Cardio / Reumatologia", title: "Doen√ßa de Kawasaki", videoId: "-nhpZgF76aA" },
            { section: "‚ù§Ô∏è Cardio / Reumatologia", title: "Hipertens√£o", videoId: "xb2oX7pNHIQ" },
            { section: "‚ù§Ô∏è Cardio / Reumatologia", title: "Choque em Pediatria", videoId: "T2ItiNKLY60" },
            
            // ü¶† Infectologia
            { section: "ü¶† Infectologia", title: "Infec√ß√£o", videoId: "Xx1pXyswDWk" },
            { section: "ü¶† Infectologia", title: "Coqueluche", videoId: "FiMFkeRDpVE" },
            { section: "ü¶† Infectologia", title: "Infec√ß√µes Cong√™nitas", videoId: "xc4EK8D818c" },
            { section: "ü¶† Infectologia", title: "Infec√ß√µes Cong√™nitas ‚Äì Parte II", videoId: "N3IloHY8Fcs" },
            
            // üß† Neurologia e Outros
            { section: "üß† Neurologia e Outros", title: "Cefaleia", videoId: "EJkESSwHg5Y" },
            { section: "üß† Neurologia e Outros", title: "SMSL", videoId: "QExn6N4zKFU" },
            { section: "üß† Neurologia e Outros", title: "Refluxo gastroesof√°gico", videoId: "mkr93xTXfPI" },
            { section: "üß† Neurologia e Outros", title: "Artrite", videoId: "H8OCRCeGtFA" },
            { section: "üß† Neurologia e Outros", title: "Urtic√°ria", videoId: "IXDeepnvlUU" }
        ];

        // --- DADOS DA BIBLIOTECA ---
        const LIBRARY_DATA = [
            {
                id: 'medresumos',
                title: 'MedResumos',
                type: 'folder',
                description: 'Resumos e materiais de apoio',
                icon: <BookOpen size={24} />,
                color: 'from-amber-600 to-amber-800',
                children: [
                    {
                        id: 'ciclo_basico',
                        title: 'Ciclo B√°sico Modular',
                        type: 'folder',
                        description: 'Materiais do Ciclo B√°sico (2023)',
                        icon: <Microscope size={24} />,
                        color: 'from-emerald-600 to-emerald-800',
                        children: [
                            { title: '(2023) SOI ‚Äì C√©lula ‚Äì Estrutura e Fun√ß√£o (CEF)', url: 'https://drive.google.com/file/d/1aGPlYiBJeyWni6XhuL4xM6G4ONFlw8-X/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Organiza√ß√£o Morfo-Funcional (OMF) ‚Äì Sistema Locomotor', url: 'https://drive.google.com/file/d/17z7biFG7HnGzXP69IFGP0sUlAseVvK6d/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Organiza√ß√£o Morfo-Funcional (OMF) ‚Äì Sistema Nervoso', url: 'https://drive.google.com/file/d/1vhk7rj5C8bBUudPlTVGiiEUbpf6pKxrn/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Sistema Cardiovascular', url: 'https://drive.google.com/file/d/1Qx1vo1Sl_Ohozjh3yHsX9IJkne-A3yy7/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Sistema Digest√≥rio', url: 'https://drive.google.com/file/d/1y9QXoRm7LLSbpTCTx2XkQQTN8pKoFtJa/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Sistema End√≥crino, Reprodu√ß√£o e Desenvolvimento', url: 'https://drive.google.com/file/d/1ES-pf6mpaKUEZsDjp4JdWWxuMlJtncee/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Sistema Imune e MAD', url: 'https://drive.google.com/file/d/1jHwT0JjsA3P1uC3RWkAW14aGRDGv8gph/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Sistema Locomotor', url: 'https://drive.google.com/file/d/1zQI-lCp3elcEfafZDtcBWcywvVaNi3HT/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Sistema Nervoso', url: 'https://drive.google.com/file/d/1l5wXJ5xKAwa4uKuaHCKZiE-vZnwON_MF/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Sistema Respirat√≥rio', url: 'https://drive.google.com/file/d/1IwUq0uy6sO79iXPonPxiNosLX0NJh9-c/view', type: 'file' },
                            { title: '(2023) SOI ‚Äì Sistema Urin√°rio', url: 'https://drive.google.com/file/d/1dsg45xLP_xVH_P7Dp9p03HETpEKsHJFT/view', type: 'file' }
                        ]
                    }
                ]
            }
        ];

        // --- LISTAS DE CURSOS GERAIS ---
        const SANAR_COURSES_TITLES = [
            "Anatomia do Sistema Locomotor", "Anatomia dos √ìrg√£os e Sistemas", "Antibioticoterapia",
            "Atendimento Pr√©-Hospitalar", "Biof√≠sica", "Biologia Molecular e Celular", "Bioqu√≠mica",
            "Eletrocardiograma (ECG)", "Embriologia", "Exames Laboratoriais", "Farmacologia",
            "Fisiologia", "Gen√©tica", "Histologia", "Microbiologia", "Neuroanatomia", "Parasitologia",
            "Patologia", "Primeiros Socorros", "Radiologia", "Semiologia", "Sistema Circulat√≥rio",
            "Sistema Digest√≥rio", "Sistema End√≥crino", "Sistema Hematopoi√©tico", "Sistema Imune",
            "Sistema Nervoso", "Sistema Reprodutor", "Sistema Respirat√≥rio", "Sistema Urin√°rio e Renal",
            "Trauma"
        ];

        const EMR_MODULES = [
            "CIR ‚Äì Bases Cir√∫rgicas", "CIR ‚Äì Emerg√™ncias Cir√∫rgicas", "CIR ‚Äì Especialidades Cir√∫rgicas", "CIR ‚Äì Icter√≠cia",
            "CM ‚Äì Anemias e Pancitopenias", "CM ‚Äì Artropatias e Doen√ßas da Autoimunidade", "CM ‚Äì Dermatologia", "CM ‚Äì Diarreia",
            "CM ‚Äì Dispneia e Tosse", "CM ‚Äì Dist√∫rbios da Hemostasia", "CM ‚Äì Dist√∫rbios End√≥crinos", "CM ‚Äì Doen√ßas Infecciosas End√™micas",
            "CM ‚Äì Doen√ßas Renais e das Vias Urin√°rias", "CM ‚Äì Dor Tor√°cica", "CM ‚Äì Neurologia", "CM ‚Äì O Paciente Idoso",
            "CM ‚Äì Principais Emerg√™ncias Cl√≠nicas", "CM ‚Äì Principais Transtornos Psiqui√°tricos", "CR ‚Äì Disfagia e Dispepsia",
            "GO ‚Äì Ambulat√≥rio de Ginecologia", "GO ‚Äì Assist√™ncia Obst√©trica", "GO ‚Äì Intercorr√™ncias na Gesta√ß√£o e no Puerp√©rio",
            "PED ‚Äì Emerg√™ncias Pedi√°tricas", "PED ‚Äì Especialidades", "PED ‚Äì Neonatologia", "PED ‚Äì Puericultura",
            "PREV ‚Äì Medicina Preventiva", "Revis√£o SES-PE"
        ];

        // --- DADOS COMPLETOS ---
        const DATA = {
            // --- PLATAFORMAS (CURSOS PRINCIPAIS) ---
            platforms: {
                sanar: {
                    id: 'sanar_main',
                    title: 'SanarFlix',
                    subtitle: 'Plataforma de Streaming',
                    theme: 'red',
                    icon: <Play size={28} fill="currentColor" />,
                    color: 'from-red-600 to-red-900',
                    image: 'Tutoria/sanarflix/Sanar.png',
                    subcourses: SANAR_COURSES_TITLES.map((title, index) => {
                        const isLocomotor = title === "Anatomia do Sistema Locomotor";
                        const isReprodutor = title === "Sistema Reprodutor";
                        const isEmbriologia = title === "Embriologia";
                        
                        let lessons = [];
                        let duration = 'V√≠deo';
                        let type = 'Curso';

                        if (isLocomotor) {
                            lessons = LOCOMOTOR_LESSONS;
                            duration = '20 Aulas';
                            type = 'Curso Completo';
                        } else if (isReprodutor) {
                            lessons = REPRODUTOR_LESSONS;
                            duration = '15 Aulas';
                            type = 'Curso Completo';
                        } else if (isEmbriologia) {
                            lessons = EMBRIOLOGIA_LESSONS;
                            duration = '43 Aulas';
                            type = 'Curso Completo';
                        }

                        return {
                            id: `sf-c-${index}`, 
                            title: title, 
                            type: type, 
                            duration: duration,
                            lessons: lessons,
                            color: 'from-red-600 to-red-800'
                        };
                    }),
                    problems: [], questions: []
                },
                emr: {
                    id: 'emr_main',
                    title: 'Eu M√©dico Residente',
                    subtitle: 'Extensivo & Revis√£o',
                    theme: 'green',
                    icon: <Stethoscope size={28} />,
                    color: 'from-emerald-600 to-emerald-900',
                    image: 'Cursos/EMR/EMR.png',
                    subcourses: EMR_MODULES.map((title, index) => ({
                        id: `emr-c-${index}`, title: title, type: 'M√≥dulo EMR', duration: 'Aulas',
                        color: 'from-emerald-600 to-emerald-800'
                    })),
                    problems: [], questions: []
                },
                medcurso: {
                    id: 'medcurso_main',
                    title: 'MEDCURSO',
                    subtitle: 'Extensivo',
                    theme: 'yellow',
                    icon: <BookOpen size={28} />,
                    color: 'from-yellow-600 to-yellow-800',
                    image: 'Cursos/MEDCURSO/medcurso.png',
                    subcourses: [
                        {
                            id: 'mc_cir', title: 'Cirurgia', color: 'from-yellow-500 to-yellow-700',
                            subcourses: [
                                { id: 'mc_cir1', title: 'CIR 1 (Aulas, B√¥nus)', type: 'M√≥dulo' },
                                { id: 'mc_cir2', title: 'CIR 2 (Aulas, B√¥nus)', type: 'M√≥dulo' },
                                { id: 'mc_cir3', title: 'CIR 3 (Aulas, B√¥nus)', type: 'M√≥dulo' }
                            ]
                        },
                        {
                            id: 'mc_gas', title: 'Gastrologia', color: 'from-yellow-500 to-yellow-700',
                            subcourses: [
                                { id: 'mc_gas1', title: 'GAS 1 (Aulas, B√¥nus)', type: 'M√≥dulo' }
                            ]
                        },
                        {
                            id: 'mc_gin', title: 'Ginecologia', color: 'from-yellow-500 to-yellow-700',
                            subcourses: [
                                { id: 'mc_gin1', title: 'GIN 1 (Aulas, B√¥nus)', type: 'M√≥dulo' },
                                { id: 'mc_gin2', title: 'GIN 2 (Aulas, B√¥nus)', type: 'M√≥dulo' }
                            ]
                        },
                        {
                            id: 'mc_hem', title: 'Hematologia', color: 'from-yellow-500 to-yellow-700',
                            subcourses: [
                                { id: 'mc_hem1', title: 'HEM 1 (Aulas, B√¥nus)', type: 'M√≥dulo' },
                                { id: 'mc_hem2', title: 'HEM 2 (Aulas, B√¥nus)', type: 'M√≥dulo' }
                            ]
                        },
                        {
                            id: 'mc_nef', title: 'Nefrologia', color: 'from-yellow-500 to-yellow-700',
                            subcourses: [
                                { id: 'mc_nef1', title: 'NEFRO 1 (Aulas, B√¥nus)', type: 'M√≥dulo' },
                                { id: 'mc_nef2', title: 'NEFRO 2 (Aulas, B√¥nus)', type: 'M√≥dulo' },
                                { id: 'mc_nef3', title: 'NEFRO 3 (Aulas, B√¥nus)', type: 'M√≥dulo' }
                            ]
                        },
                        {
                            id: 'mc_obs', title: 'Obstetr√≠cia', color: 'from-yellow-500 to-yellow-700',
                            subcourses: [
                                { id: 'mc_obs1', title: 'OBS 1 (Aulas)', type: 'M√≥dulo' },
                                { id: 'mc_obs2', title: 'OBS 2 (Aulas)', type: 'M√≥dulo' }
                            ]
                        },
                        {
                            id: 'mc_ped', title: 'Pediatria', color: 'from-yellow-500 to-yellow-700',
                            subcourses: [
                                { id: 'mc_ped1', title: 'PED 1 (Aula B√¥nus, Aulas, B√¥nus)', type: 'M√≥dulo' },
                                { id: 'mc_ped2', title: 'PED 2 (Aulas)', type: 'M√≥dulo' },
                                { id: 'mc_ped3', title: 'PED 3 (Aula B√¥nus, Aulas)', type: 'M√≥dulo' },
                                { id: 'mc_ped4', title: 'PED 4 (Aulas)', type: 'M√≥dulo' }
                            ]
                        },
                        {
                            id: 'mc_prev', title: 'Preventiva', color: 'from-yellow-500 to-yellow-700',
                            subcourses: [
                                { id: 'mc_prev1', title: 'PREV 1 (Aula B√¥nus, Aulas)', type: 'M√≥dulo' },
                                { id: 'mc_prev2', title: 'PREV 2 (Aulas, B√¥nus)', type: 'M√≥dulo' },
                                { id: 'mc_prev3', title: 'PREV 3 (Aulas)', type: 'M√≥dulo' }
                            ]
                        },
                        {
                            id: 'mc_reu', title: 'Reumatologia', color: 'from-yellow-500 to-yellow-700',
                            subcourses: [
                                { id: 'mc_reu1', title: 'REU 1 (Aulas)', type: 'M√≥dulo' },
                                { id: 'mc_reu2', title: 'REU 2 (Aulas)', type: 'M√≥dulo' }
                            ]
                        }
                    ],
                    problems: [], questions: []
                },
                estrategia: {
                    id: 'estrategia_main',
                    title: 'Estrat√©gia MED',
                    subtitle: 'Resid√™ncia & Revalida',
                    theme: 'teal_blue',
                    icon: <Brain size={28} />,
                    color: 'from-teal-600 to-blue-800',
                    image: 'Cursos/Estrat√©gia MED/logo.png',
                    subcourses: [
                        // --- ATUALIZA√á√ïES ---
                        { id: 'est_att_1', title: 'As principais modifica√ß√µes do CID-11 na Psiquiatria', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_2', title: 'Assist√™ncia ao rec√©m-nascido exposto √† Monkeypox', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_3', title: 'Atualiza√ß√£o da Lei da Laqueadura', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_4', title: 'Atualiza√ß√£o no tratamento de ILTB', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_5', title: 'Atualiza√ß√£o sobre Reanima√ß√£o Neonatal', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_6', title: 'Atualiza√ß√£o Vacina√ß√£o HPV', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_7', title: 'Campanha contra o Sarampo (2022)', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_8', title: 'Clampeamento do cord√£o umbilical em RN expostos ao HIV materno', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_9', title: 'COVID-19: o que mudou no tratamento', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_10', title: 'Dados do Saneamento B√°sico no Brasil', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_11', title: 'Documento GOLD 2023', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_12', title: 'Hepatite Misteriosa', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_13', title: 'Lista Nacional de Notifica√ß√£o Compuls√≥ria', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_14', title: 'Metas glic√™micas no tratamento do Diabetes Mellitus', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_15', title: 'Monkeypox ‚Äì Var√≠ola dos Macacos', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_16', title: 'Mudan√ßas no Teste do Cora√ß√£ozinho', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_17', title: 'Normas √©ticas para t√©cnicas de reprodu√ß√£o assistida', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_18', title: 'Nova atualiza√ß√£o da Lista de Notifica√ß√£o Compuls√≥ria', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_19', title: 'Protocolo de Hipoglicemia Neonatal', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_20', title: 'Protocolo de Profilaxia P√≥s-Exposi√ß√£o √† Raiva', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_21', title: 'Rastreamento do Diabetes Mellitus', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_22', title: 'S√≠filis, HIV, Hepatite B e C na gesta√ß√£o', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_23', title: 'Telemedicina no √¢mbito do SUS', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_24', title: 'Toxoplasmose na gesta√ß√£o', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_25', title: 'Vacina Herpes-Z√≥ster Inativada (Shingrix)', category: 'atualizacoes', type: 'Atualiza√ß√£o' },
                        { id: 'est_att_26', title: 'Vacina√ß√£o contra o HPV', category: 'atualizacoes', type: 'Atualiza√ß√£o' },

                        // --- CRONOGRAMA ---
                        { id: 'est_cron_1', title: 'Cronograma Turma de Maio (30 semanas)', category: 'cronograma', type: 'Cronograma' },
                        { id: 'est_cron_2', title: 'Cronograma Turma de Mar√ßo (36 semanas)', category: 'cronograma', type: 'Cronograma' },
                        { id: 'est_cron_3', title: 'Cronograma Extensivo (52 semanas)', category: 'cronograma', type: 'Cronograma' },

                        // --- MULTIM√çDIA E B√îNUS ---
                        { id: 'est_multi_1', title: 'Cirurgia', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_2', title: 'Ecocardiograma: o que voc√™ precisa saber', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_3', title: 'Gastroenterologia', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_4', title: 'Ginecologia', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_5', title: 'Hematologia', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_6', title: 'Medicina Preventiva', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_7', title: 'Nefrologia', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_8', title: 'Obstetr√≠cia', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_9', title: 'Oftalmologia', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_10', title: 'POCUS para provas de resid√™ncia', category: 'multimidia', type: 'Multim√≠dia' },
                        { id: 'est_multi_11', title: 'Radiologia', category: 'multimidia', type: 'Multim√≠dia' },
                        
                        // --- SIMULADOS MULTIM√çDIA ---
                        { id: 'est_sim_1', title: 'Simulado Cardiologia', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_2', title: 'Simulado Dermatologia', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_3', title: 'Simulado Eletrocardiograma', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_4', title: 'Simulado Endocrinologia', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_5', title: 'Simulado Gastroenterologia', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_6', title: 'Simulado Ginecologia', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_7', title: 'Simulado Hematologia', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_8', title: 'Simulado Nefrologia', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_9', title: 'Simulado Obstetr√≠cia', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_10', title: 'Simulado Ortopedia', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_11', title: 'Simulado Ortopedia USP-SP', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_12', title: 'Simulado Pediatria', category: 'multimidia', type: 'Simulado' },
                        { id: 'est_sim_13', title: 'Simulado Radiologia', category: 'multimidia', type: 'Simulado' },

                        // --- EXTENSIVO (PRINCIPAL) ---
                        { id: 'est_ext_1', title: 'Cardiologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_2', title: 'Cirurgia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_3', title: 'Dermatologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_4', title: 'Endocrinologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_5', title: 'Gastroenterologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_6', title: 'Ginecologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_7', title: 'Hematologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_8', title: 'Hepatologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_9', title: 'Infectologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_10', title: 'Medicina Preventiva (Intensivo)', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_11', title: 'Medicina Preventiva (Extensivo)', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_12', title: 'Nefrologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_13', title: 'Neurologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_14', title: 'Obstetr√≠cia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_15', title: 'Oftalmologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_16', title: 'Ortopedia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_17', title: 'Otorrinolaringologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_18', title: 'Pediatria', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_19', title: 'Pneumologia', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_20', title: 'Psiquiatria', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_21', title: 'Radiografia de T√≥rax', category: 'extensivo', type: 'Extensivo' },
                        { id: 'est_ext_22', title: 'Reumatologia', category: 'extensivo', type: 'Extensivo' },

                        // --- RESUMOS ---
                        { id: 'est_res_1', title: 'Resumo Cardiologia', category: 'resumos', type: 'Resumo' },
                        { id: 'est_res_2', title: 'Resumo Cirurgia', category: 'resumos', type: 'Resumo' },
                        { id: 'est_res_3', title: 'Resumo Dermatologia', category: 'resumos', type: 'Resumo' },
                        { id: 'est_res_4', title: 'Resumo Gastroenterologia', category: 'resumos', type: 'Resumo' },
                        { id: 'est_res_5', title: 'Resumo Ginecologia', category: 'resumos', type: 'Resumo' },
                        { id: 'est_res_6', title: 'Resumo Hematologia', category: 'resumos', type: 'Resumo' },
                        { id: 'est_res_7', title: 'Resumo Hepatologia', category: 'resumos', type: 'Resumo' },
                        { id: 'est_res_8', title: 'Resumo Medicina Preventiva', category: 'resumos', type: 'Resumo' },
                        { id: 'est_res_9', title: 'Resumo Nefrologia', category: 'resumos', type: 'Resumo' },
                        { id: 'est_res_10', title: 'Resumo Neurologia', category: 'resumos', type: 'Resumo' },
                        { 
                            id: 'est_res_11', 
                            title: 'Resumo Pediatria', 
                            category: 'resumos', 
                            type: 'Resumo', 
                            lessons: RESUMO_PEDIATRIA_LESSONS 
                        }
                    ],
                    problems: [], questions: []
                }
            },
            
            basico: {
                title: "Ciclo B√°sico",
                icon: <Microscope size={20} />,
                subjects: [
                    {
                        id: 'anat', title: 'Anatomia Humana', color: 'from-emerald-500 to-emerald-700',
                        subcourses: [
                            { id: 'c1', title: 'Sistema Locomotor', duration: '20h', type: 'Video + PDF' },
                            { id: 'c2', title: 'Neuroanatomia', duration: '35h', type: 'Video + PDF' },
                            { id: 'c3', title: 'Esplancnologia', duration: '15h', type: 'Video + PDF' },
                            { id: 'c4', title: 'Anatomia Topogr√°fica', duration: '25h', type: 'Video + PDF' },
                        ]
                    },
                    {
                        id: 'fisio', title: 'Fisiologia', color: 'from-blue-500 to-blue-700',
                        subcourses: [ { id: 'c5', title: 'Fisiologia Cardiovascular', duration: '12h', type: 'Video' } ]
                    },
                    {
                        id: 'hist', title: 'Histologia', color: 'from-violet-500 to-violet-700',
                        subcourses: [ { id: 'c7', title: 'Tecidos B√°sicos', duration: '10h', type: 'PDF' } ]
                    },
                    {
                        id: 'bioq', title: 'Bioqu√≠mica', color: 'from-orange-500 to-orange-700',
                        subcourses: [ { id: 'c8', title: 'Metabolismo', duration: '18h', type: 'Video' } ]
                    },
                ]
            },
            clinico: {
                title: "Ciclo Cl√≠nico",
                icon: <Stethoscope size={20} />,
                subjects: [
                    {
                        id: 'semio', title: 'Semiologia M√©dica', color: 'from-cyan-500 to-cyan-700',
                        subcourses: [ 
                            { id: 'c9', title: 'Exame F√≠sico Geral', duration: '10h', type: 'Pr√°tica' },
                            { id: 'c10', title: 'Anamnese Completa', duration: '5h', type: 'Teoria' }
                        ]
                    },
                    {
                        id: 'cardio', title: 'Cardiologia', color: 'from-red-500 to-red-700',
                        subcourses: [ { id: 'c11', title: 'ECG para Iniciantes', duration: '8h', type: 'Curso' } ]
                    },
                    {
                        id: 'pneumo', title: 'Pneumologia', color: 'from-sky-500 to-sky-700',
                        subcourses: [ { id: 'c13', title: 'Doen√ßas Obstrutivas', duration: '9h', type: 'Video' } ]
                    },
                ]
            },
            internato: {
                title: "Internato",
                icon: <Activity size={20} />,
                subjects: [
                    {
                        id: 'urg', title: 'Urg√™ncia e Emerg√™ncia', color: 'from-rose-600 to-rose-800',
                        subcourses: [ 
                            { id: 'c14', title: 'Protocolo de ACLS', duration: '10h', type: 'Simula√ß√£o' },
                            { id: 'c15', title: 'Trauma (ATLS)', duration: '15h', type: 'Simula√ß√£o' }
                        ]
                    },
                    {
                        id: 'cir', title: 'Cirurgia Geral', color: 'from-slate-500 to-slate-700',
                        subcourses: [ { id: 'c16', title: 'Cl√≠nica Cir√∫rgica', duration: '20h', type: 'Video' } ]
                    },
                    {
                        id: 'go', title: 'Ginecologia e Obstetr√≠cia', color: 'from-pink-500 to-pink-700',
                        subcourses: [ { id: 'c17', title: 'Pr√©-Natal', duration: '12h', type: 'Video' } ]
                    },
                ]
            },
            pbl_basico: {
                title: "Tutoria ‚Äì Ciclo B√°sico",
                icon: <Users size={20} />,
                subjects: [
                    { 
                        id: 'mod1', 
                        title: 'M√≥dulo 1 ‚Äî Introdu√ß√£o ao Estudo da Medicina', 
                        color: 'from-amber-600 to-amber-800', 
                        medLabel: 'MED 1', 
                        subcourses: [{id: 'm1c1', title: 'Problema 1: O In√≠cio', type: 'PBL'}, {id: 'm1c2', title: 'Problema 2: SUS', type: 'PBL'}],
                        problems: [
                            { id: 'p1', title: 'Problema 1: O In√≠cio', file: 'M√≥dulo I ‚Äì Introdu√ß√£o ao Estudo da Medicina.html' }
                        ],
                        questions: []
                    },
                    { id: 'mod2', title: 'M√≥dulo 2 ‚Äî Altera√ß√£o, Prolifera√ß√£o e Crescimento Celular', color: 'from-amber-600 to-amber-800', medLabel: 'MED 1', subcourses: [{id: 'm2c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { id: 'mod3', title: 'M√≥dulo 3 ‚Äî Fun√ß√µes Biol√≥gicas 1', color: 'from-amber-600 to-amber-800', medLabel: 'MED 1', subcourses: [{id: 'm3c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { 
                        id: 'mod4', 
                        title: 'M√≥dulo 4 ‚Äî Fun√ß√µes Biol√≥gicas 2', 
                        color: 'from-amber-600 to-amber-800', 
                        medLabel: 'MED 2', 
                        subcourses: [{id: 'm4c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], 
                        problems: [
                            { id: 'm4_p1', title: 'Problema 1 - Apostila Neurofisiologia e Alcool', file: '/Tutoria/Resumos/M√≥dulo 4/Problema 1 - Apostila_Neurofisiologia_e_Alcool.html', moduleRef: '4' },
                            { id: 'm4_p2', title: 'Problema 2 - Apostila Controlo Motor', file: '/Tutoria/Resumos/M√≥dulo 4/Problema 2 - Apostila_Controlo_Motor.html', moduleRef: '4' },
                            { id: 'm4_p3', title: 'Problema 3 - Apostila Sistema Endocrino', file: '/Tutoria/Resumos/M√≥dulo 4/Problema 3 - Apostila_Sistema_Endocrino.html', moduleRef: '4' },
                            { id: 'm4_p4', title: 'Problema 4 - Apostila Fisiologia Renal', file: '/Tutoria/Resumos/M√≥dulo 4/Problema 4 - Apostila_Fisiologia_Renal.html', moduleRef: '4' }
                        ], 
                        questions: [] 
                    },
                    { 
                        id: 'mod5', 
                        title: 'M√≥dulo 5 ‚Äî Metabolismo e Nutri√ß√£o', 
                        color: 'from-amber-600 to-amber-800', 
                        medLabel: 'MED 2', 
                        subcourses: [{id: 'm5c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], 
                        problems: [
                            { id: 'm5_p1', title: 'Problema 1 - Apostila TGI Superior e Saciedade', file: '/Tutoria/Resumos/M√≥dulo 5/Problema 1 - Apostila_TGI_Superior_e_Saciedade.html', moduleRef: '5' },
                            { id: 'm5_p2', title: 'Problema 2 - Apostila Fisiologia Intestinal e Parasitologia', file: '/Tutoria/Resumos/M√≥dulo 5/Problema 2 - Apostila_Fisiologia_Intestinal_e_Parasitologia.html', moduleRef: '5' },
                            { id: 'm5_p3', title: 'Problema 3 - Apostila Metabolismo Lipidos e Aterosclerose', file: '/Tutoria/Resumos/M√≥dulo 5/Problema 3 - Apostila_Metabolismo_Lipidos_e_Aterosclerose.html', moduleRef: '5' },
                            { id: 'm5_p4', title: 'Problema 4 - Apostila Regulacao Glicemica e Jejum', file: '/Tutoria/Resumos/M√≥dulo 5/Problema 4 - Apostila_Regulacao_Glicemica_e_Jejum.html', moduleRef: '5' },
                            { id: 'm5_p5', title: 'Problema 5 - Apostila Nutricao e Hepatopatias', file: '/Tutoria/Resumos/M√≥dulo 5/Problema 5 - Apostila_Nutricao_e_Hepatopatias.html', moduleRef: '5' }
                        ], 
                        questions: [] 
                    },
                    { 
                        id: 'mod6', 
                        title: 'M√≥dulo 6 ‚Äî Mecanismo de Agress√£o e Defesa', 
                        color: 'from-amber-600 to-amber-800', 
                        medLabel: 'MED 2', 
                        subcourses: [{id: 'm6c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}],
                        simulados: [
                            { id: 'sim1', title: 'Simulado TUT ‚Äì P1', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/Simulado_TUT_P1.html' },
                            { id: 'sim2', title: 'Simulado TUT ‚Äì P2', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/Simulado_TUT_P2.html' },
                            { id: 'sim3', title: 'Simulado TUT ‚Äì P3', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/Simulado_TUT_P3.html' },
                            { id: 'sim4', title: 'Simulado TUT ‚Äì P4', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/Simulado_TUT_P4.html' },
                            { id: 'sim5', title: 'Simulado TUT ‚Äì P5', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/Simulado_TUT_P5.html' },
                            { id: 'sim6', title: 'Simulado TUT ‚Äì P6', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/Simulado_TUT_P6.html' }
                        ],
                        problems: [
                            { 
                                id: 'p1', 
                                title: 'Problema 1 ‚Äì MECANISMO DE AGRESS√ÉO E DEFESA', 
                                file: '/Tutoria/Resumos/M√≥dulo 6/Problema 1 ‚Äì MECANISMO DE AGRESS√ÉO E DEFESA.html',
                                moduleRef: '6'
                            },
                            { 
                                id: 'p2', 
                                title: 'Problema 2 ‚Äì Termos, Defesas e Hipersensibilidade', 
                                file: '/Tutoria/Resumos/M√≥dulo 6/Problema 2 - Termos, Defesas e Hipersensibilidade.html',
                                moduleRef: '6'
                            },
                            { 
                                id: 'p3', 
                                title: 'Problema 3 ‚Äì Mecanismos de Agress√£o e Defesa, Bact√©rias, Imunidade e Evas√£o Imune', 
                                file: '/Tutoria/Resumos/M√≥dulo 6/Problema 3 - Mecanismos de Agress√£o e Defesa, Bact√©rias, Imunidade e Evas√£o Imune.html',
                                moduleRef: '6'
                            },
                            { 
                                id: 'p4', 
                                title: 'Problema 4 ‚Äì Patologia e Terap√™utica', 
                                file: '/Tutoria/Resumos/M√≥dulo 6/Problema 4 - Patologia e Terap√™utica.html',
                                moduleRef: '6'
                            },
                            { 
                                id: 'p5', 
                                title: 'Problema 5 ‚Äì Repara√ß√£o Tecidual e Estresse Oxidativo', 
                                file: '/Tutoria/Resumos/M√≥dulo 6/Problema 5 - Repara√ß√£o Tecidual e Estresse Oxidativo.html',
                                moduleRef: '6'
                            },
                            { 
                                id: 'p6', 
                                title: 'Problema 6 ‚Äì Parasitologia e Imunomodula√ß√£o', 
                                file: '/Tutoria/Resumos/M√≥dulo 6/Problema 6 - Parasitologia e Imunomodula√ß√£o.html',
                                moduleRef: '6'
                            }
                        ],
                        questions: [
                            { id: 'q1', title: 'ATP1M6', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/ATP1M6.html', moduleRef: '6' },
                            { id: 'q2', title: 'ATP2M6', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/ATP2M6.html', moduleRef: '6' },
                            { id: 'q3', title: 'ATP3M6', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/ATP3M6.html', moduleRef: '6' },
                            { id: 'q4', title: 'ATP4M6', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/ATP4M6.html', moduleRef: '6' },
                            { id: 'q5', title: 'ATP5M6', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/ATP5M6.html', moduleRef: '6' },
                            { id: 'q6', title: 'ATP6M6', file: 'tutoria/M√≥dulo 6 - Mecanismo de Agress√£o e Defesa/ATP6M6.html', moduleRef: '6' }
                        ]
                    },
                    { 
                        id: 'mod7', 
                        title: 'M√≥dulo 7 ‚Äî Concep√ß√£o, Forma√ß√£o do Ser Humano e Gesta√ß√£o', 
                        color: 'from-amber-600 to-amber-800', 
                        medLabel: 'MED 3', 
                        subcourses: [
                            {id: 'm7c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'},
                            { id: 'm7_reprodutor', title: 'Sistema Reprodutor', type: 'M√≥dulo de Aulas', lessons: REPRODUTOR_LESSONS }
                        ],
                        problems: [
                            { id: 'm7_a1', title: 'APOSTILA SA√öDE REPRODUTIVA E PLAN', file: '/Tutoria/Resumos/M√≥dulo 7/1. APOSTILA SA√öDE REPRODUTIVA E PLAN.html', moduleRef: '7' },
                            { id: 'm7_a2', title: 'Apostila_Embriologia_e_Abortamento', file: '/Tutoria/Resumos/M√≥dulo 7/2. Apostila_Embriologia_e_Abortamento.html', moduleRef: '7' },
                            { id: 'm7_a3', title: 'Apostila_Pre_Natal_e_Parto', file: '/Tutoria/Resumos/M√≥dulo 7/3. Apostila_Pre_Natal_e_Parto.html', moduleRef: '7' },
                            { id: 'm7_a4', title: 'Apostila_Mecanismo_de_Parto', file: '/Tutoria/Resumos/M√≥dulo 7/4. Apostila_Mecanismo_de_Parto.html', moduleRef: '7' },
                            { id: 'm7_a5', title: 'Apostila_Puerperio_e_Lactacao', file: '/Tutoria/Resumos/M√≥dulo 7/5. Apostila_Puerperio_e_Lactacao.html', moduleRef: '7' }
                        ],
                        questions: []
                    },
                    { 
                        id: 'mod8', 
                        title: 'M√≥dulo 8 ‚Äî Crescimento e Desenvolvimento da Crian√ßa', 
                        color: 'from-amber-600 to-amber-800', 
                        medLabel: 'MED 3', 
                        subcourses: [{id: 'm8c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}],
                        problems: [
                            { id: 'm8_p1', title: 'Apostila Neonatologia - Sala de Parto', file: '/Tutoria/Resumos/M√≥dulo 8/1. Apostila_Neonatologia_Sala_de_Parto.html', moduleRef: '8' },
                            { id: 'm8_p2', title: 'Apostila Icter√≠cia e Imunologia', file: '/Tutoria/Resumos/M√≥dulo 8/2. Apostila_Ictericia_e_Imunologia.html', moduleRef: '8' },
                            { id: 'm8_p3', title: 'Apostila Nutri√ß√£o e Vacina√ß√£o', file: '/Tutoria/Resumos/M√≥dulo 8/3. Apostila_Nutricao_e_Vacinacao.html', moduleRef: '8' },
                            { id: 'm8_p4', title: 'Apostila Desenvolvimento Infantil', file: '/Tutoria/Resumos/M√≥dulo 8/4. Apostila_Desenvolvimento_Infantil.html', moduleRef: '8' },
                            { id: 'm8_p5', title: 'Apostila Obesidade e Puberdade', file: '/Tutoria/Resumos/M√≥dulo 8/5. Apostila_Obesidade_e_Puberdade.html', moduleRef: '8' },
                            { id: 'm8_p6', title: 'Apostila Hebiatria', file: '/Tutoria/Resumos/M√≥dulo 8/6. Apostila_Hebiatra.html', moduleRef: '8' }
                        ],
                        questions: []
                    },
                    { 
                        id: 'mod9', 
                        title: 'M√≥dulo 9 ‚Äî Vida Adulta e Processo de Envelhecimento', 
                        color: 'from-amber-600 to-amber-800', 
                        medLabel: 'MED 3', 
                        subcourses: [{id: 'm9c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}],
                        problems: [
                            { id: 'm9_p1', title: 'Apostila Envelhecimento', file: '/Tutoria/Resumos/M√≥dulo 9/1. Apostila_Envelhecimento.html', moduleRef: '9' },
                            { id: 'm9_p2', title: 'Apostila Neuro Osteo Geriatria', file: '/Tutoria/Resumos/M√≥dulo 9/2. Apostila_Neuro_Osteo_Geriatria.html', moduleRef: '9' },
                            { id: 'm9_p3', title: 'Apostila Iatrogenia e Rim Geri√°trico', file: '/Tutoria/Resumos/M√≥dulo 9/3. Apostila_Iatrogenia_e_Rim_Geriatrico.html', moduleRef: '9' },
                            { id: 'm9_p4', title: 'Apostila Manuten√ß√£o Sa√∫de Idoso', file: '/Tutoria/Resumos/M√≥dulo 9/4. Apostila_Manutencao_Saude_Idoso.html', moduleRef: '9' },
                            { id: 'm9_p5', title: 'Apostila Bio√©tica e Fisiopatologia Geri√°trica', file: '/Tutoria/Resumos/M√≥dulo 9/5. Apostila_Bioetica_e_Fisiopatologia_Geri.html', moduleRef: '9' }
                        ],
                        questions: []
                    },
                    { id: 'mod10', title: 'M√≥dulo 10 ‚Äî Percep√ß√£o, Consci√™ncia e Emo√ß√µes', color: 'from-amber-600 to-amber-800', medLabel: 'MED 4', subcourses: [{id: 'm10c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { id: 'mod11', title: 'M√≥dulo 11 ‚Äî Febre, Inflama√ß√£o e Infec√ß√£o', color: 'from-amber-600 to-amber-800', medLabel: 'MED 4', subcourses: [{id: 'm11c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { id: 'mod12', title: 'M√≥dulo 12 ‚Äî Fadiga, Perda de Peso e Anemias', color: 'from-amber-600 to-amber-800', medLabel: 'MED 4', subcourses: [{id: 'm12c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                ]
            },
            pbl_clinico: {
                title: "Tutoria ‚Äì Ciclo Cl√≠nico",
                icon: <Users size={20} />,
                subjects: [
                    { id: 'mod13', title: 'M√≥dulo 13 ‚Äî Dis√∫ria, Edema e Protein√∫ria', color: 'from-cyan-600 to-cyan-800', medLabel: 'MED 5', subcourses: [{id: 'm13c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { id: 'mod14', title: 'M√≥dulo 14 ‚Äî Perda de Sangue', color: 'from-cyan-600 to-cyan-800', medLabel: 'MED 5', subcourses: [{id: 'm14c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { id: 'mod15', title: 'M√≥dulo 15 ‚Äî Mente e Comportamento', color: 'from-cyan-600 to-cyan-800', medLabel: 'MED 5', subcourses: [{id: 'm15c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { id: 'mod16', title: 'M√≥dulo 16 ‚Äî Doen√ßas Prevalentes na Amaz√¥nia', color: 'from-cyan-600 to-cyan-800', medLabel: 'MED 6', subcourses: [{id: 'm16c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { id: 'mod17', title: 'M√≥dulo 17 ‚Äî Dor Abdominal, Diarreia, V√¥mito e Icter√≠cia', color: 'from-cyan-600 to-cyan-800', medLabel: 'MED 6', subcourses: [{id: 'm17c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { id: 'mod18', title: 'M√≥dulo 18 ‚Äî Sinais e Sintomas Dermatol√≥gicos', color: 'from-cyan-600 to-cyan-800', medLabel: 'MED 6', subcourses: [{id: 'm18c1', title: 'Conte√∫do do M√≥dulo', type: 'PBL'}], problems: [], questions: [] },
                    { 
                        id: 'more_clinico', 
                        title: 'Mais M√≥dulos em Breve...', 
                        color: 'from-slate-700 to-slate-800', 
                        isPlaceholder: true, 
                        subcourses: [],
                        problems: [], questions: []
                    },
                ]
            },
            pbl: {
                title: "PBL & Casos",
                icon: <Users size={20} />,
                subjects: [
                    {
                        id: 'skills', title: 'Habilidades M√©dicas', color: 'from-teal-500 to-teal-700',
                        subcourses: [ { id: 's1', title: 'Suturas', duration: 'Pr√°tica', type: 'Lab' } ], problems: [], questions: []
                    }
                ]
            },
            
            // --- NOVA ESTRUTURA PARA MORFO ---
            morfo_sections: [
                {
                    title: "MED 1",
                    subjects: [
                        { id: 'm1_anat', title: 'Anatomia', color: 'from-emerald-600 to-emerald-800', medLabel: 'MED 1' },
                        { id: 'm1_hist', title: 'Histologia', color: 'from-violet-600 to-violet-800', medLabel: 'MED 1' }
                    ]
                },
                {
                    title: "MED 2",
                    subjects: [
                        { id: 'm2_anat', title: 'Anatomia', color: 'from-emerald-600 to-emerald-800', medLabel: 'MED 2' },
                        { id: 'm2_hist', title: 'Histologia', color: 'from-violet-600 to-violet-800', medLabel: 'MED 2' }
                    ]
                },
                {
                    title: "MED 3",
                    subjects: [
                        { id: 'm3_anat', title: 'Anatomia', color: 'from-emerald-600 to-emerald-800', medLabel: 'MED 3' },
                        { id: 'm3_hist', title: 'Histofisiologia', color: 'from-violet-600 to-violet-800', medLabel: 'MED 3' }
                    ]
                },
                {
                    title: "MED 4",
                    subjects: [
                        { id: 'm4_anat', title: 'Anatomia', color: 'from-emerald-600 to-emerald-800', medLabel: 'MED 4' },
                        { id: 'm4_hist', title: 'Histologia', color: 'from-violet-600 to-violet-800', medLabel: 'MED 4' },
                        { id: 'm4_hem', title: 'Hematologia', color: 'from-red-600 to-red-800', medLabel: 'MED 4' },
                        { id: 'm4_micro', title: 'Microbiologia', color: 'from-yellow-600 to-yellow-800', medLabel: 'MED 4' },
                        { id: 'm4_para', title: 'Parasitologia', color: 'from-green-600 to-green-800', medLabel: 'MED 4' }
                    ]
                },
                {
                    title: "MED 5",
                    subjects: [
                        { id: 'm5_farm', title: 'Farmacologia', color: 'from-blue-600 to-blue-800', medLabel: 'MED 5' },
                        { id: 'm5_medlab', title: 'Medicina Laboratorial', color: 'from-cyan-600 to-cyan-800', medLabel: 'MED 5' }
                    ]
                },
                {
                    title: "MED 6",
                    subjects: [
                        { id: 'm6_farm', title: 'Farmacologia', color: 'from-blue-600 to-blue-800', medLabel: 'MED 6' }
                    ]
                },
                {
                    title: "MED 7 e MED 8",
                    subjects: [
                        { id: 'm78_const', title: 'Em constru√ß√£o', color: 'from-slate-700 to-slate-800', isPlaceholder: true }
                    ]
                }
            ]
        };

        // --- UTILS DE PESQUISA ---
        const searchDatabase = (query, dataObj) => {
            if (!query || query.length < 2) return [];
            const term = query.toLowerCase();
            let results = [];

            // Helper recursivo para buscar em subcourses profundos
            const traverse = (items, parentTitle) => {
                if (!items) return;
                items.forEach(item => {
                    const matchTitle = item.title && item.title.toLowerCase().includes(term);
                    
                    // Se encontrar um item que √© um Curso (tem lessons) ou M√≥dulo (tem subcourses)
                    if (matchTitle) {
                        const hasLessons = item.lessons && item.lessons.length > 0;
                        const hasSubcourses = item.subcourses && item.subcourses.length > 0;
                        
                        let action = 'module';
                        if (hasLessons) action = 'course';
                        else if (!hasSubcourses) action = 'link'; // placeholder ou item final sem a√ß√£o definida

                        results.push({
                            type: item.type || (hasLessons ? 'Curso' : 'M√≥dulo'),
                            title: item.title,
                            subtitle: parentTitle,
                            action: action,
                            data: item,
                            path: null
                        });
                    }

                    // Recurs√£o
                    if (item.subcourses) {
                        traverse(item.subcourses, item.title);
                    }
                    
                    // Check problems/questions inside items if applicable
                    if (item.problems) {
                        item.problems.forEach(prob => {
                            if (prob.title.toLowerCase().includes(term)) {
                                results.push({
                                    type: 'Resumo',
                                    title: prob.title,
                                    subtitle: item.title,
                                    action: 'link',
                                    path: prob.file,
                                    moduleId: item.id
                                });
                            }
                        });
                    }
                    if (item.questions) {
                        item.questions.forEach(quest => {
                            if (quest.title.toLowerCase().includes(term)) {
                                results.push({
                                    type: 'Quest√£o',
                                    title: quest.title,
                                    subtitle: item.title,
                                    action: 'link',
                                    path: quest.file,
                                    moduleId: item.id
                                });
                            }
                        });
                    }
                });
            };

            // Inicia a busca nas plataformas
            Object.values(dataObj).forEach(category => {
                // Se for a categoria "platforms", itera sobre cada plataforma
                if (category === dataObj.platforms) {
                    Object.values(category).forEach(platform => {
                        // Adiciona a pr√≥pria plataforma se der match
                        if (platform.title.toLowerCase().includes(term)) {
                            results.push({
                                type: 'Plataforma',
                                title: platform.title,
                                subtitle: 'Cursos Principais',
                                action: 'module',
                                data: platform
                            });
                        }
                        // Busca recursiva dentro da plataforma
                        if (platform.subcourses) {
                            traverse(platform.subcourses, platform.title);
                        }
                    });
                } 
                // Se for categoria normal (Ciclo B√°sico, etc)
                else if (category.subjects) {
                    traverse(category.subjects, category.title);
                }
            });

            return results;
        };

        // --- COMPONENTES ---

        const CourseCard = ({ subject, onClick }) => (
            <div 
                onClick={() => onClick(subject)}
                data-title={subject.title}
                data-module={subject.id}
                className={`flex-shrink-0 w-52 h-32 mr-3 rounded-lg cursor-pointer relative overflow-hidden group transition-all duration-300 hover:scale-[1.03] hover:shadow-lg shadow-black/50 ${subject.isPlaceholder ? 'border-2 border-dashed border-slate-700' : ''}`}
            >
                {/* Background */}
                {subject.image ? (
                    <div className="absolute inset-0">
                        <img src={subject.image} alt="" className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
                        <div className="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent"></div>
                    </div>
                ) : (
                    <div className={`absolute inset-0 bg-gradient-to-br ${subject.color || 'from-slate-700 to-slate-800'} opacity-100`}></div>
                )}
                
                {/* Textura sutil para cards sem imagem */}
                {!subject.isPlaceholder && !subject.image && (
                    <div className="absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-white to-transparent"></div>
                )}

                {/* Tag MED (Se existir) */}
                {subject.medLabel && (
                    <div className="absolute top-2 right-2 z-20">
                        <span className="text-[9px] font-bold text-white bg-blue-600/80 px-2 py-0.5 rounded backdrop-blur-sm border border-white/10 shadow-sm">
                            {subject.medLabel}
                        </span>
                    </div>
                )}

                {/* Conte√∫do: Apenas T√≠tulo na parte inferior */}
                <div className="absolute inset-0 p-4 flex flex-col justify-end z-10">
                    {subject.isPlaceholder ? (
                        <div className="flex flex-col items-center justify-center h-full text-slate-500">
                            <PlusCircle size={24} className="mb-2" />
                            <span className="text-xs font-medium text-center">Adicionar</span>
                        </div>
                    ) : (
                        // Conditional rendering: Show title only if NO image
                        !subject.image && (
                            <h3 className="text-sm font-bold text-white leading-tight drop-shadow-md group-hover:text-slate-100">
                                {subject.title}
                            </h3>
                        )
                    )}
                </div>
            </div>
        );

        const CarouselSection = ({ title, icon, subjects, onSubjectClick }) => {
            const scrollRef = useRef(null);
            
            const scroll = (direction) => {
                if (scrollRef.current) {
                    const scrollAmount = 300;
                    scrollRef.current.scrollBy({ left: direction === 'left' ? -scrollAmount : scrollAmount, behavior: 'smooth' });
                }
            };

            return (
                <div className="mb-10 group/carousel relative" data-section={title}>
                    <div className="flex items-center justify-between mb-4 px-2">
                        <div className="flex items-center gap-3">
                            {icon && (
                                <div className="w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center border border-slate-700 shadow-lg">
                                    <span className="text-blue-500">
                                        {React.cloneElement(icon, { size: 22 })}
                                    </span>
                                </div>
                            )}
                            <h2 className="text-xl font-bold text-slate-100 group-hover/carousel:text-white transition-colors cursor-pointer">
                                {title}
                            </h2>
                        </div>
                        
                        <div className="flex gap-2">
                            <button onClick={() => scroll('left')} className="p-2 rounded-full bg-slate-800 hover:bg-slate-700 text-slate-300 transition-colors"><ChevronLeft size={16} /></button>
                            <button onClick={() => scroll('right')} className="p-2 rounded-full bg-slate-800 hover:bg-slate-700 text-slate-300 transition-colors"><ChevronRight size={16} /></button>
                        </div>
                    </div>
                    
                    <div 
                        ref={scrollRef} 
                        className="flex gap-2 overflow-x-auto pb-4 scrollbar-hide scroll-smooth px-1"
                        style={{ scrollbarWidth: 'none' }}
                    >
                        {subjects.map((subject) => (
                            <CourseCard key={subject.id} subject={subject} onClick={onSubjectClick} />
                        ))}
                        <div className="w-4 flex-shrink-0" />
                    </div>
                </div>
            );
        };

        const CoursePlayer = ({ course, onBack, currentLessonIndex, setCurrentLessonIndex, parentTitle = "SanarFlix" }) => {
            const currentLesson = course.lessons[currentLessonIndex];
            const hasNextLesson = currentLessonIndex < course.lessons.length - 1;

            const handleNext = () => {
                if (hasNextLesson) {
                    setCurrentLessonIndex(prev => prev + 1);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            };

            return (
                <div className="animate-fade-in pb-20">
                     <div className="mb-6 flex items-center gap-2 text-sm text-slate-400">
                        <span className="cursor-pointer hover:text-white" onClick={onBack}>{parentTitle}</span>
                        <ChevronRight size={14} />
                        <span className="text-white font-medium truncate">{course.title}</span>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2 space-y-4">
                            <div className="w-full aspect-video bg-black rounded-2xl overflow-hidden shadow-2xl border border-slate-800">
                                <iframe 
                                    className="w-full h-full"
                                    src={`https://www.youtube.com/embed/${currentLesson.videoId}?rel=0`}
                                    title={currentLesson.title}
                                    frameBorder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowFullScreen
                                ></iframe>
                            </div>
                            
                            <div className="flex justify-between items-start">
                                <div>
                                    {/* Exibir Se√ß√£o se existir */}
                                    {currentLesson.section && (
                                        <span className="text-blue-400 text-xs font-bold uppercase tracking-wider mb-1 block">
                                            {currentLesson.section}
                                        </span>
                                    )}
                                    <h1 className="text-2xl font-bold text-white mb-2">{currentLesson.title}</h1>
                                    <p className="text-slate-400 text-sm">Aula {currentLessonIndex + 1} de {course.lessons.length}</p>
                                </div>
                                {hasNextLesson && (
                                    <button 
                                        onClick={handleNext}
                                        className="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full font-bold transition-all hover:scale-105 shadow-lg shadow-blue-900/50"
                                    >
                                        Pr√≥xima Aula <ChevronRight size={18} />
                                    </button>
                                )}
                            </div>
                        </div>

                        <div className="bg-slate-800/50 border border-slate-700 rounded-2xl overflow-hidden h-fit max-h-[calc(100vh-150px)] flex flex-col">
                            <div className="p-4 border-b border-slate-700 bg-slate-800">
                                <h3 className="font-bold text-white flex items-center gap-2">
                                    <ListVideo size={18} className="text-blue-500" />
                                    Conte√∫do do M√≥dulo
                                </h3>
                                <div className="w-full bg-slate-700 h-1.5 mt-3 rounded-full overflow-hidden">
                                    <div 
                                        className="bg-blue-500 h-full rounded-full transition-all duration-500"
                                        style={{ width: `${((currentLessonIndex + 1) / course.lessons.length) * 100}%` }}
                                    ></div>
                                </div>
                                <p className="text-xs text-slate-400 mt-1 text-right">{Math.round(((currentLessonIndex + 1) / course.lessons.length) * 100)}% Conclu√≠do</p>
                            </div>
                            
                            <div className="overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent flex-1 relative">
                                {course.lessons.map((lesson, idx) => {
                                    const isActive = idx === currentLessonIndex;
                                    const isCompleted = idx < currentLessonIndex;
                                    
                                    // Verifica mudan√ßa de se√ß√£o para renderizar cabe√ßalho
                                    const prevLesson = course.lessons[idx - 1];
                                    const showSectionHeader = lesson.section && (!prevLesson || prevLesson.section !== lesson.section);

                                    return (
                                        <React.Fragment key={idx}>
                                            {showSectionHeader && (
                                                <div className="px-3 py-2 mt-2 mb-1 bg-slate-900/60 text-[10px] font-bold text-slate-400 uppercase tracking-wider rounded border border-slate-800/50 backdrop-blur-sm sticky top-0 z-10 shadow-sm">
                                                    {lesson.section}
                                                </div>
                                            )}
                                            <div 
                                                onClick={() => setCurrentLessonIndex(idx)}
                                                className={`p-3 rounded-xl mb-1 cursor-pointer transition-all flex items-start gap-3 group ${isActive ? 'bg-blue-600/20 border border-blue-500/50' : 'hover:bg-slate-700/50 border border-transparent'}`}
                                            >
                                                <div className="mt-1">
                                                    {isActive ? (
                                                        <div className="w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center shadow-lg shadow-blue-500/50">
                                                            <Play size={10} className="text-white ml-0.5" fill="currentColor" />
                                                        </div>
                                                    ) : isCompleted ? (
                                                        <CheckCircle2 size={20} className="text-green-500" />
                                                    ) : (
                                                        <div className="w-5 h-5 rounded-full border-2 border-slate-600 flex items-center justify-center text-[10px] text-slate-500 font-bold group-hover:border-slate-400 group-hover:text-slate-400">
                                                            {idx + 1}
                                                        </div>
                                                    )}
                                                </div>
                                                <div className="flex-1">
                                                    <h4 className={`text-sm font-medium leading-tight ${isActive ? 'text-blue-100' : 'text-slate-400 group-hover:text-slate-200'}`}>
                                                        {lesson.title}
                                                    </h4>
                                                    <span className="text-[10px] text-slate-600 mt-1 block">V√≠deo Aula</span>
                                                </div>
                                            </div>
                                        </React.Fragment>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        const PlatformBanner = ({ title, subtitle, color, icon, theme, image, onClick }) => {
            let styles = {
                gradient: 'from-emerald-700 via-emerald-800 to-emerald-950',
                border: 'border-emerald-500/20 hover:border-emerald-500/50',
                glow: 'bg-emerald-600/20',
                iconBg: 'text-emerald-700',
                shadow: 'shadow-emerald-900/50',
                text: 'text-emerald-200',
                btnHover: 'hover:text-emerald-700'
            };

            if (theme === 'red') {
                styles = {
                    gradient: 'from-red-700 via-red-800 to-red-950',
                    border: 'border-red-500/20 hover:border-red-500/50',
                    glow: 'bg-red-600/20',
                    iconBg: 'text-red-700',
                    shadow: 'shadow-red-900/50',
                    text: 'text-red-200',
                    btnHover: 'hover:text-red-700'
                };
            } else if (theme === 'yellow') {
                styles = {
                    gradient: 'from-yellow-600 via-yellow-700 to-yellow-900',
                    border: 'border-yellow-500/20 hover:border-yellow-500/50',
                    glow: 'bg-yellow-500/20',
                    iconBg: 'text-yellow-700',
                    shadow: 'shadow-yellow-900/50',
                    text: 'text-yellow-100',
                    btnHover: 'hover:text-yellow-700'
                };
            } else if (theme === 'teal_blue') {
                 styles = {
                    gradient: 'from-teal-600 via-cyan-700 to-blue-900',
                    border: 'border-cyan-500/20 hover:border-cyan-500/50',
                    glow: 'bg-cyan-500/20',
                    iconBg: 'text-cyan-600',
                    shadow: 'shadow-cyan-900/50',
                    text: 'text-cyan-100',
                    btnHover: 'hover:text-cyan-600'
                };
            }

            return (
                <div 
                    onClick={onClick}
                    className={`w-full h-64 bg-gradient-to-br ${styles.gradient} ${styles.border} rounded-2xl relative overflow-hidden cursor-pointer group shadow-2xl shadow-black/50 border transition-all hover:scale-[1.01]`}
                >
                     {image ? (
                        <div className="absolute inset-0">
                            <img 
                                src={image} 
                                alt={title} 
                                className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" 
                                style={{ objectPosition: 'center' }}
                            />
                        </div>
                     ) : (
                         <>
                             <div className={`absolute top-0 right-0 w-[400px] h-[400px] ${styles.glow} rounded-full blur-[100px] -translate-y-1/2 translate-x-1/4`}></div>
                             <div className="absolute bottom-0 left-0 w-[200px] h-[200px] bg-black/40 rounded-full blur-[60px] translate-y-1/4 -translate-x-1/4"></div>
                             <div className="absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[size:40px_40px]"></div>
                         </>
                     )}

                     <div className="absolute inset-0 flex flex-col justify-end p-8 relative z-10">
                        {!image && (
                            <div className="flex items-center gap-4 mb-3">
                                <div className={`p-3 bg-white ${styles.iconBg} rounded-xl shadow-lg ${styles.shadow} group-hover:scale-110 transition-transform duration-300`}>
                                    {icon}
                                </div>
                                <div>
                                    <span className={`${styles.text} font-bold tracking-widest text-xs uppercase mb-1 block`}>{subtitle}</span>
                                    <h3 className="text-2xl md:text-3xl font-bold text-white tracking-tight">{title}</h3>
                                </div>
                            </div>
                        )}
                        
                        <div className="flex justify-between items-end mt-4">
                            <div className="w-full">
                                <button className={`flex items-center gap-2 bg-white/10 hover:bg-white text-white ${styles.btnHover} px-5 py-2.5 rounded-full font-bold text-sm transition-all backdrop-blur-md border border-white/20 group-hover:border-white w-fit`}>
                                    Acessar <ChevronRight size={16} />
                                </button>
                            </div>
                        </div>
                     </div>
                </div>
            );
        };
        
        const PlatformSection = ({ title, subtitle, subjects, theme, onSubjectClick }) => {
            let styles = {
                gradient: 'from-emerald-900 to-emerald-950 border-emerald-800/50',
                iconBg: 'bg-emerald-600 shadow-emerald-900/50',
                subTextColor: 'text-emerald-200',
                cardHover: 'hover:bg-emerald-600 hover:border-emerald-500 hover:shadow-emerald-900/50',
                iconColor: 'text-emerald-500',
                glow: 'bg-emerald-600/10'
            };

            if (theme === 'red') {
                styles = {
                    gradient: 'from-red-900 to-red-950 border-red-800/50',
                    iconBg: 'bg-red-600 shadow-red-900/50',
                    subTextColor: 'text-red-200',
                    cardHover: 'hover:bg-red-600 hover:border-red-500 hover:shadow-red-900/50',
                    iconColor: 'text-red-500',
                    glow: 'bg-red-600/10'
                };
            } else if (theme === 'yellow') {
                 styles = {
                    gradient: 'from-yellow-900 to-yellow-950 border-yellow-800/50',
                    iconBg: 'bg-yellow-600 shadow-yellow-900/50',
                    subTextColor: 'text-yellow-200',
                    cardHover: 'hover:bg-yellow-600 hover:border-yellow-500 hover:shadow-yellow-900/50',
                    iconColor: 'text-yellow-500',
                    glow: 'bg-yellow-600/10'
                };
            } else if (theme === 'teal_blue') {
                styles = {
                    gradient: 'from-teal-900 via-cyan-900 to-blue-950 border-cyan-800/50',
                    iconBg: 'bg-cyan-600 shadow-cyan-900/50',
                    subTextColor: 'text-cyan-200',
                    cardHover: 'hover:bg-cyan-700 hover:border-cyan-500 hover:shadow-cyan-900/50',
                    iconColor: 'text-cyan-400',
                    glow: 'bg-cyan-600/10'
                };
            }

            return (
                <div className={`w-full bg-gradient-to-br ${styles.gradient} rounded-2xl p-6 md:p-8 mb-12 shadow-2xl border relative overflow-hidden`}>
                     <div className={`absolute top-0 right-0 w-96 h-96 ${styles.glow} rounded-full blur-3xl -translate-y-1/2 translate-x-1/2`}></div>

                     <div className="flex items-center gap-4 mb-6 relative z-10">
                        <div className={`p-3 ${styles.iconBg} rounded-xl text-white shadow-lg`}>
                            {theme === 'red' ? <Play size={28} fill="currentColor" /> : theme === 'yellow' ? <BookOpen size={28} /> : <Stethoscope size={28} />}
                        </div>
                        <div>
                            <h2 className="text-3xl font-bold text-white tracking-tight">{subtitle}</h2>
                            <p className={`${styles.subTextColor} font-medium`}>{title}</p>
                        </div>
                    </div>

                    <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 relative z-10">
                        {subjects.map((subject) => {
                            const hasLessons = subject.lessons && subject.lessons.length > 0;
                            // Check if it's a 'folder' type (has subcourses but no lessons directly)
                            const isFolder = subject.subcourses && subject.subcourses.length > 0;
                            
                            return (
                                <div 
                                    key={subject.id} 
                                    onClick={() => onSubjectClick(subject)}
                                    className={`bg-white/5 border border-white/10 rounded-xl p-4 cursor-pointer transition-all duration-300 group flex flex-col justify-between h-32 hover:-translate-y-1 hover:shadow-xl ${styles.cardHover}`}
                                >
                                    <h3 className="text-sm font-semibold text-white/90 group-hover:text-white line-clamp-3">{subject.title}</h3>
                                    <div className="flex justify-between items-end mt-2">
                                        <span className="text-[10px] uppercase tracking-wider text-white/40 group-hover:text-white/80 font-bold">
                                            {subject.duration || (isFolder ? 'M√≥dulos' : '')}
                                        </span>
                                        {hasLessons ? (
                                             <PlayCircle size={16} className={`${styles.iconColor} group-hover:text-white transition-colors`} />
                                        ) : isFolder ? (
                                            <FolderOpen size={16} className={`${styles.iconColor} group-hover:text-white transition-colors`} />
                                        ) : (
                                             <Lock size={14} className="text-slate-500 group-hover:text-white/50" />
                                        )}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        };

        // --- NOVO COMPONENTE: MEDCURSO SECTION (NETFLIX STYLE) ---
        const MedcursoSection = ({ onSubjectClick, subjects }) => {
            const [searchTerm, setSearchTerm] = useState('');
            const scrollRef1 = useRef(null);
            const scrollRef2 = useRef(null);
            const scrollRef3 = useRef(null);
            
            const filteredSubjects = subjects.filter(subject => 
                subject.title.toLowerCase().includes(searchTerm.toLowerCase())
            );

            const scroll = (ref, direction) => {
                if (ref.current) {
                    const scrollAmount = 600;
                    ref.current.scrollBy({ left: direction === 'left' ? -scrollAmount : scrollAmount, behavior: 'smooth' });
                }
            };

            const mainSpecialties = subjects.slice(0, 6);
            const clinicalSpecialties = subjects.slice(6);

            const MedCard = ({ subject }) => {
                const isFolder = subject.subcourses && subject.subcourses.length > 0;
                return (
                    <div 
                        onClick={() => onSubjectClick(subject)}
                        className="flex-shrink-0 w-[280px] h-[150px] relative rounded-lg cursor-pointer overflow-hidden group transition-all duration-300 hover:scale-105 hover:z-10 hover:shadow-2xl hover:shadow-yellow-900/40 border border-slate-700/50 hover:border-yellow-500"
                    >
                        <div className="absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-[#2a1a0a] group-hover:from-yellow-950 group-hover:via-yellow-900 group-hover:to-yellow-800 transition-colors duration-500"></div>
                        <div className="absolute inset-0 opacity-20 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-yellow-500/20 to-transparent"></div>
                        
                        <div className="absolute -right-4 -bottom-4 text-white/5 group-hover:text-white/10 transition-colors transform rotate-12">
                            <BookOpen size={100} />
                        </div>

                        <div className="absolute inset-0 p-5 flex flex-col justify-between z-10">
                            <h3 className="text-xl font-bold text-slate-100 leading-snug line-clamp-2 group-hover:text-white drop-shadow-md">
                                {subject.title}
                            </h3>
                            <div className="flex items-center justify-between mt-auto">
                                <div className="flex items-center gap-2">
                                    <span className="text-[10px] font-bold tracking-wider uppercase text-yellow-500/80 bg-black/30 px-2 py-1 rounded border border-yellow-500/20 group-hover:bg-yellow-500/20 group-hover:text-yellow-200 transition-colors">
                                        MEDCURSO
                                    </span>
                                </div>
                                {isFolder ? (
                                    <FolderOpen size={20} className="text-yellow-500 group-hover:text-white transition-colors drop-shadow-lg" />
                                ) : (
                                    <Lock size={16} className="text-slate-600 group-hover:text-yellow-200" />
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            const CarouselRow = ({ title, items, scrollRef }) => (
                <div className="mb-10 group/row">
                    <div className="flex items-center justify-between mb-3 px-2">
                        <h3 className="text-lg font-bold text-slate-100 flex items-center gap-2">
                            {title} <ChevronRight size={16} className="text-slate-500" />
                        </h3>
                    </div>
                    <div className="relative">
                        <button onClick={() => scroll(scrollRef, 'left')} className="absolute left-0 top-0 bottom-0 w-12 bg-gradient-to-r from-black/80 to-transparent z-20 flex items-center justify-center opacity-0 group-hover/row:opacity-100 transition-opacity duration-300 hover:bg-black/60 text-white">
                            <ChevronLeft size={32} />
                        </button>
                        <div ref={scrollRef} className="flex gap-4 overflow-x-auto pb-4 scrollbar-hide scroll-smooth px-2" style={{ scrollbarWidth: 'none' }}>
                            {items.map((subject) => (
                                <MedCard key={subject.id} subject={subject} />
                            ))}
                            <div className="w-8 flex-shrink-0" />
                        </div>
                        <button onClick={() => scroll(scrollRef, 'right')} className="absolute right-0 top-0 bottom-0 w-12 bg-gradient-to-l from-black/80 to-transparent z-20 flex items-center justify-center opacity-0 group-hover/row:opacity-100 transition-opacity duration-300 hover:bg-black/60 text-white">
                            <ChevronRight size={32} />
                        </button>
                    </div>
                </div>
            );

             return (
                <div className="animate-fade-in -mt-4">
                    <div className="mb-8 p-6 rounded-2xl bg-gradient-to-r from-yellow-900 to-black border border-yellow-900/30 flex flex-col md:flex-row md:items-center justify-between gap-4 shadow-2xl">
                        <div className="flex items-center gap-4">
                            <div className="relative w-full h-40 md:h-32 rounded-xl overflow-hidden shadow-lg border border-yellow-500/20">
                                <img src="Cursos/MEDCURSO/medcurso.png" className="w-full h-full object-cover" alt="MEDCURSO" />
                                <div className="absolute inset-0 bg-gradient-to-r from-black/60 to-transparent"></div>
                                <div className="absolute bottom-4 left-4">
                                     <button className="flex items-center gap-2 bg-white/10 hover:bg-white text-white hover:text-yellow-700 px-5 py-2.5 rounded-full font-bold text-sm transition-all backdrop-blur-md border border-white/20 group-hover:border-white w-fit">
                                        Acessar <ChevronRight size={16} />
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div className="relative w-full md:w-96 group mt-4 md:mt-0">
                            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-yellow-200/50 group-focus-within:text-yellow-400 transition-colors" size={18} />
                            <input type="text" placeholder="Buscar especialidades (Ex: Pediatria)..." className="w-full bg-black/40 border border-yellow-500/30 rounded-full py-2.5 pl-10 pr-10 text-sm text-yellow-100 placeholder-yellow-200/30 focus:outline-none focus:border-yellow-500/60 focus:bg-black/60 transition-all shadow-inner" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />
                            {searchTerm && (
                                <button onClick={() => setSearchTerm('')} className="absolute right-3 top-1/2 -translate-y-1/2 text-yellow-200/50 hover:text-white transition-colors">
                                    <X size={16} />
                                </button>
                            )}
                        </div>
                    </div>
                    {searchTerm ? (
                        <div className="animate-fade-in px-2">
                            <h3 className="text-lg font-bold text-slate-100 mb-6 flex items-center gap-2">
                                <Search size={20} className="text-yellow-500" />
                                Resultados para "{searchTerm}"
                                <span className="text-slate-500 text-sm font-normal ml-2">({filteredSubjects.length} encontrados)</span>
                            </h3>
                            {filteredSubjects.length > 0 ? (
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                                    {filteredSubjects.map(subject => (
                                        <MedCard key={subject.id} subject={subject} />
                                    ))}
                                </div>
                            ) : (
                                <div className="flex flex-col items-center justify-center py-20 text-center border border-dashed border-slate-800 rounded-2xl bg-slate-900/30">
                                    <Search size={48} className="text-slate-700 mb-4" />
                                    <p className="text-slate-400 font-medium text-lg">Nenhuma especialidade encontrada.</p>
                                    <p className="text-slate-600 text-sm">Tente buscar por outro termo.</p>
                                </div>
                            )}
                        </div>
                    ) : (
                        <>
                            <CarouselRow title="Grandes √Åreas" items={mainSpecialties} scrollRef={scrollRef1} />
                            <CarouselRow title="Especialidades Cl√≠nicas" items={clinicalSpecialties} scrollRef={scrollRef2} />
                            <CarouselRow title="Todas as Mat√©rias" items={subjects} scrollRef={scrollRef3} />
                        </>
                    )}
                </div>
            );
        };

        // --- NOVO COMPONENTE: ESTRAT√âGIA SECTION ---
        const EstrategiaSection = ({ onSubjectClick, subjects }) => {
            const [searchTerm, setSearchTerm] = useState('');
            const scrollRef1 = useRef(null);
            const scrollRef2 = useRef(null);
            const scrollRef3 = useRef(null);
            const scrollRef4 = useRef(null);
            const scrollRef5 = useRef(null);

            const filteredSubjects = subjects.filter(subject => 
                subject.title.toLowerCase().includes(searchTerm.toLowerCase())
            );

            const scroll = (ref, direction) => {
                if (ref.current) {
                    const scrollAmount = 600;
                    ref.current.scrollBy({ left: direction === 'left' ? -scrollAmount : scrollAmount, behavior: 'smooth' });
                }
            };

            // Categorias Filtradas
            const atualizacoes = subjects.filter(s => s.category === 'atualizacoes');
            const cronograma = subjects.filter(s => s.category === 'cronograma');
            const multimidia = subjects.filter(s => s.category === 'multimidia');
            const extensivo = subjects.filter(s => s.category === 'extensivo');
            const resumos = subjects.filter(s => s.category === 'resumos');

            const StratCard = ({ subject }) => {
                const isFolder = subject.subcourses && subject.subcourses.length > 0;
                return (
                    <div 
                        onClick={() => onSubjectClick(subject)}
                        className="flex-shrink-0 w-[280px] h-[150px] relative rounded-lg cursor-pointer overflow-hidden group transition-all duration-300 hover:scale-105 hover:z-10 hover:shadow-2xl hover:shadow-cyan-900/40 border border-slate-700/50 hover:border-cyan-500"
                    >
                        <div className="absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-[#0a2a2a] group-hover:from-teal-950 group-hover:via-cyan-900 group-hover:to-blue-900 transition-colors duration-500"></div>
                        <div className="absolute inset-0 opacity-20 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-cyan-500/20 to-transparent"></div>
                        
                        <div className="absolute -right-4 -bottom-4 text-white/5 group-hover:text-white/10 transition-colors transform rotate-12">
                            <Brain size={100} />
                        </div>

                        <div className="absolute inset-0 p-5 flex flex-col justify-between z-10">
                            <h3 className="text-base font-bold text-slate-100 leading-snug line-clamp-3 group-hover:text-white drop-shadow-md">
                                {subject.title}
                            </h3>
                            <div className="flex items-center justify-between mt-auto">
                                <div className="flex items-center gap-2">
                                    <span className="text-[9px] font-bold tracking-wider uppercase text-cyan-500/80 bg-black/30 px-2 py-1 rounded border border-cyan-500/20 group-hover:bg-cyan-500/20 group-hover:text-cyan-200 transition-colors">
                                        {subject.type || 'AULA'}
                                    </span>
                                </div>
                                <div className="flex items-center gap-2">
                                    <Lock size={16} className="text-slate-600 group-hover:text-cyan-200" />
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const CarouselRow = ({ title, items, scrollRef }) => {
                if (!items || items.length === 0) return null;
                return (
                    <div className="mb-10 group/row">
                        <div className="flex items-center justify-between mb-3 px-2">
                            <h3 className="text-lg font-bold text-slate-100 flex items-center gap-2">
                                {title} <ChevronRight size={16} className="text-slate-500" />
                            </h3>
                        </div>
                        <div className="relative">
                            <button onClick={() => scroll(scrollRef, 'left')} className="absolute left-0 top-0 bottom-0 w-12 bg-gradient-to-r from-black/80 to-transparent z-20 flex items-center justify-center opacity-0 group-hover/row:opacity-100 transition-opacity duration-300 hover:bg-black/60 text-white">
                                <ChevronLeft size={32} />
                            </button>
                            <div ref={scrollRef} className="flex gap-4 overflow-x-auto pb-4 scrollbar-hide scroll-smooth px-2" style={{ scrollbarWidth: 'none' }}>
                                {items.map((subject) => (
                                    <StratCard key={subject.id} subject={subject} />
                                ))}
                                <div className="w-8 flex-shrink-0" />
                            </div>
                            <button onClick={() => scroll(scrollRef, 'right')} className="absolute right-0 top-0 bottom-0 w-12 bg-gradient-to-l from-black/80 to-transparent z-20 flex items-center justify-center opacity-0 group-hover/row:opacity-100 transition-opacity duration-300 hover:bg-black/60 text-white">
                                <ChevronRight size={32} />
                            </button>
                        </div>
                    </div>
                );
            };

            return (
                <div className="animate-fade-in -mt-4">
                    {/* Banner Principal Estrat√©gia */}
                    <div className="mb-8 p-6 rounded-2xl bg-gradient-to-r from-teal-900 via-cyan-900 to-blue-950 border border-cyan-900/30 flex flex-col md:flex-row md:items-center justify-between gap-4 shadow-2xl">
                        <div className="flex items-center gap-4">
                            <div className="relative w-full h-40 md:h-32 rounded-xl overflow-hidden shadow-lg border border-cyan-500/20">
                                <img src="Cursos/Estrat√©gia MED/logo.png" className="w-full h-full object-cover" alt="Estrat√©gia MED" />
                                <div className="absolute inset-0 bg-gradient-to-r from-black/60 to-transparent"></div>
                                <div className="absolute bottom-4 left-4">
                                     <button className="flex items-center gap-2 bg-white/10 hover:bg-white text-white hover:text-cyan-400 px-5 py-2.5 rounded-full font-bold text-sm transition-all backdrop-blur-md border border-white/20 group-hover:border-white w-fit">
                                        Acessar <ChevronRight size={16} />
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div className="relative w-full md:w-96 group mt-4 md:mt-0">
                            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-cyan-200/50 group-focus-within:text-cyan-400 transition-colors" size={18} />
                            <input 
                                type="text" 
                                placeholder="Buscar no Estrat√©gia MED..." 
                                className="w-full bg-black/40 border border-cyan-500/30 rounded-full py-2.5 pl-10 pr-10 text-sm text-cyan-100 placeholder-cyan-200/30 focus:outline-none focus:border-cyan-500/60 focus:bg-black/60 transition-all shadow-inner" 
                                value={searchTerm} 
                                onChange={(e) => setSearchTerm(e.target.value)} 
                            />
                            {searchTerm && (
                                <button onClick={() => setSearchTerm('')} className="absolute right-3 top-1/2 -translate-y-1/2 text-cyan-200/50 hover:text-white transition-colors">
                                    <X size={16} />
                                </button>
                            )}
                        </div>
                    </div>

                    {searchTerm ? (
                        <div className="animate-fade-in px-2">
                            <h3 className="text-lg font-bold text-slate-100 mb-6 flex items-center gap-2">
                                <Search size={20} className="text-cyan-500" />
                                Resultados para "{searchTerm}"
                                <span className="text-slate-500 text-sm font-normal ml-2">({filteredSubjects.length} encontrados)</span>
                            </h3>
                            {filteredSubjects.length > 0 ? (
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                                    {filteredSubjects.map(subject => (
                                        <StratCard key={subject.id} subject={subject} />
                                    ))}
                                </div>
                            ) : (
                                <div className="flex flex-col items-center justify-center py-20 text-center border border-dashed border-slate-800 rounded-2xl bg-slate-900/30">
                                    <Search size={48} className="text-slate-700 mb-4" />
                                    <p className="text-slate-400 font-medium text-lg">Nenhum conte√∫do encontrado.</p>
                                    <p className="text-slate-600 text-sm">Tente buscar por outro termo.</p>
                                </div>
                            )}
                        </div>
                    ) : (
                        <>
                            <CarouselRow title="Atualiza√ß√µes e Modifica√ß√µes 2024" items={atualizacoes} scrollRef={scrollRef1} />
                            <CarouselRow title="Cronogramas e Guias" items={cronograma} scrollRef={scrollRef2} />
                            <CarouselRow title="Multim√≠dia, B√¥nus e Simulados" items={multimidia} scrollRef={scrollRef3} />
                            <CarouselRow title="Extensivo (Curso Principal)" items={extensivo} scrollRef={scrollRef4} />
                            <CarouselRow title="Todos os Resumos" items={resumos} scrollRef={scrollRef5} />
                        </>
                    )}
                </div>
            );
        };

        const SanarflixSection = ({ onSubjectClick, subjects }) => {
            const [searchTerm, setSearchTerm] = useState('');
            const scrollRef1 = useRef(null);
            const scrollRef2 = useRef(null);
            const scrollRef3 = useRef(null);

            const filteredSubjects = subjects.filter(subject => 
                subject.title.toLowerCase().includes(searchTerm.toLowerCase())
            );

            const scroll = (ref, direction) => {
                if (ref.current) {
                    const scrollAmount = 600;
                    ref.current.scrollBy({ left: direction === 'left' ? -scrollAmount : scrollAmount, behavior: 'smooth' });
                }
            };

            const featuredCourses = subjects.slice(0, 8);
            const newCourses = subjects.slice(8, 16);
            const allCourses = subjects.slice(16);

            const SanarCard = ({ subject }) => {
                const hasLessons = subject.lessons && subject.lessons.length > 0;
                return (
                    <div 
                        onClick={() => onSubjectClick(subject)}
                        className="flex-shrink-0 w-[280px] h-[150px] relative rounded-lg cursor-pointer overflow-hidden group transition-all duration-300 hover:scale-105 hover:z-10 hover:shadow-2xl hover:shadow-red-900/40 border border-slate-700/50 hover:border-red-500"
                    >
                        <div className="absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-[#2a0a0a] group-hover:from-red-950 group-hover:via-red-900 group-hover:to-red-800 transition-colors duration-500"></div>
                        <div className="absolute inset-0 opacity-20 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-red-500/20 to-transparent"></div>
                        <div className="absolute inset-0 p-5 flex flex-col justify-between z-10">
                            <h3 className="text-base font-bold text-slate-100 leading-snug line-clamp-2 group-hover:text-white drop-shadow-md">
                                {subject.title}
                            </h3>
                            <div className="flex items-center justify-between mt-auto">
                                <div className="flex items-center gap-2">
                                    <span className="text-[10px] font-bold tracking-wider uppercase text-slate-400 bg-black/30 px-2 py-1 rounded border border-white/10 group-hover:bg-white/20 group-hover:text-white transition-colors">
                                        {subject.duration || 'CURSO'}
                                    </span>
                                </div>
                                {hasLessons ? (
                                    <PlayCircle size={20} className="text-red-500 group-hover:text-white transition-colors drop-shadow-lg" />
                                ) : (
                                    <Lock size={16} className="text-slate-600 group-hover:text-red-200" />
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            const CarouselRow = ({ title, items, scrollRef }) => (
                <div className="mb-10 group/row">
                    <div className="flex items-center justify-between mb-3 px-2">
                        <h3 className="text-lg font-bold text-slate-100 flex items-center gap-2">
                            {title} <ChevronRight size={16} className="text-slate-500" />
                        </h3>
                    </div>
                    <div className="relative">
                        <button onClick={() => scroll(scrollRef, 'left')} className="absolute left-0 top-0 bottom-0 w-12 bg-gradient-to-r from-black/80 to-transparent z-20 flex items-center justify-center opacity-0 group-hover/row:opacity-100 transition-opacity duration-300 hover:bg-black/60 text-white">
                            <ChevronLeft size={32} />
                        </button>
                        <div ref={scrollRef} className="flex gap-4 overflow-x-auto pb-4 scrollbar-hide scroll-smooth px-2" style={{ scrollbarWidth: 'none' }}>
                            {items.map((subject) => (
                                <SanarCard key={subject.id} subject={subject} />
                            ))}
                            <div className="w-8 flex-shrink-0" />
                        </div>
                        <button onClick={() => scroll(scrollRef, 'right')} className="absolute right-0 top-0 bottom-0 w-12 bg-gradient-to-l from-black/80 to-transparent z-20 flex items-center justify-center opacity-0 group-hover/row:opacity-100 transition-opacity duration-300 hover:bg-black/60 text-white">
                            <ChevronRight size={32} />
                        </button>
                    </div>
                </div>
            );

            return (
                <div className="animate-fade-in -mt-4">
                    <div className="mb-8 p-6 rounded-2xl bg-gradient-to-r from-red-900 to-black border border-red-900/30 flex flex-col md:flex-row md:items-center justify-between gap-4 shadow-2xl">
                        <div className="flex items-center gap-4">
                            <div className="relative w-full h-40 md:h-32 rounded-xl overflow-hidden shadow-lg border border-red-500/20">
                                <img src="Tutoria/sanarflix/Sanar.png" className="w-full h-full object-cover" alt="SanarFlix" />
                                <div className="absolute inset-0 bg-gradient-to-r from-black/60 to-transparent"></div>
                                <div className="absolute bottom-4 left-4">
                                     <button className="flex items-center gap-2 bg-white/10 hover:bg-white text-white hover:text-red-700 px-5 py-2.5 rounded-full font-bold text-sm transition-all backdrop-blur-md border border-white/20 group-hover:border-white w-fit">
                                        Acessar <ChevronRight size={16} />
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div className="relative w-full md:w-96 group mt-4 md:mt-0">
                            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-red-200/50 group-focus-within:text-red-400 transition-colors" size={18} />
                            <input type="text" placeholder="Buscar cursos no SanarFlix..." className="w-full bg-black/40 border border-red-500/30 rounded-full py-2.5 pl-10 pr-10 text-sm text-red-100 placeholder-red-200/30 focus:outline-none focus:border-red-500/60 focus:bg-black/60 transition-all shadow-inner" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />
                            {searchTerm && (
                                <button onClick={() => setSearchTerm('')} className="absolute right-3 top-1/2 -translate-y-1/2 text-red-200/50 hover:text-white transition-colors">
                                    <X size={16} />
                                </button>
                            )}
                        </div>
                    </div>
                    {searchTerm ? (
                        <div className="animate-fade-in px-2">
                            <h3 className="text-lg font-bold text-slate-100 mb-6 flex items-center gap-2">
                                <Search size={20} className="text-red-500" />
                                Resultados para "{searchTerm}"
                                <span className="text-slate-500 text-sm font-normal ml-2">({filteredSubjects.length} encontrados)</span>
                            </h3>
                            {filteredSubjects.length > 0 ? (
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                                    {filteredSubjects.map(subject => (
                                        <SanarCard key={subject.id} subject={subject} />
                                    ))}
                                </div>
                            ) : (
                                <div className="flex flex-col items-center justify-center py-20 text-center border border-dashed border-slate-800 rounded-2xl bg-slate-900/30">
                                    <Search size={48} className="text-slate-700 mb-4" />
                                    <p className="text-slate-400 font-medium text-lg">Nenhum curso encontrado.</p>
                                    <p className="text-slate-600 text-sm">Tente buscar por outro termo.</p>
                                </div>
                            )}
                        </div>
                    ) : (
                        <>
                            <CarouselRow title="Em Alta" items={featuredCourses} scrollRef={scrollRef1} />
                            <CarouselRow title="Novidades na Plataforma" items={newCourses} scrollRef={scrollRef2} />
                            <CarouselRow title="Cat√°logo Completo" items={allCourses} scrollRef={scrollRef3} />
                        </>
                    )}
                </div>
            );
        };

        const SearchResults = ({ results, onSelect }) => {
            if (results.length === 0) {
                return (
                    <div className="text-center py-20 animate-fade-in">
                        <Search size={48} className="text-slate-700 mx-auto mb-4" />
                        <h3 className="text-xl font-bold text-slate-400">Nenhum resultado encontrado</h3>
                        <p className="text-slate-600">Tente buscar por termos do m√≥dulo, nomes de problemas ou ATPs.</p>
                    </div>
                );
            }

            return (
                <div className="animate-fade-in space-y-4">
                    <h2 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
                        <Search size={20} className="text-blue-500" />
                        Resultados da Busca ({results.length})
                    </h2>
                    <div className="grid grid-cols-1 gap-3">
                        {results.map((item, idx) => (
                            <div 
                                key={idx}
                                onClick={() => onSelect(item)}
                                className="bg-slate-800 border border-slate-700 p-4 rounded-xl cursor-pointer hover:bg-slate-700 hover:border-blue-500/50 transition-all flex items-center justify-between group"
                                data-title={item.title}
                                data-type={item.type.toLowerCase()}
                            >
                                <div className="flex items-center gap-4">
                                    <div className={`p-2 rounded-lg ${
                                        item.type === 'Resumo' ? 'bg-blue-500/10 text-blue-400' : 
                                        item.type === 'Quest√£o' ? 'bg-amber-500/10 text-amber-400' : 
                                        'bg-purple-500/10 text-purple-400'
                                    }`}>
                                        {item.type === 'Resumo' ? <FileText size={20} /> : 
                                         item.type === 'Quest√£o' ? <FileQuestion size={20} /> : 
                                         <BookOpen size={20} />}
                                    </div>
                                    <div>
                                        <h4 className="font-bold text-slate-200 group-hover:text-white">{item.title}</h4>
                                        <p className="text-xs text-slate-500">{item.type} ‚Ä¢ {item.subtitle}</p>
                                    </div>
                                </div>
                                <ExternalLink size={16} className="text-slate-600 group-hover:text-blue-400 opacity-0 group-hover:opacity-100 transition-all" />
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // --- APP MAIN ---

        function MedStudyHub() {
            // Fun√ß√£o para alternar Tela Cheia
            const toggleFullscreen = () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch((err) => {
                        console.log(`Erro ao tentar ativar tela cheia: ${err.message}`);
                    });
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                }
            };

            const [activeTab, setActiveTab] = useState('dashboard');
            // NOVO STATE PARA ABAS DO PBL
            const [pblTab, setPblTab] = useState('tutoria');
            
            const [selectedSubject, setSelectedSubject] = useState(null);
            const [activeCourse, setActiveCourse] = useState(null);
            const [currentLessonIndex, setCurrentLessonIndex] = useState(0);
            const [activeSubCourse, setActiveSubCourse] = useState(null);
            const [libraryPath, setLibraryPath] = useState([]);
            const [showNotifications, setShowNotifications] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            const [searchResults, setSearchResults] = useState([]);
            const [activeSubTab, setActiveSubTab] = useState('conteudo'); 
            const [summaries, setSummaries] = useState({});
            const [isSaving, setIsSaving] = useState(false);

            const scrollContainerRef = useRef(null);

            const navItems = [
                { id: 'dashboard', label: 'In√≠cio', icon: <Brain size={20} /> },
                { id: 'pbl', label: 'PBL', icon: <Users size={20} /> },
                { id: 'docs', label: 'Biblioteca', icon: <Library size={20} /> },
                { id: 'bq', label: 'BQ', icon: <FileQuestion size={20} /> },
            ];

            useEffect(() => {
                if (scrollContainerRef.current) {
                    scrollContainerRef.current.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }, [activeTab, selectedSubject, activeCourse, activeSubCourse, libraryPath, activeSubTab, pblTab]);

            useEffect(() => {
                if (searchQuery.trim().length > 1) {
                    const results = searchDatabase(searchQuery, DATA);
                    setSearchResults(results);
                } else {
                    setSearchResults([]);
                }
            }, [searchQuery]);

            const handleTabSwitch = (tab) => {
                setActiveTab(tab);
                setSelectedSubject(null);
                setActiveCourse(null);
                setActiveSubCourse(null);
                setSearchQuery('');
                setLibraryPath([]);
                // Reset pblTab only if needed, or keep persistence
                if (tab !== 'pbl') setPblTab('tutoria');
            };

            const handleSubjectClick = (subject) => {
                setSelectedSubject(subject);
                setActiveSubTab('conteudo');
                setSearchQuery('');
                setActiveCourse(null);
                setActiveSubCourse(null);
                // Garantir scroll para o topo
                if (scrollContainerRef.current) {
                    scrollContainerRef.current.scrollTo({ top: 0, behavior: 'auto' });
                }
            };

            const handleLibraryFolderClick = (folderId) => {
                setLibraryPath([...libraryPath, folderId]);
                if (scrollContainerRef.current) {
                    scrollContainerRef.current.scrollTo({ top: 0, behavior: 'smooth' });
                }
            };

            const handleLibraryBack = () => {
                setLibraryPath(libraryPath.slice(0, -1));
            };

            const handleGlobalBack = () => {
                if (activeSubCourse) {
                    setActiveSubCourse(null);
                } else if (activeCourse) {
                    setActiveCourse(null);
                } else if (selectedSubject) {
                    setSelectedSubject(null);
                } else if (activeTab === 'docs' && libraryPath.length > 0) {
                    handleLibraryBack();
                }
            };

            const isDeepView = !!selectedSubject || !!activeCourse || !!activeSubCourse || (activeTab === 'docs' && libraryPath.length > 0);

            const handleCourseClick = (course) => {
                if (course.lessons && course.lessons.length > 0) {
                    setActiveCourse(course);
                    setCurrentLessonIndex(0);
                    // Garantir scroll para o topo ao abrir o player
                    if (scrollContainerRef.current) {
                        scrollContainerRef.current.scrollTo({ top: 0, behavior: 'auto' });
                    }
                } else {
                    alert("Conte√∫do em desenvolvimento ou n√£o dispon√≠vel.");
                }
            };
            
            const handleSubCourseClick = (course) => {
                if (course.lessons && course.lessons.length > 0) {
                    setActiveSubCourse(course);
                    setCurrentLessonIndex(0); 
                    // Garantir scroll para o topo ao abrir o player interno
                    if (scrollContainerRef.current) {
                        scrollContainerRef.current.scrollTo({ top: 0, behavior: 'auto' });
                    }
                } 
                else if (course.file) {
                    handleOpenProblem(course.file);
                }
            };

            const handleSearchResultClick = (result) => {
                // Se for um "curso" (tem lessons diretas), abre como curso
                if (result.action === 'course') {
                    handleCourseClick(result.data);
                } 
                // Se for um link direto (arquivo)
                else if (result.action === 'link') {
                    handleOpenProblem(result.path);
                } 
                // Se for um m√≥dulo/pasta (tem subcourses)
                else if (result.action === 'module') {
                    handleSubjectClick(result.data);
                }
            };

            const handleOpenProblem = (file) => {
                if (!file) {
                    alert("Caminho do arquivo n√£o configurado.");
                    return;
                }
                try {
                    window.open(file, '_blank');
                } catch (e) {
                    console.error("Erro ao tentar abrir janela:", e);
                    alert("Por favor, verifique se o bloqueador de popups est√° desativado.");
                }
            };

            const handleSaveSummary = () => {
                setIsSaving(true);
                setTimeout(() => setIsSaving(false), 800);
            };

            const clearSearch = () => {
                setSearchQuery('');
                setSearchResults([]);
            };

            const getCurrentLibraryData = () => {
                let currentLevel = LIBRARY_DATA;
                let currentTitle = "Biblioteca";
                let isRoot = libraryPath.length === 0;

                for (const pathId of libraryPath) {
                    const found = currentLevel.find(item => item.id === pathId);
                    if (found && found.children) {
                        currentLevel = found.children;
                        currentTitle = found.title;
                    }
                }
                return { data: currentLevel, title: currentTitle, isRoot };
            };

            const renderContent = () => {
                if (searchQuery.trim().length > 1) {
                    return <SearchResults results={searchResults} onSelect={handleSearchResultClick} />;
                }

                if (activeTab === 'docs') {
                    const { data, title, isRoot } = getCurrentLibraryData();

                    return (
                        <div className="animate-fade-in pb-20">
                            <div className="mb-8">
                                <h1 className="text-3xl font-bold text-white mb-2 flex items-center gap-3">
                                    <Library size={32} className="text-amber-500" />
                                    {isRoot ? "Biblioteca" : title}
                                </h1>
                                <p className="text-slate-400">
                                    {isRoot ? "Seu acervo digital de conhecimento." : "Materiais e documentos."}
                                </p>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                                {data.map((item, idx) => {
                                    if (item.type === 'folder') {
                                        return (
                                            <div 
                                                key={idx}
                                                onClick={() => handleLibraryFolderClick(item.id)}
                                                className={`group relative flex w-full cursor-pointer bg-[#1A202C] hover:bg-[#2D3748] rounded-r-lg overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 hover:translate-x-2 border-r border-t border-b border-slate-700`}
                                            >
                                                {/* Lombada do Livro (Cor) */}
                                                <div className={`w-3 md:w-4 bg-gradient-to-b ${item.color || 'from-slate-600 to-slate-800'} shadow-inner`}></div>
                                                
                                                {/* Conte√∫do do "Livro" */}
                                                <div className="flex-1 p-5 flex items-center justify-between">
                                                    <div className="flex items-center gap-4">
                                                        <div className={`p-3 rounded-lg bg-slate-800/50 text-slate-300 group-hover:text-white group-hover:bg-slate-700 transition-colors border border-slate-700/50 shadow-sm`}>
                                                            {item.icon || <BookOpen size={24} />}
                                                        </div>
                                                        <div>
                                                            <h3 className="text-lg font-bold text-slate-200 group-hover:text-amber-400 transition-colors">{item.title}</h3>
                                                            <p className="text-slate-500 text-xs mt-0.5 group-hover:text-slate-400">{item.description || 'Se√ß√£o de estudos'}</p>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="text-slate-600 group-hover:text-amber-500 transition-colors">
                                                        <ChevronRight size={20} />
                                                    </div>
                                                </div>
                                            </div>
                                        );
                                    } else if (item.type === 'file') {
                                        return (
                                            <div 
                                                key={idx}
                                                onClick={() => window.open(item.url, '_blank')}
                                                className="group relative flex w-full cursor-pointer bg-slate-900 hover:bg-slate-800 rounded-r-md border-l-4 border-l-slate-600 hover:border-l-blue-500 border-r border-t border-b border-slate-700/50 transition-all duration-200 hover:translate-x-1"
                                            >
                                                <div className="flex-1 p-4 flex items-center gap-4">
                                                    <div className="p-2 bg-slate-800 rounded text-slate-400 group-hover:text-blue-400 group-hover:bg-slate-700 transition-colors">
                                                        <FileText size={18} />
                                                    </div>
                                                    <div className="flex-1 min-w-0">
                                                        <h4 className="font-medium text-slate-300 text-sm group-hover:text-white transition-colors truncate">
                                                            {item.title}
                                                        </h4>
                                                        <span className="text-[10px] text-slate-500 flex items-center gap-1 mt-0.5 group-hover:text-blue-400/80">
                                                            PDF ‚Ä¢ Documento
                                                        </span>
                                                    </div>
                                                    <ExternalLink size={14} className="text-slate-600 group-hover:text-blue-400 opacity-0 group-hover:opacity-100 transition-all" />
                                                </div>
                                            </div>
                                        );
                                    }
                                    return null;
                                })}
                            </div>
                        </div>
                    );
                }

                if (activeCourse) {
                    return (
                        <CoursePlayer 
                            course={activeCourse}
                            onBack={() => setActiveCourse(null)}
                            currentLessonIndex={currentLessonIndex}
                            setCurrentLessonIndex={setCurrentLessonIndex}
                        />
                    );
                }

                if (selectedSubject) {
                    if (activeSubCourse) {
                         return (
                            <CoursePlayer 
                                course={activeSubCourse}
                                onBack={() => setActiveSubCourse(null)}
                                currentLessonIndex={currentLessonIndex}
                                setCurrentLessonIndex={setCurrentLessonIndex}
                                parentTitle={selectedSubject.title} 
                            />
                        );
                    }

                    if (selectedSubject.theme) {
                        if (selectedSubject.id === 'sanar_main') {
                            return (
                                <div className="animate-fade-in pb-20">
                                    <SanarflixSection 
                                        subjects={selectedSubject.subcourses}
                                        onSubjectClick={handleCourseClick}
                                    />
                                </div>
                            );
                        }

                        // --- ALTERA√á√ÉO AQUI: L√≥gica espec√≠fica para Medcurso ---
                        if (selectedSubject.id === 'medcurso_main') {
                            return (
                                <div className="animate-fade-in pb-20">
                                    <MedcursoSection 
                                        subjects={selectedSubject.subcourses}
                                        onSubjectClick={handleSubjectClick}
                                    />
                                </div>
                            );
                        }

                        // --- NOVA L√ìGICA: Estrat√©gia MED ---
                        if (selectedSubject.id === 'estrategia_main') {
                            return (
                                <div className="animate-fade-in pb-20">
                                    <EstrategiaSection 
                                        subjects={selectedSubject.subcourses}
                                        onSubjectClick={handleCourseClick}
                                    />
                                </div>
                            );
                        }

                         // Check if drilling down is needed (Medcurso case) or just playing
                         // If Medcurso, we pass handleSubjectClick to drill down into folders
                         // Mant√©m compatibilidade com outros temas futuros se necess√°rio
                         const isFolderNavigation = selectedSubject.id === 'medcurso_main'; // redundante agora mas seguro
                         const clickHandler = isFolderNavigation ? handleSubjectClick : handleCourseClick;

                         return (
                            <div className="animate-fade-in pb-20">
                                <PlatformSection 
                                    title={selectedSubject.title} 
                                    subtitle={selectedSubject.subtitle}
                                    subjects={selectedSubject.subcourses}
                                    theme={selectedSubject.theme}
                                    onSubjectClick={clickHandler}
                                />
                            </div>
                         );
                    }

                    // --- M√ìDULOS DE TUTORIA/CURSOS NORMAIS ---
                    const problems = selectedSubject.problems || [];
                    const questions = selectedSubject.questions || [];

                    return (
                        <div className="animate-fade-in pb-20">
                            {/* GLOBAL BACK BUTTON (INSIDE CONTENT AREA) */}
                            <div className="max-w-[1800px] mx-auto mb-6">
                                 <button 
                                    onClick={handleGlobalBack}
                                    className="flex items-center gap-2 text-slate-400 hover:text-white transition-colors group"
                                 >
                                    <div className="p-2 rounded-full bg-slate-800 border border-slate-700 group-hover:bg-slate-700 transition-all">
                                        <ArrowLeft size={18} />
                                    </div>
                                    <span className="font-medium text-sm">Voltar</span>
                                 </button>
                            </div>

                            <div className={`h-48 rounded-3xl bg-gradient-to-r ${selectedSubject.color} relative mb-6 flex items-end p-8 shadow-xl`}>
                                <div>
                                    <span className="text-white/80 uppercase tracking-wider text-xs font-bold mb-2 block">Mat√©ria / M√≥dulo</span>
                                    <h1 className="text-3xl md:text-4xl font-bold text-white mb-2">{selectedSubject.title}</h1>
                                </div>
                            </div>

                            <div className="flex gap-6 mb-8 border-b border-slate-700 px-2 overflow-x-auto">
                                <button 
                                    onClick={() => setActiveSubTab('conteudo')} 
                                    className={`pb-3 px-2 text-sm font-medium border-b-2 transition-all duration-200 whitespace-nowrap ${activeSubTab === 'conteudo' ? 'border-blue-500 text-blue-400' : 'border-transparent text-slate-400 hover:text-slate-200'}`}
                                >
                                    Conte√∫dos
                                </button>
                                <button 
                                    onClick={() => setActiveSubTab('resumo')} 
                                    className={`pb-3 px-2 text-sm font-medium border-b-2 transition-all duration-200 whitespace-nowrap ${activeSubTab === 'resumo' ? 'border-blue-500 text-blue-400' : 'border-transparent text-slate-400 hover:text-slate-200'}`}
                                >
                                    Resumos & Problemas
                                </button>
                                <button 
                                    onClick={() => setActiveSubTab('questoes')} 
                                    className={`pb-3 px-2 text-sm font-medium border-b-2 transition-all duration-200 whitespace-nowrap ${activeSubTab === 'questoes' ? 'border-blue-500 text-blue-400' : 'border-transparent text-slate-400 hover:text-slate-200'}`}
                                >
                                    Quest√µes (ATP)
                                </button>
                            </div>

                            <div className="px-2">
                                {activeSubTab === 'conteudo' && (
                                    <div className="animate-fade-in space-y-10">
                                        {selectedSubject.subcourses && selectedSubject.subcourses.length > 0 ? (
                                            <div className="flex flex-col gap-3">
                                                {selectedSubject.subcourses.map((course) => (
                                                    <div 
                                                        key={course.id} 
                                                        onClick={() => handleSubCourseClick(course)}
                                                        className={`w-full bg-slate-800 border border-slate-700 hover:border-blue-500/50 p-4 rounded-xl cursor-pointer hover:bg-slate-750 transition-all group flex items-center justify-between shadow-sm hover:shadow-md hover:translate-x-1 ${course.lessons || course.file ? '' : ''}`}
                                                    >
                                                        <div className="flex items-center gap-4">
                                                            <div className={`p-2.5 rounded-lg text-white bg-gradient-to-br ${selectedSubject.color} shadow-sm`}>
                                                                <PlayCircle size={20} />
                                                            </div>
                                                            <div>
                                                                <h4 className="text-sm font-bold text-slate-200 group-hover:text-white transition-colors">{course.title}</h4>
                                                                <p className="text-xs text-slate-500 mt-0.5">{course.type || 'M√≥dulo'}</p>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="flex items-center text-xs font-medium text-slate-500 group-hover:text-blue-400 transition-colors">
                                                            {course.lessons ? 'Ver Aulas' : 'Abrir'} <ChevronRight size={14} className="ml-1.5" />
                                                        </div>
                                                    </div>
                                                ))}
                                                {/* Bot√£o de Adicionar - Removido para limpeza visual ou mantido como opcional */}
                                            </div>
                                        ) : (
                                            (!selectedSubject.simulados || selectedSubject.simulados.length === 0) && !selectedSubject.isPlaceholder && (
                                                <div className="flex flex-col items-center justify-center p-10 border border-dashed border-slate-700 rounded-xl bg-slate-800/20">
                                                    <h4 className="text-xl font-bold text-slate-400 mb-2">Conte√∫do em Desenvolvimento</h4>
                                                    <p className="text-slate-500 text-center max-w-md">V√° para as abas de Resumos ou Quest√µes para ver o material dispon√≠vel.</p>
                                                </div>
                                            )
                                        )}

                                        {selectedSubject.simulados && selectedSubject.simulados.length > 0 && (
                                            <div>
                                                <h3 className="text-lg font-bold text-white mb-4 pl-1 border-l-4 border-blue-500 flex items-center gap-3 mt-8">
                                                    An√°lises e Simulados
                                                </h3>
                                                <div className="flex flex-col gap-3">
                                                    {selectedSubject.simulados.map((simulado) => (
                                                        <div 
                                                            key={simulado.id} 
                                                            onClick={() => handleOpenProblem(simulado.file)}
                                                            className="w-full bg-slate-800 border border-slate-700 hover:border-blue-500/50 p-4 rounded-xl cursor-pointer hover:bg-slate-750 transition-all group flex items-center justify-between shadow-sm hover:shadow-md hover:translate-x-1"
                                                        >
                                                            <div className="flex items-center gap-4">
                                                                <div className="p-2.5 bg-blue-500/10 rounded-lg text-blue-400 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                                                                    <Activity size={20} />
                                                                </div>
                                                                <div>
                                                                    <h4 className="text-sm font-bold text-slate-200 group-hover:text-white transition-colors">{simulado.title}</h4>
                                                                    <p className="text-xs text-slate-500 mt-0.5">Documento HTML</p>
                                                                </div>
                                                            </div>
                                                            <ExternalLink size={14} className="text-slate-600 group-hover:text-blue-400 transition-colors" />
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                )}

                                {activeSubTab === 'resumo' && (
                                    <div className="animate-fade-in">
                                        {selectedSubject.problems && selectedSubject.problems.length > 0 ? (
                                            <div className="flex flex-col gap-3">
                                                {selectedSubject.problems.map((problem) => (
                                                    <div 
                                                        key={problem.id}
                                                        onClick={() => handleOpenProblem(problem.file)}
                                                        data-title={problem.title}
                                                        data-type="resumo"
                                                        data-module={problem.moduleRef}
                                                        className="w-full bg-slate-800 border border-slate-700 hover:border-blue-500/50 p-4 rounded-xl cursor-pointer hover:bg-slate-750 transition-all group flex items-center justify-between shadow-sm hover:shadow-md hover:translate-x-1"
                                                    >
                                                        <div className="flex items-center gap-4">
                                                            <div className="p-2.5 bg-blue-500/10 rounded-lg text-blue-400 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                                                                <FileSearch size={20} />
                                                            </div>
                                                            <div>
                                                                <h3 className="text-sm font-bold text-slate-200 group-hover:text-white transition-colors">
                                                                    {problem.title}
                                                                </h3>
                                                                <p className="text-xs text-slate-500 mt-0.5">Documento de Apoio</p>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="flex items-center text-xs font-medium text-slate-500 group-hover:text-blue-400 transition-colors">
                                                            Abrir <ExternalLink size={14} className="ml-1.5" />
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        ) : (
                                            <div className="bg-slate-800/40 border border-slate-700 rounded-2xl p-6">
                                                <div className="flex justify-between items-center mb-4">
                                                    <div>
                                                        <h3 className="text-lg font-bold text-white flex items-center gap-2">
                                                            <FileText size={20} className="text-blue-400"/> Resumo: {selectedSubject.title}
                                                        </h3>
                                                        <p className="text-sm text-slate-400">Escreva seus objetivos de aprendizado ou resumo das discuss√µes aqui.</p>
                                                    </div>
                                                    <button 
                                                        onClick={handleSaveSummary}
                                                        className={`px-4 py-2 rounded-lg font-medium text-sm flex items-center gap-2 transition-all ${isSaving ? 'bg-green-600 text-white' : 'bg-blue-600 hover:bg-blue-700 text-white'}`}
                                                    >
                                                        {isSaving ? <Check size={16} /> : <Save size={16} />}
                                                        {isSaving ? 'Salvo!' : 'Salvar'}
                                                    </button>
                                                </div>
                                                <textarea 
                                                    className="w-full h-[500px] bg-slate-900/50 border border-slate-700 rounded-xl p-6 text-slate-300 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 resize-none font-mono leading-relaxed"
                                                    placeholder={`Digite aqui o resumo para o ${selectedSubject.title}...\n\nExemplo:\n- Objetivos do caso\n- Fisiopatologia principal\n- Conduta terap√™utica`}
                                                    value={summaries[selectedSubject.id] || ''}
                                                    onChange={(e) => setSummaries({...summaries, [selectedSubject.id]: e.target.value})}
                                                ></textarea>
                                                <div className="mt-2 text-xs text-slate-500 flex justify-end">
                                                    {summaries[selectedSubject.id] ? `${summaries[selectedSubject.id].length} caracteres` : '0 caracteres'}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                )}

                                {activeSubTab === 'questoes' && (
                                    <div className="animate-fade-in">
                                        {selectedSubject.questions && selectedSubject.questions.length > 0 ? (
                                            <div className="flex flex-col gap-3">
                                                {selectedSubject.questions.map((question) => (
                                                    <div 
                                                        key={question.id}
                                                        onClick={() => handleOpenProblem(question.file)}
                                                        data-title={question.title}
                                                        data-type="questao"
                                                        data-module={question.moduleRef}
                                                        className="w-full bg-slate-800 border border-slate-700 hover:border-amber-500/50 p-4 rounded-xl cursor-pointer hover:bg-slate-750 transition-all group flex items-center justify-between shadow-sm hover:shadow-md hover:translate-x-1"
                                                    >
                                                        <div className="flex items-center gap-4">
                                                            <div className="p-2.5 bg-amber-500/10 rounded-lg text-amber-400 group-hover:bg-amber-500 group-hover:text-white transition-colors">
                                                                <FileQuestion size={20} />
                                                            </div>
                                                            <div>
                                                                <h3 className="text-sm font-bold text-slate-200 group-hover:text-white transition-colors">
                                                                    {question.title}
                                                                </h3>
                                                                <p className="text-xs text-slate-500 mt-0.5">ATP - Avalia√ß√£o Tutorial</p>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="flex items-center text-xs font-medium text-slate-500 group-hover:text-amber-400 transition-colors">
                                                            Abrir <ExternalLink size={14} className="ml-1.5" />
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        ) : (
                                            <div className="flex flex-col items-center justify-center p-16 border border-dashed border-slate-700 rounded-xl bg-slate-800/20">
                                                <FileQuestion size={48} className="text-slate-600 mb-4" />
                                                <h4 className="text-xl font-bold text-slate-400 mb-2">Sem Quest√µes Cadastradas</h4>
                                                <p className="text-slate-500 text-center max-w-md">N√£o h√° question√°rios dispon√≠veis para este m√≥dulo no momento.</p>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>
                    );
                }

                if (activeTab === 'dashboard') {
                    return (
                        <div className="animate-fade-in pb-20">
                            <div className="mb-10 mt-4">
                                <h1 className="text-3xl font-bold text-white mb-2">"A medicina √© a arte de curar, mas tamb√©m a ci√™ncia de cuidar."</h1>
                                <p className="text-slate-400">Continue firme nos estudos!</p>
                            </div>
                            
                            <CarouselSection 
                                title="Cursos Principais" 
                                icon={<MonitorPlay />}
                                subjects={[DATA.platforms.sanar, DATA.platforms.emr, DATA.platforms.medcurso, DATA.platforms.estrategia]} 
                                onSubjectClick={(subject) => {
                                    handleSubjectClick(subject);
                                }}
                            />

                            <CarouselSection 
                                title="Ciclo B√°sico" 
                                icon={<Microscope />}
                                subjects={DATA.basico.subjects} 
                                onSubjectClick={handleSubjectClick} 
                            />
                            
                            <CarouselSection 
                                title="Ciclo Cl√≠nico" 
                                icon={<Stethoscope />}
                                subjects={DATA.clinico.subjects} 
                                onSubjectClick={handleSubjectClick} 
                            />
                            
                            <CarouselSection 
                                title="Internato" 
                                icon={<Activity />}
                                subjects={DATA.internato.subjects} 
                                onSubjectClick={handleSubjectClick} 
                            />
                        </div>
                    );
                }

                if (activeTab === 'pbl') {
                    return (
                        <div className="animate-fade-in pb-20">
                            {/* NEW: Navigation Bar for PBL */}
                            <div className="mb-8 mt-4">
                                <div className="flex items-center gap-4 mb-6">
                                    <div className="p-3 bg-blue-600/20 rounded-xl text-blue-500 border border-blue-500/20"><Users size={32} /></div>
                                    <div>
                                        <h1 className="text-3xl font-bold text-white mb-1">PBL & Casos</h1>
                                        <p className="text-slate-400">Aprendizado Baseado em Problemas</p>
                                    </div>
                                </div>
                                
                                <div className="flex gap-2 border-b border-slate-700 overflow-x-auto">
                                    <button 
                                        onClick={() => setPblTab('tutoria')}
                                        className={`pb-3 px-6 text-sm font-bold border-b-2 transition-all duration-200 whitespace-nowrap ${
                                            pblTab === 'tutoria' 
                                            ? 'border-blue-500 text-blue-400' 
                                            : 'border-transparent text-slate-400 hover:text-slate-200'
                                        }`}
                                    >
                                        Tutoria
                                    </button>
                                    <button 
                                        onClick={() => setPblTab('morfo')}
                                        className={`pb-3 px-6 text-sm font-bold border-b-2 transition-all duration-200 whitespace-nowrap ${
                                            pblTab === 'morfo' 
                                            ? 'border-blue-500 text-blue-400' 
                                            : 'border-transparent text-slate-400 hover:text-slate-200'
                                        }`}
                                    >
                                        Morfo
                                    </button>
                                    <button 
                                        onClick={() => setPblTab('skills')}
                                        className={`pb-3 px-6 text-sm font-bold border-b-2 transition-all duration-200 whitespace-nowrap ${
                                            pblTab === 'skills' 
                                            ? 'border-blue-500 text-blue-400' 
                                            : 'border-transparent text-slate-400 hover:text-slate-200'
                                        }`}
                                    >
                                        Habilidades M√©dicas
                                    </button>
                                </div>
                            </div>

                            {/* CONDITIONAL CONTENT BASED ON PBL TAB */}
                            {pblTab === 'tutoria' && (
                                <div className="animate-fade-in">
                                    <CarouselSection 
                                        title="Ciclo B√°sico" 
                                        icon={<Brain />}
                                        subjects={DATA.pbl_basico.subjects} 
                                        onSubjectClick={handleSubjectClick} 
                                    />

                                    <CarouselSection 
                                        title="Ciclo Cl√≠nico" 
                                        icon={<FileText />}
                                        subjects={DATA.pbl_clinico.subjects} 
                                        onSubjectClick={handleSubjectClick} 
                                    />
                                </div>
                            )}

                            {pblTab === 'morfo' && (
                                <div className="animate-fade-in">
                                    {DATA.morfo_sections.map((section, idx) => (
                                        <CarouselSection 
                                            key={idx}
                                            title={section.title} 
                                            icon={<Layers />}
                                            subjects={section.subjects} 
                                            onSubjectClick={handleSubjectClick} 
                                        />
                                    ))}
                                </div>
                            )}

                            {pblTab === 'skills' && (
                                <div className="animate-fade-in flex flex-col items-center justify-center py-20 border border-dashed border-slate-800 rounded-2xl bg-slate-900/30">
                                    <GraduationCap size={48} className="text-slate-700 mb-4" />
                                    <h3 className="text-xl font-bold text-slate-400">Em constru√ß√£o</h3>
                                    <p className="text-slate-600">Este m√≥dulo estar√° dispon√≠vel em breve.</p>
                                </div>
                            )}
                            
                            {/* Shared Notes Section */}
                            <div className="mt-8 bg-slate-800/50 rounded-2xl p-6 border border-slate-700">
                                <h3 className="text-xl font-bold text-slate-200 mb-4">Anota√ß√µes Gerais</h3>
                                <textarea className="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 text-slate-300 focus:outline-none focus:border-blue-500 h-32" placeholder="Notas r√°pidas que n√£o pertencem a um m√≥dulo espec√≠fico..."></textarea>
                            </div>
                        </div>
                    );
                }

                // Conte√∫do para a aba BQ (Banco de Quest√µes)
                if (activeTab === 'bq') {
                    return (
                        <div className="animate-fade-in pb-20">
                            <div className="mb-8 mt-4 flex items-center gap-4">
                                <div className="p-3 bg-blue-600/20 rounded-xl text-blue-500 border border-blue-500/20"><FileQuestion size={32} /></div>
                                <div><h1 className="text-3xl font-bold text-white mb-1">Banco de Quest√µes</h1><p className="text-slate-400">Treine seus conhecimentos</p></div>
                            </div>
                            
                            <div className="flex flex-col items-center justify-center p-12 border border-slate-700 rounded-2xl bg-slate-800/50 text-center max-w-2xl mx-auto mt-10 shadow-2xl">
                                <div className="w-24 h-24 bg-blue-500/10 rounded-full flex items-center justify-center mb-6 border border-blue-500/20 shadow-inner">
                                    <Activity size={48} className="text-blue-500" />
                                </div>
                                
                                <h2 className="text-3xl font-bold text-white mb-4">Funcionalidade em Beta</h2>
                                
                                <p className="text-slate-400 mb-10 leading-relaxed max-w-md text-lg">
                                    O Banco de Quest√µes est√° em fase de testes para garantir a melhor experi√™ncia de estudo. Voc√™ pode acessar a vers√£o preliminar clicando abaixo.
                                </p>
                                
                                <button 
                                    onClick={() => window.open('Banco de Quest√µes/banco de quest√µes.html', '_blank')}
                                    className="px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-blue-900/40 hover:scale-105 flex items-center gap-3 text-lg"
                                >
                                    Acessar Banco de Quest√µes <ExternalLink size={20} />
                                </button>
                                
                                <p className="mt-6 text-xs text-slate-500">
                                    *Ao clicar, uma nova p√°gina ser√° aberta com o simulado.
                                </p>
                            </div>
                        </div>
                    );
                }
                
                return <div className="text-white mt-10 text-center">√Årea em constru√ß√£o...</div>;
            };

            return (
                <div className="flex h-screen bg-[#0F172A] font-sans overflow-hidden text-slate-300 selection:bg-blue-500/30 flex-col">
                    
                    {/* HEADER UNIFICADO COM NAVEGA√á√ÉO SUPERIOR */}
                    <header className="h-20 border-b border-slate-700/50 bg-[#0F172A]/80 backdrop-blur-md flex items-center justify-between px-4 lg:px-12 sticky top-0 z-50 transition-all duration-300 hover:bg-[#0F172A]">
                        
                        {/* Esquerda: Logo & Menu Principal */}
                        <div className="flex items-center gap-4 lg:gap-12 flex-shrink-0">
                            {/* Logo */}
                            <div 
                                className="flex items-center gap-3 cursor-pointer group"
                                onClick={() => handleTabSwitch('dashboard')}
                            >
                                <img 
                                    src="mednexus.png" 
                                    alt="MedNexus Logo" 
                                    className="w-8 h-8 lg:w-10 lg:h-10 object-contain group-hover:scale-105 transition-transform drop-shadow-lg"
                                />
                                <span className="font-extrabold text-blue-500 text-xl lg:text-3xl tracking-tighter">MEDNEXUS</span>
                            </div>

                            {/* Navega√ß√£o - Apenas √çcones (Logos) no Topo - Compacto */}
                            <nav className="flex items-center gap-1 lg:gap-3 overflow-x-auto no-scrollbar mask-linear-fade">
                                {navItems.map(item => (
                                    <button
                                        key={item.id}
                                        /* CORRE√á√ÉO: Agora todos os bot√µes apenas trocam a aba interna */
                                        onClick={() => handleTabSwitch(item.id)}
                                        className={`flex flex-col items-center justify-center w-12 h-12 lg:w-14 lg:h-14 transition-all duration-300 relative group rounded-lg ${
                                            activeTab === item.id 
                                            ? 'text-white bg-slate-800/50' 
                                            : 'text-slate-400 hover:text-slate-200 hover:bg-slate-800/30'
                                        }`}
                                        title={item.label}
                                    >
                                        {/* Renderiza o √≠cone menor para caber melhor */}
                                        {React.cloneElement(item.icon, { size: 20 })}
                                        
                                        <span className="text-[9px] mt-0.5 opacity-80">{item.label}</span>

                                        {/* Indicador de Aba Ativa (Barra inferior) */}
                                        {activeTab === item.id && (
                                            <span className="absolute bottom-1 w-1 h-1 bg-blue-500 rounded-full"></span>
                                        )}
                                    </button>
                                ))}
                            </nav>
                        </div>

                        {/* Centro/Direita: Pesquisa, Voltar e Perfil */}
                        <div className="flex items-center justify-end gap-2 lg:gap-4 ml-auto flex-shrink-0">
                            {/* Barra de Pesquisa */}
                            <div className="relative group hidden sm:block">
                                <div className={`flex items-center bg-slate-800 border border-slate-600 px-2 py-1.5 rounded-full transition-all ${searchQuery ? 'w-40 lg:w-56' : 'w-40 lg:w-56'}`}>
                                    <Search className="text-white mr-2" size={16} />
                                    <input 
                                        type="text" 
                                        placeholder="Pesquisar..." 
                                        className="bg-transparent border-none text-white text-xs focus:outline-none w-full placeholder-slate-400"
                                        value={searchQuery} 
                                        onChange={(e) => setSearchQuery(e.target.value)} 
                                    />
                                    {searchQuery && (
                                        <button onClick={clearSearch} className="text-white ml-1">
                                            <X size={12} />
                                        </button>
                                    )}
                                </div>
                            </div>

                            {/* A√ß√µes de Perfil e Notifica√ß√µes */}
                            <div className="flex items-center gap-2 lg:gap-4">
                                <button className="relative text-slate-400 hover:text-white transition-colors p-1">
                                    <Bell size={18} className="lg:w-5 lg:h-5" />
                                    <span className="absolute top-0 right-0 w-2 h-2 bg-blue-500 rounded-full border-2 border-[#0F172A]"></span>
                                </button>
                                <div className="w-8 h-8 rounded-full bg-slate-700 border border-slate-600 flex items-center justify-center text-slate-300 font-medium text-xs">DR</div>
                            </div>
                        </div>
                    </header>

                    <main className="flex-1 overflow-hidden relative">
                         <div 
                            ref={scrollContainerRef}
                            className="absolute inset-0 overflow-y-auto p-6 lg:p-8 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent"
                        >
                            <div className="max-w-7xl mx-auto pb-20">
                                {renderContent()}
                            </div>
                        </div>
                    </main>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<MedStudyHub />);
    </script>
</body>
</html>
