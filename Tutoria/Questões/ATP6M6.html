<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedHub - Quiz Parasitologia Avan√ßada</title>
    <style>
        :root {
            --bg-dark: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-purple: #8b5cf6;
            --accent-red: #ef4444;
            --gradient-blue: linear-gradient(135deg, #3b82f6, #2563eb);
            --gradient-green: linear-gradient(135deg, #10b981, #059669);
            --gradient-purple: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center; 
            overflow-y: auto;
        }

        /* Main Content Container */
        .main-content {
            width: 100%;
            max-width: 1000px; 
            padding: 40px;
        }

        .header {
            text-align: center; 
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.5rem; 
            margin-bottom: 10px;
            background: linear-gradient(90deg, #f8fafc, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 30px;
        }

        .card {
            padding: 30px;
            border-radius: 20px; 
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 220px; 
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255,255,255,0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .card:hover::after {
            opacity: 1;
        }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            background: rgba(255,255,255,0.2);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }

        .card h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .card p {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Quiz Interface */
        .quiz-container {
            display: none;
            max-width: 800px;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #334155;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-blue);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-card {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid #334155;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .question-badge {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 25px;
            display: inline-block;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 35px;
            line-height: 1.5;
            color: #e2e8f0;
        }

        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background-color: var(--bg-dark);
            border: 1px solid #334155;
            padding: 20px 25px;
            border-radius: 12px;
            color: var(--text-main);
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.05rem;
            display: flex;
            align-items: center;
        }

        .option-btn:hover {
            border-color: var(--accent-blue);
            background-color: rgba(59, 130, 246, 0.05);
            transform: translateX(5px);
        }

        .option-btn.correct {
            border-color: var(--accent-green);
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--accent-green);
        }

        .option-btn.wrong {
            border-color: var(--accent-red);
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--accent-red);
        }

        /* Feedback Modal */
        .feedback-overlay {
            display: none;
            margin-top: 25px;
            padding: 25px;
            border-radius: 12px;
            background-color: #0f172a; 
            border-left: 4px solid var(--accent-blue);
            animation: slideIn 0.3s ease;
        }

        .feedback-title {
            font-weight: bold;
            margin-bottom: 8px;
            display: block;
            font-size: 1.1rem;
        }

        .feedback-text {
            color: #cbd5e1;
            font-size: 1rem;
            line-height: 1.6;
        }

        .next-btn {
            margin-top: 25px;
            padding: 15px 40px;
            background: var(--gradient-blue);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            float: right;
            transition: opacity 0.2s;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .next-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* Results Screen */
        .results-container {
            display: none;
            text-align: center;
            padding: 50px;
            background-color: var(--card-bg);
            border-radius: 20px;
            max-width: 600px;
            margin: 0 auto;
            border: 1px solid #334155;
        }

        .score-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: 10px solid var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            font-weight: bold;
            margin: 30px auto;
            background: rgba(15, 23, 42, 0.5);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.2);
        }

        .restart-btn {
            padding: 15px 50px;
            background: var(--gradient-green);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 30px;
            font-weight: bold;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .restart-btn:hover {
            transform: translateY(-3px);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .main-content { padding: 20px; }
            .header h1 { font-size: 1.8rem; }
            .dashboard-grid { grid-template-columns: 1fr; }
            .card { height: 160px; }
        }
    </style>
</head>
<body>

    <!-- Main Content -->
    <div class="main-content">
        
        <!-- Screen 1: Dashboard / Selection -->
        <div id="screen-dashboard">
            <div class="header">
                <h1>Desafio N√≠vel Hard: Parasitologia</h1>
                <p>Mecanismos de Agress√£o, Defesa Imune e Estresse.</p>
            </div>

            <div class="dashboard-grid">
                <div class="card" style="background: var(--gradient-green)" onclick="startQuiz(10)">
                    <div class="card-icon">‚ö°</div>
                    <div>
                        <h3>Treino R√°pido</h3>
                        <p>10 Quest√µes aleat√≥rias</p>
                    </div>
                </div>

                <div class="card" style="background: var(--gradient-blue)" onclick="startQuiz(20)">
                    <div class="card-icon">üß†</div>
                    <div>
                        <h3>Treino Padr√£o</h3>
                        <p>20 Quest√µes aleat√≥rias</p>
                    </div>
                </div>

                <div class="card" style="background: var(--gradient-purple)" onclick="startQuiz(30)">
                    <div class="card-icon">üî•</div>
                    <div>
                        <h3>Maratona Completa</h3>
                        <p>Todas as 30 quest√µes</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Screen 2: Quiz -->
        <div id="screen-quiz" class="quiz-container">
            <div class="header">
                <h1 id="quiz-title" style="font-size: 2rem;">Quiz em Andamento</h1>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress"></div>
                </div>
            </div>

            <div class="question-card">
                <span class="question-badge" id="q-category">Categoria</span>
                <p class="question-text" id="q-text">Carregando pergunta...</p>
                
                <div class="options-grid" id="options-container">
                    <!-- Options injected via JS -->
                </div>

                <div class="feedback-overlay" id="feedback">
                    <span class="feedback-title" id="feedback-title">Resposta</span>
                    <p class="feedback-text" id="feedback-text">Explica√ß√£o aqui.</p>
                </div>

                <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">Pr√≥xima Quest√£o</button>
            </div>
        </div>

        <!-- Screen 3: Results -->
        <div id="screen-results" class="results-container">
            <h1 style="font-size: 2.5rem; color: var(--accent-green);">Treino Finalizado!</h1>
            <p style="color: var(--text-muted); margin-bottom: 30px;">Veja seu desempenho no m√≥dulo de parasitologia.</p>
            
            <div class="score-circle" id="final-score">0%</div>
            
            <p id="score-message" style="font-size: 1.2rem; margin-bottom: 20px; line-height: 1.6;">Mensagem motivacional.</p>
            
            <button class="restart-btn" onclick="location.reload()">Novo Treino</button>
        </div>

    </div>

    <script>
        // --- BANCO DE QUEST√ïES (30 ITENS DIF√çCEIS) ---
        const allQuestions = [
            // Agress√£o Helmintos (1-8)
            {
                category: "Agress√£o Helm√≠ntica",
                text: "Qual √© a principal manifesta√ß√£o cl√≠nica da agress√£o traum√°tica pulmonar durante o ciclo de Loss em infec√ß√µes por Ascaris lumbricoides?",
                options: [
                    "S√≠ndrome de Loeffler (pneumonite eosinof√≠lica).",
                    "Fibrose pulmonar intersticial.",
                    "Bronquiectasias de tra√ß√£o.",
                    "Abscesso pulmonar bacteriano."
                ],
                correct: 0,
                explanation: "A S√≠ndrome de Loeffler √© a manifesta√ß√£o cl√°ssica da passagem larv√°ria aguda pelos pulm√µes, caracterizada por tosse, dispneia e eosinofilia."
            },
            {
                category: "Agress√£o Helm√≠ntica",
                text: "Os Ancilostom√≠deos (Ancylostoma duodenale e Necator americanus) causam anemia ferropriva intensa principalmente devido a:",
                options: [
                    "Competi√ß√£o direta pela absor√ß√£o de ferro no duodeno.",
                    "Agress√£o espoliativa sangu√≠nea e secre√ß√£o de anticoagulantes.",
                    "Hem√≥lise intravascular mediada por toxinas.",
                    "Inibi√ß√£o da eritropoiese na medula √≥ssea."
                ],
                correct: 1,
                explanation: "Eles rasgam a mucosa, sugam sangue e impedem a coagula√ß√£o, levando a uma perda cr√¥nica e significativa de hem√°cias e ferro."
            },
            {
                category: "Agress√£o Helm√≠ntica",
                text: "A hiperinfec√ß√£o por Strongyloides stercoralis em pacientes imunossuprimidos ocorre devido a qual mecanismo peculiar deste helminto?",
                options: [
                    "Capacidade de formar cistos resistentes no f√≠gado.",
                    "Auto-infec√ß√£o interna, onde larvas rabditoides viram filarioides infectantes dentro do hospedeiro.",
                    "Resist√™ncia completa aos medicamentos anti-helm√≠nticos.",
                    "Transmiss√£o direta de pessoa para pessoa por aeross√≥is."
                ],
                correct: 1,
                explanation: "Este ciclo permite que o parasita se multiplique indefinidamente dentro do hospedeiro, tornando-se fatal quando o sistema imune falha."
            },
            {
                category: "Agress√£o Helm√≠ntica",
                text: "Qual patologia grave √© consequ√™ncia da fibrose de Symmers causada pelos ovos de Schistosoma mansoni?",
                options: [
                    "Insufici√™ncia renal aguda.",
                    "Hipertens√£o Portal.",
                    "Cirrose alco√≥lica.",
                    "Cardiomiopatia dilatada."
                ],
                correct: 1,
                explanation: "A fibrose nos espa√ßos porta obstrui o fluxo sangu√≠neo, elevando a press√£o na veia porta e levando a varizes e esplenomegalia."
            },
            {
                category: "Agress√£o Helm√≠ntica",
                text: "A Neurocisticercose √© causada pela ingest√£o de:",
                options: [
                    "Cisticercos presentes na carne de porco mal cozida.",
                    "Ovos de Taenia solium.",
                    "Ovos de Taenia saginata.",
                    "Larvas de Strongyloides stercoralis."
                ],
                correct: 1,
                explanation: "Ao ingerir o ovo (n√£o a carne), o humano atua como hospedeiro intermedi√°rio. O ovo eclode e libera a larva que migra para o c√©rebro."
            },
            {
                category: "Agress√£o Helm√≠ntica",
                text: "O 'Prolapso Retal' √© uma complica√ß√£o associada √† infec√ß√£o maci√ßa por qual helminto?",
                options: [
                    "Ascaris lumbricoides.",
                    "Trichuris trichiura.",
                    "Taenia solium.",
                    "Necator americanus."
                ],
                correct: 1,
                explanation: "A fixa√ß√£o do verme na mucosa retal e o tenesmo intenso (esfor√ßo para defecar) empurram a mucosa para fora, causando prolapso."
            },
            {
                category: "Agress√£o Helm√≠ntica",
                text: "O prurido anal noturno na Enterob√≠ase √© causado por:",
                options: [
                    "Mordida do verme na mucosa retal.",
                    "Migra√ß√£o da f√™mea para a regi√£o perianal e subst√¢ncia adesiva dos ovos.",
                    "Libera√ß√£o de toxinas sist√™micas.",
                    "Rea√ß√£o al√©rgica a alimentos."
                ],
                correct: 1,
                explanation: "A f√™mea sai √† noite para por ovos. A cola usada para fixar os ovos irrita a pele, causando a coceira intensa."
            },
            {
                category: "Agress√£o Helm√≠ntica",
                text: "Qual helminto √© conhecido por causar obstru√ß√£o intestinal aguda ('bolo de vermes') em crian√ßas com alta carga parasit√°ria?",
                options: [
                    "Ancylostoma duodenale.",
                    "Ascaris lumbricoides.",
                    "Enterobius vermicularis.",
                    "Schistosoma mansoni."
                ],
                correct: 1,
                explanation: "S√£o vermes grandes (20-30cm). V√°rios deles juntos formam um novelo que entope fisicamente o l√∫men do intestino."
            },

            // Agress√£o Protozo√°rios (9-12)
            {
                category: "Agress√£o Protozo√°rios",
                text: "Qual o mecanismo de agress√£o da Giardia lamblia que leva √† s√≠ndrome de m√° absor√ß√£o?",
                options: [
                    "Invas√£o da mucosa e destrui√ß√£o das criptas.",
                    "Forma√ß√£o de tapete mec√¢nico sobre a mucosa e atrofia das vilosidades.",
                    "Secre√ß√£o de neurotoxinas paralisantes.",
                    "Perfura√ß√£o da parede intestinal."
                ],
                correct: 1,
                explanation: "A barreira f√≠sica dos trofozo√≠tos e o achatamento das vilosidades impedem o contato dos nutrientes com o epit√©lio absortivo."
            },
            {
                category: "Agress√£o Protozo√°rios",
                text: "A √∫lcera em 'bot√£o de camisa' √© uma les√£o caracter√≠stica de qual protozo√°rio?",
                options: [
                    "Entamoeba histolytica.",
                    "Giardia lamblia.",
                    "Cryptosporidium parvum.",
                    "Balantidium coli."
                ],
                correct: 0,
                explanation: "A ameba destr√≥i a submucosa mais extensamente do que a mucosa superficial, criando uma √∫lcera com 'gargalo' estreito e base larga."
            },
            {
                category: "Agress√£o Protozo√°rios",
                text: "A disenteria amebiana (fezes com sangue e muco) √© causada por qual mecanismo da Entamoeba histolytica?",
                options: [
                    "Secre√ß√£o de enterotoxinas que aumentam AMPc.",
                    "A√ß√£o l√≠tica de enzimas (histolisinas) que destroem o tecido intestinal.",
                    "Competi√ß√£o por vitamina B12.",
                    "Obstru√ß√£o mec√¢nica do l√∫men."
                ],
                correct: 1,
                explanation: "O nome 'histolytica' significa 'quebra tecidos'. As enzimas digerem a parede intestinal, causando sangramento e invas√£o."
            },
            {
                category: "Agress√£o Protozo√°rios",
                text: "A esteatorreia (gordura nas fezes) na Giard√≠ase √© consequ√™ncia de:",
                options: [
                    "Destrui√ß√£o do p√¢ncreas pelo parasita.",
                    "Bloqueio da absor√ß√£o de gorduras pela barreira mec√¢nica e atrofia vilosit√°ria.",
                    "Aumento da secre√ß√£o de bile.",
                    "Sangramento digestivo alto."
                ],
                correct: 1,
                explanation: "O 'tapete' de parasitas e a perda das vilosidades impedem que as gorduras sejam absorvidas, saindo nas fezes."
            },

            // Imunologia (Th1/Th2) (13-24)
            {
                category: "Imunologia",
                text: "Qual perfil de resposta imunol√≥gica √© mais efetivo contra helmintos?",
                options: [
                    "Th1 (Celular).",
                    "Th2 (Humoral/Efetora).",
                    "Th17 (Neutrof√≠lica).",
                    "Treg (Reguladora)."
                ],
                correct: 1,
                explanation: "A resposta Th2 coordena a produ√ß√£o de IgE e ativa√ß√£o de eosin√≥filos, mast√≥citos e aumento de muco, essenciais para expulsar vermes."
            },
            {
                category: "Imunologia",
                text: "Qual √© a fun√ß√£o da Interleucina-5 (IL-5) na resposta Th2 contra helmintos?",
                options: [
                    "Ativar macr√≥fagos M1.",
                    "Recrutar e ativar Eosin√≥filos.",
                    "Induzir a troca de classe para IgG.",
                    "Suprimir a produ√ß√£o de muco."
                ],
                correct: 1,
                explanation: "A IL-5 √© o principal fator de crescimento e ativa√ß√£o para eosin√≥filos, as c√©lulas chave na destrui√ß√£o da cut√≠cula dos helmintos."
            },
            {
                category: "Imunologia",
                text: "O mecanismo de ADCC (Citotoxicidade Celular Dependente de Anticorpo) contra helmintos envolve qual intera√ß√£o?",
                options: [
                    "IgG ligada ao verme e Neutr√≥filos.",
                    "IgE ligada ao verme e Eosin√≥filos.",
                    "IgM ligada ao verme e Sistema Complemento.",
                    "IgA ligada ao verme e C√©lulas NK."
                ],
                correct: 1,
                explanation: "A IgE recobre o parasita e o eosin√≥filo se liga √† cauda da IgE, degranulando subst√¢ncias t√≥xicas diretamente sobre o helminto."
            },
            {
                category: "Imunologia",
                text: "A resposta Th1 √© crucial para a defesa contra protozo√°rios intracelulares (como Leishmania) porque:",
                options: [
                    "Estimula a produ√ß√£o de muco intestinal.",
                    "Libera IFN-gama que ativa a capacidade microbicida dos macr√≥fagos.",
                    "Aumenta a produ√ß√£o de IgE.",
                    "Recruta neutr√≥filos via IL-17."
                ],
                correct: 1,
                explanation: "O macr√≥fago precisa ser 'super-ativado' pelo IFN-gama para produzir √≥xido n√≠trico e matar o parasita que vive dentro dele."
            },
            {
                category: "Imunologia",
                text: "A Prote√≠na B√°sica Principal (MBP) √© uma toxina liberada por qual c√©lula na defesa contra helmintos?",
                options: [
                    "Neutr√≥filo.",
                    "Eosin√≥filo.",
                    "Macr√≥fago.",
                    "Mast√≥cito."
                ],
                correct: 1,
                explanation: "A MBP √© o principal componente dos gr√¢nulos dos eosin√≥filos e √© t√≥xica para a cut√≠cula dos vermes."
            },
            {
                category: "Imunologia",
                text: "Qual destas citocinas inibe a resposta Th1 e promove a resposta Th2, favorecendo a persist√™ncia de protozo√°rios intracelulares?",
                options: [
                    "Interferon-gama (IFN-gama).",
                    "Interleucina-12 (IL-12).",
                    "Interleucina-10 (IL-10).",
                    "TNF-alfa."
                ],
                correct: 2,
                explanation: "IL-10 √© uma citocina anti-inflamat√≥ria/regulat√≥ria que suprime a ativa√ß√£o de macr√≥fagos (Th1), permitindo que o parasita sobreviva."
            },
            {
                category: "Imunologia",
                text: "O que acontece se o organismo montar uma resposta Th2 contra um pat√≥geno intracelular como a Leishmania?",
                options: [
                    "O parasita √© eliminado rapidamente.",
                    "Ocorre a cura est√©ril.",
                    "A infec√ß√£o tende a progredir e se disseminar (forma difusa).",
                    "Ocorre intensa forma√ß√£o de granulomas eficazes."
                ],
                correct: 2,
                explanation: "√â um erro estrat√©gico. Sem a ativa√ß√£o Th1, o parasita se multiplica livremente dentro dos macr√≥fagos e a doen√ßa piora."
            },
            {
                category: "Imunologia",
                text: "Qual destas c√©lulas N√ÉO participa ativamente da resposta efetora Th2 contra helmintos?",
                options: [
                    "Mast√≥cito.",
                    "Eosin√≥filo.",
                    "Neutr√≥filo.",
                    "C√©lula Caliciforme (produtora de muco)."
                ],
                correct: 2,
                explanation: "Neutr√≥filos s√£o t√≠picos da resposta Th1/Th17 contra bact√©rias e fungos. Eles t√™m pouco efeito contra helmintos grandes."
            },
            {
                category: "Imunologia",
                text: "A resposta granulomatosa na Esquistossomose √© uma tentativa do sistema imune de:",
                options: [
                    "Matar o verme adulto.",
                    "Isolar os ovos do parasita e seus produtos t√≥xicos.",
                    "Regenerar o tecido hep√°tico.",
                    "Expulsar o parasita pela urina."
                ],
                correct: 1,
                explanation: "O ovo libera ant√≠genos sol√∫veis. O granuloma cerca o ovo para impedir que esses ant√≠genos danifiquem o resto do f√≠gado."
            },
            {
                category: "Imunologia",
                text: "O mecanismo de 'explos√£o respirat√≥ria' nos macr√≥fagos ativados por Th1 envolve a produ√ß√£o de:",
                options: [
                    "Histamina e Serotonina.",
                    "Esp√©cies Reativas de Oxig√™nio (EROs) e √ìxido N√≠trico.",
                    "Anticorpos neutralizantes.",
                    "Muco e Defensinas."
                ],
                correct: 1,
                explanation: "S√£o subst√¢ncias altamente t√≥xicas geradas para matar o pat√≥geno dentro do vac√∫olo fagoc√≠tico."
            },
            {
                category: "Imunologia",
                text: "A IL-13, secretada na resposta Th2, tem qual efeito fisiol√≥gico importante na expuls√£o de vermes?",
                options: [
                    "Lise direta da parede do verme.",
                    "Aumento da renova√ß√£o celular epitelial e contratilidade muscular (peristaltismo).",
                    "Indu√ß√£o de febre.",
                    "Ativa√ß√£o de c√©lulas NK."
                ],
                correct: 1,
                explanation: "A IL-13 faz o intestino se mover mais r√°pido (diarreia fisiol√≥gica) e trocar suas c√©lulas para 'desgrudar' o verme."
            },
            {
                category: "Imunologia",
                text: "A resposta imunol√≥gica do tipo 'Weep and Sweep' (Chorar e Varrer) contra helmintos refere-se a:",
                options: [
                    "Aumento de muco (chorar) e peristaltismo (varrer) mediados por Th2.",
                    "Fagocitose (varrer) e apresenta√ß√£o de ant√≠geno (chorar).",
                    "Destrui√ß√£o tecidual pelo parasita.",
                    "A√ß√£o de anticorpos neutralizantes."
                ],
                correct: 0,
                explanation: "√â uma analogia cl√°ssica. O intestino fica '√∫mido' (muco) e 'movimentado' (peristaltismo) para expulsar o invasor."
            },

            // Agress√£o Psicol√≥gica (25-28)
            {
                category: "Agress√£o Psicol√≥gica",
                text: "No contexto da agress√£o psicol√≥gica (estresse cr√¥nico), o aumento sustentado de Cortisol leva a:",
                options: [
                    "Hipertrofia do timo e aumento da imunidade celular.",
                    "Imunossupress√£o, com inibi√ß√£o de citocinas inflamat√≥rias e apoptose de linf√≥citos.",
                    "Aumento da sensibilidade √† insulina.",
                    "Ativa√ß√£o excessiva da resposta Th1."
                ],
                correct: 1,
                explanation: "O cortisol √© um potente anti-inflamat√≥rio end√≥geno. Em excesso cr√¥nico, ele desliga as defesas, facilitando infec√ß√µes."
            },
            {
                category: "Agress√£o Psicol√≥gica",
                text: "Qual √© o papel das catecolaminas (adrenalina/noradrenalina) no sistema imune durante o estresse agudo?",
                options: [
                    "Supress√£o total da medula √≥ssea.",
                    "Leucocitose transit√≥ria (desmarginaliza√ß√£o de leuc√≥citos).",
                    "Aumento da produ√ß√£o de anticorpos a longo prazo.",
                    "Inibi√ß√£o da glicogen√≥lise."
                ],
                correct: 1,
                explanation: "A adrenalina faz os leuc√≥citos que estavam 'grudados' nos vasos se soltarem e irem para o sangue, preparando o corpo para o perigo."
            },
            {
                category: "Agress√£o Psicol√≥gica",
                text: "A reativa√ß√£o de infec√ß√µes latentes (como Herpes ou Tuberculose) durante o estresse cr√¥nico √© explicada por:",
                options: [
                    "Aumento da vigil√¢ncia imunol√≥gica.",
                    "Supress√£o da imunidade celular (Th1) pelo cortisol.",
                    "Excesso de anticorpos IgE.",
                    "Aumento da produ√ß√£o de Interferons."
                ],
                correct: 1,
                explanation: "O cortisol desliga a resposta Th1, que √© quem mant√©m esses pat√≥genos 'presos' ou dormentes."
            },
            {
                category: "Parasitologia Cl√≠nica",
                text: "Qual das seguintes parasitoses N√ÉO apresenta eosinofilia significativa na fase cr√¥nica ou intestinal?",
                options: [
                    "Ascarid√≠ase.",
                    "Estrongiloid√≠ase.",
                    "Giard√≠ase.",
                    "Esquistossomose."
                ],
                correct: 2,
                explanation: "Protozo√°rios intraluminais como a Giardia, que n√£o invadem tecido, geralmente N√ÉO causam eosinofilia (resposta Th1 ou IgA)."
            },
            
            // Extras/Ciclo Biol√≥gico (29-30)
            {
                category: "Ciclo Biol√≥gico",
                text: "Qual a principal diferen√ßa no ciclo biol√≥gico que torna a Taenia solium mais perigosa que a Taenia saginata?",
                options: [
                    "A T. solium √© maior e consome mais sangue.",
                    "A T. solium possibilita que o humano atue como hospedeiro intermedi√°rio (cisticercose).",
                    "A T. solium causa prolapso retal.",
                    "A T. solium √© resistente a todos os medicamentos."
                ],
                correct: 1,
                explanation: "Ovos de T. saginata n√£o infectam humanos. Ovos de T. solium infectam humanos, causando cistos no c√©rebro."
            },
            {
                category: "Ciclo Biol√≥gico",
                text: "O ciclo de auto-infec√ß√£o externa do Strongyloides stercoralis envolve:",
                options: [
                    "Ingest√£o de ovos presentes na poeira.",
                    "Penetra√ß√£o de larvas infectantes (filarioides) na pele perianal originadas de fezes retidas.",
                    "Picada de inseto vetor.",
                    "Consumo de carne crua."
                ],
                correct: 1,
                explanation: "Restos de fezes na regi√£o perianal permitem que larvas rabditoides virem filarioides e penetrem ali mesmo."
            }
        ];

        // --- L√ìGICA DO QUIZ ---
        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;
        let userAnswers = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz(count) {
            score = 0;
            currentIndex = 0;
            userAnswers = [];
            
            const shuffled = shuffleArray([...allQuestions]); 
            currentQuestions = shuffled.slice(0, count);

            document.getElementById('screen-dashboard').style.display = 'none';
            document.getElementById('screen-quiz').style.display = 'block';

            renderQuestion();
        }

        function renderQuestion() {
            const q = currentQuestions[currentIndex];
            
            document.getElementById('quiz-title').innerText = `Quest√£o ${currentIndex + 1} de ${currentQuestions.length}`;
            document.getElementById('q-category').innerText = q.category;
            document.getElementById('q-text').innerText = q.text;
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';

            const progressPct = ((currentIndex) / currentQuestions.length) * 100;
            document.getElementById('progress').style.width = `${progressPct}%`;

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = ''; 

            q.options.forEach((opt, index) => {
                const btn = document.createElement('div');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(index, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, selectedBtn) {
            const optionsDivs = document.querySelectorAll('.option-btn');
            optionsDivs.forEach(div => div.onclick = null); 

            const q = currentQuestions[currentIndex];
            const isCorrect = selectedIndex === q.correct;

            if (isCorrect) {
                selectedBtn.classList.add('correct');
                score++;
                showFeedback(true, "Boa, gafanhoto! Essa voc√™ dominou.");
            } else {
                selectedBtn.classList.add('wrong');
                optionsDivs[q.correct].classList.add('correct');
                showFeedback(false, q.explanation);
            }

            document.getElementById('next-btn').style.display = 'block';
        }

        function showFeedback(isCorrect, text) {
            const fbBox = document.getElementById('feedback');
            const fbTitle = document.getElementById('feedback-title');
            const fbText = document.getElementById('feedback-text');

            fbBox.style.display = 'block';
            
            if (isCorrect) {
                fbBox.style.borderLeftColor = 'var(--accent-green)';
                fbTitle.innerText = "üéâ Certa Resposta!";
                fbTitle.style.color = 'var(--accent-green)';
                fbText.innerText = text; 
            } else {
                fbBox.style.borderLeftColor = 'var(--accent-red)';
                fbTitle.innerText = "üòÖ Calma, gafanhoto, veja a explica√ß√£o...";
                fbTitle.style.color = 'var(--accent-red)';
                fbText.innerText = text;
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                renderQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('screen-quiz').style.display = 'none';
            document.getElementById('screen-results').style.display = 'block';

            const percentage = Math.round((score / currentQuestions.length) * 100);
            const scoreCircle = document.getElementById('final-score');
            const msg = document.getElementById('score-message');

            scoreCircle.innerText = `${percentage}%`;

            if (percentage === 100) {
                scoreCircle.style.borderColor = 'var(--accent-green)';
                msg.innerText = "Excepcional! Voc√™ √© um mestre da Parasitologia! üèÜ";
            } else if (percentage >= 70) {
                scoreCircle.style.borderColor = 'var(--accent-blue)';
                msg.innerText = "Muito bom! Seus conhecimentos est√£o afiados. üëè";
            } else {
                scoreCircle.style.borderColor = 'var(--accent-orange)';
                msg.innerText = "Foi um bom treino, mas vale a pena revisar Th1 vs Th2. üí™";
            }
        }

    </script>
</body>
</html>