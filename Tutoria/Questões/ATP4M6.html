<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedHub - Quiz Patologia Avan√ßada</title>
    <style>
        :root {
            --bg-dark: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-purple: #8b5cf6;
            --accent-red: #ef4444;
            --gradient-blue: linear-gradient(135deg, #3b82f6, #2563eb);
            --gradient-green: linear-gradient(135deg, #10b981, #059669);
            --gradient-purple: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center; 
            overflow-y: auto;
        }

        /* Main Content Container */
        .main-content {
            width: 100%;
            max-width: 1000px; 
            padding: 40px;
        }

        .header {
            text-align: center; 
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.5rem; 
            margin-bottom: 10px;
            background: linear-gradient(90deg, #f8fafc, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 30px;
        }

        .card {
            padding: 30px;
            border-radius: 20px; 
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 220px; 
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255,255,255,0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .card:hover::after {
            opacity: 1;
        }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            background: rgba(255,255,255,0.2);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }

        .card h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .card p {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Quiz Interface */
        .quiz-container {
            display: none;
            max-width: 800px;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #334155;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-blue);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-card {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid #334155;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .question-badge {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 25px;
            display: inline-block;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 35px;
            line-height: 1.5;
            color: #e2e8f0;
        }

        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background-color: var(--bg-dark);
            border: 1px solid #334155;
            padding: 20px 25px;
            border-radius: 12px;
            color: var(--text-main);
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.05rem;
            display: flex;
            align-items: center;
        }

        .option-btn:hover {
            border-color: var(--accent-blue);
            background-color: rgba(59, 130, 246, 0.05);
            transform: translateX(5px);
        }

        .option-btn.correct {
            border-color: var(--accent-green);
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--accent-green);
        }

        .option-btn.wrong {
            border-color: var(--accent-red);
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--accent-red);
        }

        /* Feedback Modal */
        .feedback-overlay {
            display: none;
            margin-top: 25px;
            padding: 25px;
            border-radius: 12px;
            background-color: #0f172a; 
            border-left: 4px solid var(--accent-blue);
            animation: slideIn 0.3s ease;
        }

        .feedback-title {
            font-weight: bold;
            margin-bottom: 8px;
            display: block;
            font-size: 1.1rem;
        }

        .feedback-text {
            color: #cbd5e1;
            font-size: 1rem;
            line-height: 1.6;
        }

        .next-btn {
            margin-top: 25px;
            padding: 15px 40px;
            background: var(--gradient-blue);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            float: right;
            transition: opacity 0.2s;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .next-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* Results Screen */
        .results-container {
            display: none;
            text-align: center;
            padding: 50px;
            background-color: var(--card-bg);
            border-radius: 20px;
            max-width: 600px;
            margin: 0 auto;
            border: 1px solid #334155;
        }

        .score-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: 10px solid var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            font-weight: bold;
            margin: 30px auto;
            background: rgba(15, 23, 42, 0.5);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.2);
        }

        .restart-btn {
            padding: 15px 50px;
            background: var(--gradient-green);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 30px;
            font-weight: bold;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .restart-btn:hover {
            transform: translateY(-3px);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .main-content { padding: 20px; }
            .header h1 { font-size: 1.8rem; }
            .dashboard-grid { grid-template-columns: 1fr; }
            .card { height: 160px; }
        }
    </style>
</head>
<body>

    <!-- Main Content -->
    <div class="main-content">
        
        <!-- Screen 1: Dashboard / Selection -->
        <div id="screen-dashboard">
            <div class="header">
                <h1>Preparado para o n√≠vel Hard, nobre gafanhoto?</h1>
                <p>M√≥dulo Avan√ßado: Patologia e Farmacologia.</p>
            </div>

            <div class="dashboard-grid">
                <div class="card" style="background: var(--gradient-green)" onclick="startQuiz(10)">
                    <div class="card-icon">‚ö°</div>
                    <div>
                        <h3>Treino R√°pido</h3>
                        <p>10 Quest√µes aleat√≥rias</p>
                    </div>
                </div>

                <div class="card" style="background: var(--gradient-blue)" onclick="startQuiz(20)">
                    <div class="card-icon">üß†</div>
                    <div>
                        <h3>Treino Padr√£o</h3>
                        <p>20 Quest√µes aleat√≥rias</p>
                    </div>
                </div>

                <div class="card" style="background: var(--gradient-purple)" onclick="startQuiz(30)">
                    <div class="card-icon">üî•</div>
                    <div>
                        <h3>Maratona Completa</h3>
                        <p>Todas as 30 quest√µes</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Screen 2: Quiz -->
        <div id="screen-quiz" class="quiz-container">
            <div class="header">
                <h1 id="quiz-title" style="font-size: 2rem;">Quiz em Andamento</h1>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress"></div>
                </div>
            </div>

            <div class="question-card">
                <span class="question-badge" id="q-category">Categoria</span>
                <p class="question-text" id="q-text">Carregando pergunta...</p>
                
                <div class="options-grid" id="options-container">
                    <!-- Options injected via JS -->
                </div>

                <div class="feedback-overlay" id="feedback">
                    <span class="feedback-title" id="feedback-title">Resposta</span>
                    <p class="feedback-text" id="feedback-text">Explica√ß√£o aqui.</p>
                </div>

                <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">Pr√≥xima Quest√£o</button>
            </div>
        </div>

        <!-- Screen 3: Results -->
        <div id="screen-results" class="results-container">
            <h1 style="font-size: 2.5rem; color: var(--accent-green);">Treino Finalizado!</h1>
            <p style="color: var(--text-muted); margin-bottom: 30px;">Veja seu desempenho no M√≥dulo Avan√ßado.</p>
            
            <div class="score-circle" id="final-score">0%</div>
            
            <p id="score-message" style="font-size: 1.2rem; margin-bottom: 20px; line-height: 1.6;">Mensagem motivacional.</p>
            
            <button class="restart-btn" onclick="location.reload()">Novo Treino</button>
        </div>

    </div>

    <script>
        // --- BANCO DE QUEST√ïES DIF√çCEIS (30 ITENS) ---
        const allQuestions = [
            // Regenera√ß√£o Tecidual (1-5)
            {
                category: "Regenera√ß√£o Tecidual",
                text: "Por que a les√£o hep√°tica na cirrose resulta em fibrose e n√£o em regenera√ß√£o perfeita, apesar dos hepat√≥citos serem c√©lulas est√°veis?",
                options: [
                    "Porque os hepat√≥citos perdem a capacidade de mitose.",
                    "Porque h√° destrui√ß√£o da arquitetura da matriz reticular (esqueleto do f√≠gado).",
                    "Porque o f√≠gado se torna um tecido permanente.",
                    "Porque ocorre apoptose massiva dos ductos biliares."
                ],
                correct: 1,
                explanation: "Essa √© a pegadinha cl√°ssica! Hepat√≥citos regeneram, sim. Mas sem o 'esqueleto' de reticulina para gui√°-los, eles crescem desordenados, formando n√≥dulos e fibrose."
            },
            {
                category: "Regenera√ß√£o Tecidual",
                text: "Qual das seguintes c√©lulas √© classificada como 'Permanente' e, portanto, incapaz de entrar no ciclo celular ap√≥s uma les√£o?",
                options: [
                    "C√©lulas tubulares renais.",
                    "Fibroblastos.",
                    "Cardiomi√≥citos.",
                    "Hepat√≥citos."
                ],
                correct: 2,
                explanation: "O cora√ß√£o n√£o regenera m√∫sculo, ele cicatriza. Cardiomi√≥citos e Neur√¥nios sa√≠ram do ciclo celular para sempre (p√≥s-mit√≥ticos)."
            },
            {
                category: "Regenera√ß√£o Tecidual",
                text: "As c√©lulas 'Est√°veis' encontram-se, em condi√ß√µes normais, em qual fase do ciclo celular?",
                options: [
                    "G1 (crescimento).",
                    "S (s√≠ntese).",
                    "G0 (quiesc√™ncia).",
                    "M (mitose)."
                ],
                correct: 2,
                explanation: "Elas est√£o 'dormindo' (quiescentes) em G0. S√≥ acordam e entram no ciclo se houver um est√≠mulo, como uma les√£o."
            },
            {
                category: "Regenera√ß√£o Tecidual",
                text: "Qual tecido abaixo √© exemplo de c√©lulas 'Labeis', que est√£o em ciclo cont√≠nuo?",
                options: [
                    "Tecido √≥sseo.",
                    "P√¢ncreas ex√≥crino.",
                    "Epit√©lio do trato gastrointestinal.",
                    "M√∫sculo esquel√©tico."
                ],
                correct: 2,
                explanation: "Pense no desgaste: o intestino troca seu revestimento o tempo todo. C√©lulas labeis nunca param de dividir."
            },
            {
                category: "Regenera√ß√£o Tecidual",
                text: "A hiperplasia compensat√≥ria √© um fen√¥meno t√≠pico de qual tipo celular?",
                options: [
                    "C√©lulas Permanentes.",
                    "C√©lulas Est√°veis.",
                    "C√©lulas Apopt√≥ticas.",
                    "C√©lulas Senescentes."
                ],
                correct: 1,
                explanation: "√â o que acontece quando voc√™ doa um peda√ßo do f√≠gado. As c√©lulas restantes (est√°veis) entram em mitose para compensar a perda."
            },

            // Les√£o e Morte Celular (6-11)
            {
                category: "Les√£o e Morte",
                text: "Bioquimicamente, por que a Isquemia causa les√£o tecidual mais rapidamente do que a Hip√≥xia isolada?",
                options: [
                    "Porque a isquemia aumenta a produ√ß√£o de ATP mitocondrial.",
                    "Porque na isquemia h√° ac√∫mulo de metab√≥litos t√≥xicos e acidose (falta de drenagem).",
                    "Porque a hip√≥xia mant√©m o ciclo de Krebs funcionando.",
                    "N√£o h√° diferen√ßa, o tempo de les√£o √© o mesmo."
                ],
                correct: 1,
                explanation: "Na isquemia, o fluxo para. N√£o chega comida (glicose) e o lixo (√°cido l√°tico) n√£o sai. A acidose resultante mata a c√©lula muito mais r√°pido."
            },
            {
                category: "Les√£o e Morte",
                text: "Qual caracter√≠stica morfol√≥gica √© exclusiva da NECROSE e ausente na Apoptose?",
                options: [
                    "Retra√ß√£o celular.",
                    "Ruptura da membrana plasm√°tica e inflama√ß√£o.",
                    "Forma√ß√£o de corpos apopt√≥ticos.",
                    "Condensa√ß√£o da cromatina sem inflama√ß√£o."
                ],
                correct: 1,
                explanation: "Necrose √© uma morte suja: a c√©lula explode, vaza conte√∫do e chama inflama√ß√£o. Apoptose √© limpa e silenciosa."
            },
            {
                category: "Les√£o e Morte",
                text: "O infarto cerebral difere dos infartos em outros √≥rg√£os (como rim e cora√ß√£o) por apresentar qual tipo de necrose?",
                options: [
                    "Necrose Coagulativa.",
                    "Necrose Caseosa.",
                    "Necrose Liquefativa.",
                    "Necrose Gangrenosa."
                ],
                correct: 2,
                explanation: "O c√©rebro √© rico em lip√≠dios e enzimas l√≠ticas. Quando morre, ele vira uma 'sopa' l√≠quida, n√£o coagula como o cora√ß√£o."
            },
            {
                category: "Les√£o e Morte",
                text: "A cariorrexe √© um evento nuclear caracterizado por:",
                options: [
                    "Dissolu√ß√£o completa do n√∫cleo.",
                    "Condensa√ß√£o e encolhimento do n√∫cleo.",
                    "Fragmenta√ß√£o do n√∫cleo picn√≥tico.",
                    "Duplica√ß√£o do DNA nuclear."
                ],
                correct: 2,
                explanation: "√â a sequ√™ncia da morte: Picnose (encolhe) -> Cariorrexe (quebra em peda√ßos) -> Cari√≥lise (desaparece)."
            },
            {
                category: "Les√£o e Morte",
                text: "Na apoptose, a integridade da membrana plasm√°tica √© mantida inicialmente. O que sinaliza aos fag√≥citos para comerem a c√©lula morta?",
                options: [
                    "Vazamento de enzimas lisossomais.",
                    "Exposi√ß√£o de fosfatidilserina na face externa da membrana.",
                    "Libera√ß√£o de histamina.",
                    "Aumento do pH intracelular."
                ],
                correct: 1,
                explanation: "Detalhe molecular fino! A c√©lula apopt√≥tica vira a membrana do avesso (flip-flop), expondo fosfatidilserina, que age como um sinal de 'coma-me'."
            },
            {
                category: "Les√£o e Morte",
                text: "A necrose caseosa ('aspecto de queijo') √© a marca registrada de qual patologia?",
                options: [
                    "Infarto agudo do mioc√°rdio.",
                    "Pancreatite aguda.",
                    "Tuberculose.",
                    "Gangrena diab√©tica."
                ],
                correct: 2,
                explanation: "Caseosa = Tuberculose. √â uma mistura de necrose coagulativa e liquefativa causada pela resposta imune ao bacilo."
            },

            // Anti-inflamat√≥rios (12-17)
            {
                category: "Farmacologia",
                text: "Qual √© o mecanismo molecular exato pelo qual os Corticoides (Esteroidais) exercem seu potente efeito anti-inflamat√≥rio?",
                options: [
                    "Inibi√ß√£o direta da COX-2.",
                    "Bloqueio dos receptores de leucotrienos.",
                    "Indu√ß√£o da Lipocortina (Anexina-1), que inibe a Fosfolipase A2.",
                    "Aumento da produ√ß√£o de √Åcido Araquid√¥nico."
                ],
                correct: 2,
                explanation: "Eles agem na raiz do problema! Inibindo a Fosfolipase A2, eles cortam o suprimento de √Åcido Araquid√¥nico, parando TUDO (Prostaglandinas e Leucotrienos)."
            },
            {
                category: "Farmacologia",
                text: "Por que o uso cr√¥nico de AINEs n√£o seletivos (como Aspirina e Ibuprofeno) causa gastrite e √∫lceras?",
                options: [
                    "Porque eles aumentam a acidez estomacal diretamente.",
                    "Porque inibem a COX-1, reduzindo prostaglandinas que protegem a mucosa g√°strica.",
                    "Porque inibem a COX-2, que √© constitutiva no est√¥mago.",
                    "Porque aumentam a produ√ß√£o de tromboxanos."
                ],
                correct: 1,
                explanation: "A COX-1 √© a 'boazinha', ela produz o muco protetor do est√¥mago. AINEs velhos batem na COX-1 e na COX-2, tirando essa prote√ß√£o."
            },
            {
                category: "Farmacologia",
                text: "Os inibidores seletivos da COX-2 (Coxibes) foram criados para reduzir danos g√°stricos, mas apresentam risco aumentado de:",
                options: [
                    "Insufici√™ncia hep√°tica.",
                    "Eventos cardiovasculares tromb√≥ticos.",
                    "Hemorragias incontrol√°veis.",
                    "Imunossupress√£o severa."
                ],
                correct: 1,
                explanation: "Ao inibir s√≥ a COX-2, voc√™ reduz a inflama√ß√£o, mas desequilibra a coagula√ß√£o a favor dos trombos, aumentando risco de infarto."
            },
            {
                category: "Farmacologia",
                text: "Qual via do √°cido araquid√¥nico √© respons√°vel pela produ√ß√£o de Leucotrienos (mediadores da asma)?",
                options: [
                    "Via da Ciclooxigenase (COX).",
                    "Via da Lipoxigenase (LOX).",
                    "Via do Citocromo P450.",
                    "Via da Adenilato Ciclase."
                ],
                correct: 1,
                explanation: "Aspirina bloqueia a COX, mas deixa a via da LOX livre (ou at√© sobrecarregada), produzindo mais leucotrienos. Por isso asm√°ticos podem ter crise com aspirina."
            },
            {
                category: "Farmacologia",
                text: "A enzima Fosfolipase A2 atua sobre qual substrato para iniciar a cascata inflamat√≥ria?",
                options: [
                    "Prote√≠nas do citosol.",
                    "Fosfolip√≠dios da membrana celular.",
                    "Colesterol livre.",
                    "Glicog√™nio hep√°tico."
                ],
                correct: 1,
                explanation: "A cascata come√ßa na membrana! A les√£o exp√µe os fosfolip√≠dios, e a enzima vem 'morder' para soltar o √°cido araquid√¥nico."
            },
            {
                category: "Farmacologia",
                text: "Qual destes mediadores √© produto da via da COX e promove agrega√ß√£o plaquet√°ria e vasoconstri√ß√£o?",
                options: [
                    "Prostaciclina.",
                    "Tromboxano A2.",
                    "Leucotrieno B4.",
                    "Lipocortina."
                ],
                correct: 1,
                explanation: "Tromboxano (TXA2) √© o vil√£o do trombo. Ele faz as plaquetas grudarem e os vasos fecharem."
            },

            // Coagula√ß√£o (18-24)
            {
                category: "Coagula√ß√£o",
                text: "O exame de Tempo de Tromboplastina Parcial Ativada (TTPA) avalia principalmente qual via da coagula√ß√£o?",
                options: [
                    "Via Extr√≠nseca.",
                    "Via Intr√≠nseca.",
                    "Fibrin√≥lise.",
                    "Fun√ß√£o Plaquet√°ria."
                ],
                correct: 1,
                explanation: "TTPA = Intr√≠nseca (Fatores XII, XI, IX, VIII). O TP (Tempo de Protrombina) √© que avalia a Extr√≠nseca (Fator VII)."
            },
            {
                category: "Coagula√ß√£o",
                text: "Qual fator inicia a Via Extr√≠nseca da coagula√ß√£o?",
                options: [
                    "Fator XII (Hageman).",
                    "Fator Tecidual (Fator III).",
                    "Fator VIII.",
                    "Fator X."
                ],
                correct: 1,
                explanation: "Extr√≠nseca vem de 'fora'. A les√£o do tecido libera o Fator Tecidual (III) que ativa o Fator VII."
            },
            {
                category: "Coagula√ß√£o",
                text: "A Varfarina age como anticoagulante inibindo qual mecanismo?",
                options: [
                    "A agrega√ß√£o plaquet√°ria direta.",
                    "A atividade da Trombina.",
                    "A reciclagem da Vitamina K.",
                    "A ativa√ß√£o do Fator X."
                ],
                correct: 2,
                explanation: "Sem Vitamina K reduzida (reciclada), o f√≠gado n√£o consegue terminar de fabricar os fatores II, VII, IX e X."
            },
            {
                category: "Coagula√ß√£o",
                text: "Qual √© a fun√ß√£o do Complexo Protrombinase (Xa + V + Ca + PL)?",
                options: [
                    "Converter Fibrinog√™nio em Fibrina.",
                    "Ativar o Fator XII.",
                    "Converter Protrombina em Trombina.",
                    "Dissolver o co√°gulo."
                ],
                correct: 2,
                explanation: "O nome j√° diz: Protrombinase √© a enzima que quebra a Protrombina para virar Trombina (o maestro da coagula√ß√£o)."
            },
            {
                category: "Coagula√ß√£o",
                text: "Quais fatores de coagula√ß√£o s√£o dependentes de Vitamina K?",
                options: [
                    "I, II, III e IV.",
                    "V, VIII, XI e XIII.",
                    "II, VII, IX e X.",
                    "XII, XI, IX e VIII."
                ],
                correct: 2,
                explanation: "Decoreba cl√°ssica de prova: 2, 7, 9 e 10 (II, VII, IX, X). S√£o os alvos da Varfarina."
            },
            {
                category: "Coagula√ß√£o",
                text: "A Hemofilia A √© causada pela defici√™ncia de qual fator da via intr√≠nseca?",
                options: [
                    "Fator VIII.",
                    "Fator IX.",
                    "Fator XI.",
                    "Fator VII."
                ],
                correct: 0,
                explanation: "Hemofilia A = Fator VIII (oito). Hemofilia B = Fator IX (nove). Ambas afetam a via intr√≠nseca (alargam o TTPA)."
            },
            {
                category: "Coagula√ß√£o",
                text: "Qual √© o produto final insol√∫vel da cascata de coagula√ß√£o?",
                options: [
                    "Fibrinog√™nio.",
                    "Trombina.",
                    "Fibrina.",
                    "Plasmina."
                ],
                correct: 2,
                explanation: "Todo o esfor√ßo da cascata √© para transformar o Fibrinog√™nio (l√≠quido) em uma rede de Fibrina (s√≥lida) para segurar o sangue."
            },

            // Mecanismos F√≠sico-Mec√¢nicos (25-30)
            {
                category: "Trauma e Toxinas",
                text: "Na intoxica√ß√£o por Paracetamol, qual √© o metab√≥lito respons√°vel pela necrose hep√°tica?",
                options: [
                    "√Åcido glucur√¥nico.",
                    "Sulfato de paracetamol.",
                    "NAPQI (N-acetil-p-benzoquinona imina).",
                    "Citocromo P450."
                ],
                correct: 2,
                explanation: "O NAPQI √© o vil√£o. Normalmente a glutationa neutraliza ele, mas em overdose, a glutationa acaba e o NAPQI destr√≥i os hepat√≥citos."
            },
            {
                category: "Trauma e Toxinas",
                text: "Qual √© o principal mecanismo de les√£o celular causado pela radia√ß√£o ionizante indireta (radi√≥lise da √°gua)?",
                options: [
                    "Aquecimento do tecido.",
                    "Forma√ß√£o de radicais livres (ROS), como o radical hidroxila.",
                    "Quebra direta da fita de DNA.",
                    "Inibi√ß√£o da s√≠ntese proteica."
                ],
                correct: 1,
                explanation: "A radia√ß√£o bate na √°gua, quebra ela e cria radicais livres (oxidantes) que atacam a c√©lula. Isso √© o efeito indireto."
            },
            {
                category: "Trauma e Toxinas",
                text: "Em grandes queimados, a principal causa imediata de risco √† vida (choque) √©:",
                options: [
                    "Infec√ß√£o bacteriana (sepse).",
                    "Dor intensa.",
                    "Hipovolemia por aumento massivo da permeabilidade vascular.",
                    "Inala√ß√£o de fuma√ßa."
                ],
                correct: 2,
                explanation: "O paciente 'vaza' por dentro. A inflama√ß√£o sist√™mica abre tanto os vasos que o l√≠quido do sangue foge para os tecidos, causando choque hipovol√™mico."
            },
            {
                category: "Trauma e Toxinas",
                text: "A les√£o por congelamento (hipotermia severa) causa dano tecidual principalmente por:",
                options: [
                    "Acelera√ß√£o do metabolismo celular.",
                    "Cristaliza√ß√£o da √°gua intracelular e isquemia por vasoconstri√ß√£o.",
                    "Desnatura√ß√£o proteica pelo calor.",
                    "Ac√∫mulo de radicais livres."
                ],
                correct: 1,
                explanation: "Cristais de gelo agem como facas furando a membrana, e o frio fecha os vasos (vasoconstri√ß√£o) causando isquemia."
            },
            {
                category: "Trauma e Toxinas",
                text: "Por que tecidos com alta taxa mit√≥tica (como medula √≥ssea) s√£o mais sens√≠veis √† radia√ß√£o?",
                options: [
                    "Porque t√™m mais √°gua.",
                    "Porque o DNA est√° descondensado e vulner√°vel durante a mitose.",
                    "Porque t√™m menos antioxidantes.",
                    "Porque s√£o mais vascularizados."
                ],
                correct: 1,
                explanation: "C√©lula dividindo √© c√©lula exposta. O DNA aberto para replica√ß√£o √© um alvo f√°cil para a radia√ß√£o quebrar."
            },
            {
                category: "Trauma e Toxinas",
                text: "O ant√≠doto N-acetilciste√≠na (NAC) usado na overdose de paracetamol funciona:",
                options: [
                    "Bloqueando a absor√ß√£o do paracetamol.",
                    "Inibindo o Citocromo P450.",
                    "Repondo os estoques de Glutationa para neutralizar o NAPQI.",
                    "Aumentando a excre√ß√£o renal."
                ],
                correct: 2,
                explanation: "O NAC fornece ciste√≠na, que √© o 'tijolo' que falta para o f√≠gado fabricar mais Glutationa e conseguir neutralizar a toxina."
            }
        ];

        // --- L√ìGICA DO QUIZ ---
        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;
        let userAnswers = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz(count) {
            score = 0;
            currentIndex = 0;
            userAnswers = [];
            
            const shuffled = shuffleArray([...allQuestions]); 
            currentQuestions = shuffled.slice(0, count);

            document.getElementById('screen-dashboard').style.display = 'none';
            document.getElementById('screen-quiz').style.display = 'block';

            renderQuestion();
        }

        function renderQuestion() {
            const q = currentQuestions[currentIndex];
            
            document.getElementById('quiz-title').innerText = `Quest√£o ${currentIndex + 1} de ${currentQuestions.length}`;
            document.getElementById('q-category').innerText = q.category;
            document.getElementById('q-text').innerText = q.text;
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';

            const progressPct = ((currentIndex) / currentQuestions.length) * 100;
            document.getElementById('progress').style.width = `${progressPct}%`;

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = ''; 

            q.options.forEach((opt, index) => {
                const btn = document.createElement('div');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(index, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, selectedBtn) {
            const optionsDivs = document.querySelectorAll('.option-btn');
            optionsDivs.forEach(div => div.onclick = null); 

            const q = currentQuestions[currentIndex];
            const isCorrect = selectedIndex === q.correct;

            if (isCorrect) {
                selectedBtn.classList.add('correct');
                score++;
                showFeedback(true, "Mandou bem! Resposta correta.");
            } else {
                selectedBtn.classList.add('wrong');
                optionsDivs[q.correct].classList.add('correct');
                showFeedback(false, q.explanation);
            }

            document.getElementById('next-btn').style.display = 'block';
        }

        function showFeedback(isCorrect, text) {
            const fbBox = document.getElementById('feedback');
            const fbTitle = document.getElementById('feedback-title');
            const fbText = document.getElementById('feedback-text');

            fbBox.style.display = 'block';
            
            if (isCorrect) {
                fbBox.style.borderLeftColor = 'var(--accent-green)';
                fbTitle.innerText = "üéâ Na mosca!";
                fbTitle.style.color = 'var(--accent-green)';
                fbText.innerText = text; 
            } else {
                fbBox.style.borderLeftColor = 'var(--accent-red)';
                fbTitle.innerText = "üòÖ Calma, gafanhoto, pensa comigo...";
                fbTitle.style.color = 'var(--accent-red)';
                fbText.innerText = text;
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                renderQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('screen-quiz').style.display = 'none';
            document.getElementById('screen-results').style.display = 'block';

            const percentage = Math.round((score / currentQuestions.length) * 100);
            const scoreCircle = document.getElementById('final-score');
            const msg = document.getElementById('score-message');

            scoreCircle.innerText = `${percentage}%`;

            if (percentage === 100) {
                scoreCircle.style.borderColor = 'var(--accent-green)';
                msg.innerText = "Lend√°rio! Voc√™ dominou a Patologia Avan√ßada! üèÜ";
            } else if (percentage >= 70) {
                scoreCircle.style.borderColor = 'var(--accent-blue)';
                msg.innerText = "Muito bom! Seus conceitos est√£o s√≥lidos. üëè";
            } else {
                scoreCircle.style.borderColor = 'var(--accent-orange)';
                msg.innerText = "O n√≠vel estava alto! Vale revisar os mecanismos moleculares. üí™";
            }
        }

    </script>
</body>
</html>