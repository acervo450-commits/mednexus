<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedHub - Quiz de Imunologia</title>
    <style>
        :root {
            --bg-dark: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-purple: #8b5cf6;
            --accent-red: #ef4444;
            --gradient-blue: linear-gradient(135deg, #3b82f6, #2563eb);
            --gradient-green: linear-gradient(135deg, #10b981, #059669);
            --gradient-purple: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center; /* Centraliza verticalmente */
            overflow-y: auto;
        }

        /* Main Content Container */
        .main-content {
            width: 100%;
            max-width: 1000px; /* Limita a largura para ficar bonito no centro */
            padding: 40px;
        }

        .header {
            text-align: center; /* Centraliza o texto do t√≠tulo */
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 2.5rem; /* Aumentei um pouco */
            margin-bottom: 10px;
            background: linear-gradient(90deg, #f8fafc, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Cart√µes um pouco mais largos */
            gap: 30px;
        }

        .card {
            padding: 30px;
            border-radius: 20px; /* Mais arredondado */
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 220px; /* Cart√µes mais altos */
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        /* Efeito de brilho no hover */
        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255,255,255,0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .card:hover::after {
            opacity: 1;
        }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            background: rgba(255,255,255,0.2);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }

        .card h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .card p {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Quiz Interface */
        .quiz-container {
            display: none;
            max-width: 800px;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #334155;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-blue);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-card {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid #334155;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .question-badge {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 25px;
            display: inline-block;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 35px;
            line-height: 1.5;
            color: #e2e8f0;
        }

        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background-color: var(--bg-dark);
            border: 1px solid #334155;
            padding: 20px 25px;
            border-radius: 12px;
            color: var(--text-main);
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.05rem;
            display: flex;
            align-items: center;
        }

        .option-btn:hover {
            border-color: var(--accent-blue);
            background-color: rgba(59, 130, 246, 0.05);
            transform: translateX(5px);
        }

        .option-btn.correct {
            border-color: var(--accent-green);
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--accent-green);
        }

        .option-btn.wrong {
            border-color: var(--accent-red);
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--accent-red);
        }

        /* Feedback Modal */
        .feedback-overlay {
            display: none;
            margin-top: 25px;
            padding: 25px;
            border-radius: 12px;
            background-color: #0f172a; /* Mais escuro para contraste */
            border-left: 4px solid var(--accent-blue);
            animation: slideIn 0.3s ease;
        }

        .feedback-title {
            font-weight: bold;
            margin-bottom: 8px;
            display: block;
            font-size: 1.1rem;
        }

        .feedback-text {
            color: #cbd5e1;
            font-size: 1rem;
            line-height: 1.6;
        }

        .next-btn {
            margin-top: 25px;
            padding: 15px 40px;
            background: var(--gradient-blue);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            float: right;
            transition: opacity 0.2s;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .next-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* Results Screen */
        .results-container {
            display: none;
            text-align: center;
            padding: 50px;
            background-color: var(--card-bg);
            border-radius: 20px;
            max-width: 600px;
            margin: 0 auto;
            border: 1px solid #334155;
        }

        .score-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: 10px solid var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            font-weight: bold;
            margin: 30px auto;
            background: rgba(15, 23, 42, 0.5);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.2);
        }

        .restart-btn {
            padding: 15px 50px;
            background: var(--gradient-green);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 30px;
            font-weight: bold;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .restart-btn:hover {
            transform: translateY(-3px);
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .main-content { padding: 20px; }
            .header h1 { font-size: 1.8rem; }
            .dashboard-grid { grid-template-columns: 1fr; }
            .card { height: 160px; }
        }
    </style>
</head>
<body>

    <!-- Main Content (Sem Sidebar) -->
    <div class="main-content">
        
        <!-- Screen 1: Dashboard / Selection -->
        <div id="screen-dashboard">
            <div class="header">
                <h1>Boa sorte nas quest√µes, meu nobre gafanhoto</h1>
                <p>Selecione seu n√≠vel de desafio e mostre o que sabe sobre Imunologia.</p>
            </div>

            <div class="dashboard-grid">
                <div class="card" style="background: var(--gradient-green)" onclick="startQuiz(10)">
                    <div class="card-icon">‚ö°</div>
                    <div>
                        <h3>Treino R√°pido</h3>
                        <p>10 Quest√µes aleat√≥rias</p>
                    </div>
                </div>

                <div class="card" style="background: var(--gradient-blue)" onclick="startQuiz(20)">
                    <div class="card-icon">üß†</div>
                    <div>
                        <h3>Treino Padr√£o</h3>
                        <p>20 Quest√µes aleat√≥rias</p>
                    </div>
                </div>

                <div class="card" style="background: var(--gradient-purple)" onclick="startQuiz(30)">
                    <div class="card-icon">üî•</div>
                    <div>
                        <h3>Maratona Completa</h3>
                        <p>Todas as 30 quest√µes</p>
                    </div>
                </div>
                
                <!-- Card de revis√£o removido conforme pedido -->
            </div>
        </div>

        <!-- Screen 2: Quiz -->
        <div id="screen-quiz" class="quiz-container">
            <div class="header">
                <h1 id="quiz-title" style="font-size: 2rem;">Quiz em Andamento</h1>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress"></div>
                </div>
            </div>

            <div class="question-card">
                <span class="question-badge" id="q-category">Categoria</span>
                <p class="question-text" id="q-text">Carregando pergunta...</p>
                
                <div class="options-grid" id="options-container">
                    <!-- Options injected via JS -->
                </div>

                <div class="feedback-overlay" id="feedback">
                    <span class="feedback-title" id="feedback-title">Resposta</span>
                    <p class="feedback-text" id="feedback-text">Explica√ß√£o aqui.</p>
                </div>

                <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">Pr√≥xima Quest√£o</button>
            </div>
        </div>

        <!-- Screen 3: Results -->
        <div id="screen-results" class="results-container">
            <h1 style="font-size: 2.5rem; color: var(--accent-green);">Treino Finalizado!</h1>
            <p style="color: var(--text-muted); margin-bottom: 30px;">Veja como foi seu desempenho nos √≥rg√£os linfoides e defesas.</p>
            
            <div class="score-circle" id="final-score">0%</div>
            
            <p id="score-message" style="font-size: 1.2rem; margin-bottom: 20px; line-height: 1.6;">Mensagem motivacional.</p>
            
            <button class="restart-btn" onclick="location.reload()">Novo Treino</button>
        </div>

    </div>

    <script>
        // --- BANCO DE QUEST√ïES (30 ITENS) ---
        const allQuestions = [
            // √ìrg√£os Linfoides (1-6)
            {
                category: "√ìrg√£os Linfoides",
                text: "Qual das alternativas abaixo define corretamente a principal fun√ß√£o dos √≥rg√£os linfoides prim√°rios?",
                options: [
                    "Capturar ant√≠genos que entram pela pele.",
                    "Filtrar o sangue removendo hem√°cias velhas.",
                    "Produzir e maturar linf√≥citos (educa√ß√£o celular).",
                    "Ativar a resposta imune contra pat√≥genos."
                ],
                correct: 2,
                explanation: "Foi quase! Lembre-se que 'Prim√°rio' vem de 'Primeiro'. √â onde tudo come√ßa: a produ√ß√£o e a educa√ß√£o das c√©lulas. Capturar e ativar s√£o fun√ß√µes dos secund√°rios (o campo de batalha)."
            },
            {
                category: "√ìrg√£os Linfoides",
                text: "Onde ocorre a matura√ß√£o final dos Linf√≥citos T?",
                options: [
                    "Medula √ìssea",
                    "Timo",
                    "Linfonodos",
                    "Ba√ßo"
                ],
                correct: 1,
                explanation: "Cuidado com a pegadinha! Eles NASCEM na medula, mas o nome 'Linf√≥cito T' vem justamente de TIMO, que √© onde eles v√£o para terminar a escola (matura√ß√£o)."
            },
            {
                category: "√ìrg√£os Linfoides",
                text: "Um paciente sofreu um acidente e precisou retirar o ba√ßo (esplenectomia). Qual fun√ß√£o imunol√≥gica ficar√° prejudicada?",
                options: [
                    "Matura√ß√£o de linf√≥citos T.",
                    "Filtragem da linfa vinda dos tecidos.",
                    "Prote√ß√£o contra microrganismos no sangue (bacteremias).",
                    "Produ√ß√£o de c√©lulas-tronco hematopo√©ticas."
                ],
                correct: 2,
                explanation: "Pense na anatomia: o ba√ßo est√° ligado aos vasos sangu√≠neos, n√£o aos linf√°ticos. Sem ele, o sangue perde seu filtro principal, deixando o paciente exposto a bact√©rias que circulam no sangue."
            },
            {
                category: "√ìrg√£os Linfoides",
                text: "Os linfonodos atuam como filtros para qual fluido corporal?",
                options: [
                    "Sangue",
                    "Linfa",
                    "L√≠quido cefalorraquidiano",
                    "Suco g√°strico"
                ],
                correct: 1,
                explanation: "N√£o confunda! O Ba√ßo filtra o sangue. Os LINFOnodos filtram a LINFA, drenando o que vem dos tecidos antes de devolver ao sangue."
            },
            {
                category: "√ìrg√£os Linfoides",
                text: "Qual destes √≥rg√£os √© respons√°vel pela sele√ß√£o positiva e negativa para evitar autoimunidade nos linf√≥citos T?",
                options: [
                    "MALT",
                    "Medula √ìssea",
                    "Timo",
                    "Placas de Peyer"
                ],
                correct: 2,
                explanation: "Essa sele√ß√£o rigorosa acontece na 'escola' dos linf√≥citos T. Se eles atacarem o pr√≥prio corpo durante o teste, s√£o eliminados l√° no Timo mesmo."
            },
            {
                category: "√ìrg√£os Linfoides",
                text: "O que significa a sigla MALT?",
                options: [
                    "Tecido Linfoide Associado √† Mucosa",
                    "Mecanismo Ativo de Limpeza T√≠mica",
                    "Medula Associada aos Linf√≥citos T",
                    "Macr√≥fagos Ativos no L√∫men Total"
                ],
                correct: 0,
                explanation: "MALT vem do ingl√™s 'Mucosa-Associated Lymphoid Tissue'. S√£o os 'postos de guarda' nas portas de entrada como intestino e pulm√£o."
            },
            // Hematopoese (7-12)
            {
                category: "Hematopoese",
                text: "Na vida adulta, qual √© o principal local de hematopoese (forma√ß√£o do sangue)?",
                options: [
                    "F√≠gado",
                    "Saco vitel√≠nico",
                    "Ba√ßo",
                    "Medula √ìssea Vermelha"
                ],
                correct: 3,
                explanation: "No feto, o f√≠gado e o ba√ßo ajudam, mas no adulto saud√°vel, a f√°brica do sangue √© exclusivamente a Medula √ìssea Vermelha."
            },
            {
                category: "Hematopoese",
                text: "Quais c√©lulas s√£o originadas a partir do Progenitor Mieloide Comum?",
                options: [
                    "Linf√≥citos B, T e NK",
                    "Apenas hem√°cias",
                    "Granul√≥citos, Mon√≥citos, Hem√°cias e Plaquetas",
                    "Apenas Linf√≥citos e Plasm√≥citos"
                ],
                correct: 2,
                explanation: "Lembra da divis√£o? Linfoide faz linf√≥citos. Mieloide faz TODO O RESTO (hem√°cias, plaquetas e a galera da imunidade inata como neutr√≥filos)."
            },
            {
                category: "Hematopoese",
                text: "Qual c√©lula abaixo pertence √† linhagem LINFOIDE, mas atua na imunidade INATA?",
                options: [
                    "Linf√≥cito B",
                    "Neutr√≥filo",
                    "C√©lula NK (Natural Killer)",
                    "Linf√≥cito T CD4"
                ],
                correct: 2,
                explanation: "Essa √© a exce√ß√£o √† regra! A NK √© irm√£ dos linf√≥citos (linha linfoide), mas age r√°pido e sem especificidade, como o pessoal da inata."
            },
            {
                category: "Hematopoese",
                text: "Os neutr√≥filos s√£o caracterizados por possu√≠rem:",
                options: [
                    "N√∫cleo redondo e grande produ√ß√£o de anticorpos.",
                    "N√∫cleo segmentado e gr√¢nulos citoplasm√°ticos.",
                    "Capacidade de virar plasm√≥citos.",
                    "Origem no Timo."
                ],
                correct: 1,
                explanation: "Neutr√≥filos s√£o granul√≥citos e polimorfonucleares. Eles t√™m o n√∫cleo todo 'quebrado' (segmentado) e gr√¢nulos para destruir bact√©rias."
            },
            {
                category: "Hematopoese",
                text: "O processo de dele√ß√£o clonal na medula √≥ssea serve para:",
                options: [
                    "Eliminar Linf√≥citos B que reconhecem o pr√≥prio corpo (autoimunes).",
                    "Aumentar a produ√ß√£o de hem√°cias.",
                    "Ativar os linf√≥citos para atacarem v√≠rus.",
                    "Criar mem√≥ria imunol√≥gica."
                ],
                correct: 0,
                explanation: "√â um controle de qualidade! Se o linf√≥cito B nasce reconhecendo o seu pr√≥prio osso como inimigo, ele precisa ser deletado antes de sair de l√°."
            },
            {
                category: "Hematopoese",
                text: "Qual c√©lula abaixo √© respons√°vel por produzir anticorpos?",
                options: [
                    "Linf√≥cito T CD8",
                    "Plasm√≥cito (Linf√≥cito B diferenciado)",
                    "Macr√≥fago",
                    "C√©lula NK"
                ],
                correct: 1,
                explanation: "Quem dispara anticorpos √© o Plasm√≥cito. Ele √© a evolu√ß√£o 'Super Saiyajin' do Linf√≥cito B ap√≥s ser ativado."
            },
            // Linhas de Defesa (13-18)
            {
                category: "Linhas de Defesa",
                text: "A pele intacta, o suco g√°strico e a microbiota normal comp√µem qual linha de defesa?",
                options: [
                    "Primeira Linha (Barreiras)",
                    "Segunda Linha (Inata Interna)",
                    "Terceira Linha (Adaptativa)",
                    "Quarta Linha (Hospitalar)"
                ],
                correct: 0,
                explanation: "Pense na fortaleza: a primeira coisa que o inimigo encontra √© o muro (pele) e o fosso √°cido (est√¥mago). √â a Primeira Linha."
            },
            {
                category: "Linhas de Defesa",
                text: "Se voc√™ corta o dedo e bact√©rias entram, qual linha de defesa √© acionada IMEDIATAMENTE ap√≥s a barreira ser rompida?",
                options: [
                    "Produ√ß√£o de Anticorpos (3¬™ Linha)",
                    "Inflama√ß√£o e Fagocitose (2¬™ Linha)",
                    "Mem√≥ria Imunol√≥gica",
                    "Matura√ß√£o T√≠mica"
                ],
                correct: 1,
                explanation: "Anticorpos demoram dias. Quem chega na hora (minutos) para conter o corte √© a inflama√ß√£o e os fag√≥citos. Segunda Linha!"
            },
            {
                category: "Linhas de Defesa",
                text: "Qual √© a principal caracter√≠stica da Terceira Linha de Defesa (Adaptativa)?",
                options: [
                    "Resposta r√°pida e inespec√≠fica.",
                    "Presen√ßa de barreiras f√≠sicas.",
                    "Mem√≥ria imunol√≥gica e especificidade.",
                    "Fagocitose generalizada."
                ],
                correct: 2,
                explanation: "A terceira linha √© a elite. Ela demora para agir, mas quando age, sabe exatamente quem matar e nunca mais esquece o rosto do inimigo (mem√≥ria)."
            },
            {
                category: "Linhas de Defesa",
                text: "A lisozima presente na l√°grima √© um exemplo de:",
                options: [
                    "Barreira F√≠sica",
                    "Barreira Qu√≠mica",
                    "Barreira Biol√≥gica",
                    "Resposta Celular"
                ],
                correct: 1,
                explanation: "Lisozima √© uma enzima, uma subst√¢ncia. Portanto, √© uma arma QU√çMICA que dissolve a parede das bact√©rias."
            },
            {
                category: "Linhas de Defesa",
                text: "A febre √© considerada um mecanismo de qual linha de defesa?",
                options: [
                    "Primeira (Barreiras)",
                    "Segunda (Inata Interna)",
                    "Terceira (Adaptativa)",
                    "Nenhuma, √© uma doen√ßa."
                ],
                correct: 1,
                explanation: "A febre √© uma resposta sist√™mica da imunidade inata (segunda linha) para tentar 'cozinhar' o pat√≥geno ou acelerar o metabolismo de defesa."
            },
            {
                category: "Linhas de Defesa",
                text: "Qual o papel da microbiota normal (flora bacteriana) na defesa?",
                options: [
                    "Produzir anticorpos.",
                    "Realizar fagocitose.",
                    "Competir por espa√ßo e nutrientes com pat√≥genos (Barreira Biol√≥gica).",
                    "Aumentar a temperatura corporal."
                ],
                correct: 2,
                explanation: "√â como um √¥nibus lotado: se as bact√©rias 'do bem' ocupam todos os assentos, as bact√©rias ruins n√£o conseguem sentar (colonizar). Isso √© barreira biol√≥gica."
            },
            // Inata vs Adaptativa (19-24)
            {
                category: "Inata vs Adaptativa",
                text: "Qual das seguintes caracter√≠sticas define melhor a Imunidade INATA?",
                options: [
                    "Alta especificidade para ant√≠genos.",
                    "Gera mem√≥ria de longa dura√ß√£o.",
                    "Resposta imediata e inespec√≠fica.",
                    "Melhora a cada exposi√ß√£o ao mesmo pat√≥geno."
                ],
                correct: 2,
                explanation: "A Inata √© bruta e r√°pida. Ela bate primeiro e pergunta depois, usando a mesma estrat√©gia para quase todos os invasores."
            },
            {
                category: "Inata vs Adaptativa",
                text: "Quanto tempo a Imunidade ADAPTATIVA geralmente leva para responder no primeiro contato?",
                options: [
                    "Segundos",
                    "Algumas horas",
                    "Dias ou semanas",
                    "Imediatamente"
                ],
                correct: 2,
                explanation: "A adaptativa precisa de tempo para estudar o inimigo, clonar o ex√©rcito certo e atacar. Isso leva dias na primeira vez."
            },
            {
                category: "Inata vs Adaptativa",
                text: "Quem faz a 'ponte' entre a imunidade inata e a adaptativa, apresentando o ant√≠geno?",
                options: [
                    "Neutr√≥filo",
                    "C√©lula Dendr√≠tica",
                    "Plaqueta",
                    "Hem√°cia"
                ],
                correct: 1,
                explanation: "A C√©lula Dendr√≠tica √© a espi√£ fofoqueira. Ela pega um peda√ßo do invasor na pele (inata) e corre pro linfonodo mostrar pro Linf√≥cito T (adaptativa)."
            },
            {
                category: "Inata vs Adaptativa",
                text: "Qual tipo de imunidade √© respons√°vel pela rejei√ß√£o r√°pida e 'bruta', mas sem mem√≥ria espec√≠fica?",
                options: [
                    "Inata",
                    "Adaptativa Humoral",
                    "Adaptativa Celular",
                    "Passiva"
                ],
                correct: 0,
                explanation: "Sem mem√≥ria e r√°pida? Estamos falando da Inata. A adaptativa sempre gera mem√≥ria."
            },
            {
                category: "Inata vs Adaptativa",
                text: "Vacinas funcionam baseadas em qual princ√≠pio?",
                options: [
                    "Estimular a barreira f√≠sica da pele.",
                    "Criar inflama√ß√£o cr√¥nica.",
                    "Gerar Mem√≥ria Imunol√≥gica (Imunidade Adaptativa).",
                    "Aumentar o n√∫mero de neutr√≥filos apenas."
                ],
                correct: 2,
                explanation: "A vacina apresenta o inimigo 'morto' ou 'fraco' para que a Imunidade Adaptativa crie mem√≥ria. Assim, quando o inimigo real vier, a defesa j√° est√° pronta."
            },
            {
                category: "Inata vs Adaptativa",
                text: "Os Linf√≥citos T e B pertencem a qual bra√ßo da imunidade?",
                options: [
                    "Inata",
                    "Adaptativa",
                    "Barreiras Naturais",
                    "Hematopoese Mieloide"
                ],
                correct: 1,
                explanation: "Linf√≥citos s√£o a elite. T e B s√£o os protagonistas da Imunidade Adaptativa (Espec√≠fica)."
            },
            // C√©lulas (25-27)
            {
                category: "C√©lulas",
                text: "Qual √© a fun√ß√£o principal dos Linf√≥citos T CD4+ (Helper)?",
                options: [
                    "Fagocitar bact√©rias.",
                    "Produzir anticorpos diretamente.",
                    "Coordenar a resposta imune secretando citocinas.",
                    "Matar c√©lulas tumorais por contato direto."
                ],
                correct: 2,
                explanation: "O CD4 √© o General. Ele n√£o mata, ele manda! Ele libera citocinas (ordens) para ativar os macr√≥fagos, os Linf√≥citos B e os CD8."
            },
            {
                category: "C√©lulas",
                text: "Os neutr√≥filos s√£o conhecidos por:",
                options: [
                    "Serem c√©lulas de vida longa.",
                    "Chegarem primeiro na infec√ß√£o e morrerem r√°pido (pus).",
                    "Produzirem mem√≥ria.",
                    "N√£o realizarem fagocitose."
                ],
                correct: 1,
                explanation: "Neutr√≥filos s√£o os kamikazes. Chegam r√°pido, comem bact√©rias e morrem, formando o pus. Vida curta, mas heroica."
            },
            {
                category: "C√©lulas",
                text: "C√©lulas NK (Natural Killer) destroem principalmente:",
                options: [
                    "Bact√©rias extracelulares.",
                    "Vermes intestinais.",
                    "C√©lulas infectadas por v√≠rus ou tumorais.",
                    "Toxinas no sangue."
                ],
                correct: 2,
                explanation: "O nome diz tudo: Assassinas Naturais. Elas detectam c√©lulas do pr√≥prio corpo que est√£o estranhas (com v√≠rus ou c√¢ncer) e as obrigam a cometer suic√≠dio (apoptose)."
            },
            // Inflama√ß√£o (28-30)
            {
                category: "Inflama√ß√£o",
                text: "Qual dos sinais abaixo N√ÉO √© um sinal cardinal da inflama√ß√£o?",
                options: [
                    "Rubor (Vermelhid√£o)",
                    "Calor",
                    "Palidez",
                    "Dor"
                ],
                correct: 2,
                explanation: "Inflama√ß√£o traz MAIS sangue, ent√£o fica vermelho (rubor), n√£o p√°lido. Palidez √© falta de sangue."
            },
            {
                category: "Inflama√ß√£o",
                text: "O que causa o 'Edema' (incha√ßo) na inflama√ß√£o?",
                options: [
                    "Multiplica√ß√£o de bact√©rias.",
                    "Aumento da permeabilidade vascular e sa√≠da de l√≠quido (exsudato).",
                    "Contra√ß√£o dos m√∫sculos.",
                    "Ac√∫mulo de gordura."
                ],
                correct: 1,
                explanation: "Os vasos abrem seus poros (permeabilidade) para deixar as c√©lulas de defesa passarem. O problema √© que a √°gua do sangue (plasma) vaza junto, inchando o tecido."
            },
            {
                category: "Inflama√ß√£o",
                text: "Qual √© o objetivo biol√≥gico da inflama√ß√£o aguda?",
                options: [
                    "Causar dor apenas para avisar o c√©rebro.",
                    "Destruir o tecido saud√°vel.",
                    "Isolar a les√£o, eliminar o agente agressor e iniciar o reparo.",
                    "Gerar autoimunidade."
                ],
                correct: 2,
                explanation: "Apesar de chata (d√≥i e incha), a inflama√ß√£o √© vital. Ela cerca o inimigo, mata ele e prepara o terreno para a cicatriza√ß√£o."
            }
        ];

        // --- L√ìGICA DO QUIZ ---
        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;
        let userAnswers = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz(count) {
            // Reset
            score = 0;
            currentIndex = 0;
            userAnswers = [];
            
            // Prepare questions
            const shuffled = shuffleArray([...allQuestions]); // Copy and shuffle
            currentQuestions = shuffled.slice(0, count);

            // Switch Screens
            document.getElementById('screen-dashboard').style.display = 'none';
            document.getElementById('screen-quiz').style.display = 'block';

            renderQuestion();
        }

        function renderQuestion() {
            const q = currentQuestions[currentIndex];
            
            // UI Updates
            document.getElementById('quiz-title').innerText = `Quest√£o ${currentIndex + 1} de ${currentQuestions.length}`;
            document.getElementById('q-category').innerText = q.category;
            document.getElementById('q-text').innerText = q.text;
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';

            // Progress Bar
            const progressPct = ((currentIndex) / currentQuestions.length) * 100;
            document.getElementById('progress').style.width = `${progressPct}%`;

            // Options
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = ''; // Clear previous

            q.options.forEach((opt, index) => {
                const btn = document.createElement('div');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(index, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, selectedBtn) {
            // Prevent multiple clicks
            const optionsDivs = document.querySelectorAll('.option-btn');
            optionsDivs.forEach(div => div.onclick = null); // Disable clicks

            const q = currentQuestions[currentIndex];
            const isCorrect = selectedIndex === q.correct;

            // Visual Styles
            if (isCorrect) {
                selectedBtn.classList.add('correct');
                score++;
                showFeedback(true, "Mandou bem! Resposta correta.");
            } else {
                selectedBtn.classList.add('wrong');
                // Highlight correct one
                optionsDivs[q.correct].classList.add('correct');
                showFeedback(false, q.explanation);
            }

            document.getElementById('next-btn').style.display = 'block';
        }

        function showFeedback(isCorrect, text) {
            const fbBox = document.getElementById('feedback');
            const fbTitle = document.getElementById('feedback-title');
            const fbText = document.getElementById('feedback-text');

            fbBox.style.display = 'block';
            
            if (isCorrect) {
                fbBox.style.borderLeftColor = 'var(--accent-green)';
                fbTitle.innerText = "üéâ Certa Resposta!";
                fbTitle.style.color = 'var(--accent-green)';
                fbText.innerText = text; 
            } else {
                fbBox.style.borderLeftColor = 'var(--accent-red)';
                fbTitle.innerText = "üòÖ Calma, gafanhoto, pensa comigo...";
                fbTitle.style.color = 'var(--accent-red)';
                fbText.innerText = text;
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                renderQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('screen-quiz').style.display = 'none';
            document.getElementById('screen-results').style.display = 'block';

            const percentage = Math.round((score / currentQuestions.length) * 100);
            const scoreCircle = document.getElementById('final-score');
            const msg = document.getElementById('score-message');

            scoreCircle.innerText = `${percentage}%`;

            if (percentage === 100) {
                scoreCircle.style.borderColor = 'var(--accent-green)';
                msg.innerText = "Perfeito! Voc√™ dominou o sistema linfoide! üèÜ";
            } else if (percentage >= 70) {
                scoreCircle.style.borderColor = 'var(--accent-blue)';
                msg.innerText = "Muito bom! Voc√™ tem uma base s√≥lida. üëè";
            } else {
                scoreCircle.style.borderColor = 'var(--accent-orange)';
                msg.innerText = "Bom treino, mas vale a pena revisar a apostila. üí™";
            }
        }

    </script>
</body>
</html>