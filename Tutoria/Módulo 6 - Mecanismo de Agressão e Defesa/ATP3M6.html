<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Imunologia Avan√ßada - M√≥dulo 6</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            'from': { opacity: '0', transform: 'translateY(10px)' },
                            'to': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #E2E8F0; }
        .glass-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .option-label {
            transition: all 0.2s ease;
        }
        .option-input:checked + .option-label {
            border-color: #3B82F6;
            background-color: rgba(59, 130, 246, 0.1);
        }
        .correct-answer {
            border-color: #10B981 !important;
            background-color: rgba(16, 185, 129, 0.1) !important;
        }
        .wrong-answer {
            border-color: #EF4444 !important;
            background-color: rgba(239, 68, 68, 0.1) !important;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Tela Inicial (Sele√ß√£o) -->
    <div id="start-screen" class="flex-1 flex flex-col items-center justify-center p-6 text-center animate-fade-in">
        <div class="mb-12 max-w-2xl">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Boa sorte nas quest√µes, meu nobre gafanhoto</h1>
            <p class="text-slate-400 text-lg">Selecione seu n√≠vel de desafio e mostre o que sabe sobre Imunologia (Agress√£o e Defesa).</p>
        </div>

        <div class="grid md:grid-cols-3 gap-6 w-full max-w-5xl">
            <!-- Treino R√°pido -->
            <button onclick="startQuiz(10)" class="group relative bg-[#10B981] hover:bg-[#059669] text-left p-8 rounded-3xl transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-emerald-500/20">
                <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center mb-6 text-white group-hover:rotate-12 transition-transform">
                    <i data-lucide="zap" size="24"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2">Treino R√°pido</h3>
                <p class="text-emerald-100 text-sm font-medium">10 Quest√µes aleat√≥rias</p>
            </button>

            <!-- Treino Padr√£o -->
            <button onclick="startQuiz(20)" class="group relative bg-[#3B82F6] hover:bg-[#2563EB] text-left p-8 rounded-3xl transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/20">
                <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center mb-6 text-white group-hover:scale-110 transition-transform">
                    <i data-lucide="brain" size="24"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2">Treino Padr√£o</h3>
                <p class="text-blue-100 text-sm font-medium">20 Quest√µes aleat√≥rias</p>
            </button>

            <!-- Maratona Completa -->
            <button onclick="startQuiz(30)" class="group relative bg-[#8B5CF6] hover:bg-[#7C3AED] text-left p-8 rounded-3xl transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20">
                <div class="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center mb-6 text-white group-hover:translate-y-[-4px] transition-transform">
                    <i data-lucide="flame" size="24"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2">Maratona Completa</h3>
                <p class="text-purple-100 text-sm font-medium">Todas as 30 quest√µes</p>
            </button>
        </div>
    </div>

    <!-- Tela do Quiz (Quest√µes) -->
    <div id="quiz-screen" class="hidden max-w-4xl mx-auto w-full px-6 py-12">
        <div class="flex items-center justify-between mb-8">
            <button onclick="location.reload()" class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors">
                <i data-lucide="arrow-left"></i> Voltar
            </button>
            <div class="text-slate-400 font-mono text-sm">
                <span id="progress-text">0/0</span> Respondidas
            </div>
        </div>

        <div id="questions-container" class="space-y-12">
            <!-- As quest√µes ser√£o injetadas aqui via JavaScript -->
        </div>

        <div id="finish-btn-container" class="hidden mt-12 text-center pb-20">
            <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700">
                <h2 class="text-3xl font-bold text-white mb-4">Quiz Finalizado!</h2>
                <p id="final-score" class="text-xl text-slate-300 mb-6"></p>
                <button onclick="location.reload()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-xl transition-all">
                    Tentar Novamente
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- BANCO DE 30 QUEST√ïES DIF√çCEIS ---
        const questionsDB = [
            {
                id: 1,
                text: "Um paciente com Hansen√≠ase Virchowiana apresenta alta carga bacilar, les√µes disseminadas e anergia ao teste de Mitsuda (lepromina). Imunologicamente, esse quadro cl√≠nico √© caracterizado pelo predom√≠nio de qual perfil de resposta T e quais citocinas associadas?",
                options: [
                    "Perfil Th1 com predom√≠nio de IFN-Œ≥ e TNF-Œ±, levando √† ativa√ß√£o macrof√°gica deficiente.",
                    "Perfil Th17 com predom√≠nio de IL-17, causando intenso recrutamento neutrof√≠lico sem forma√ß√£o de granulomas.",
                    "Perfil Th2 com predom√≠nio de IL-4, IL-10 e IL-13, inibindo a atividade microbicida dos macr√≥fagos.",
                    "Perfil Tfh com intensa produ√ß√£o de IgG1 e opsoniza√ß√£o eficiente, por√©m falha na lise pelo complemento."
                ],
                correct: 2,
                explanation: "Na Hansen√≠ase Virchowiana (multibacilar), h√° uma resposta celular (Th1) falha. O sistema imune desvia para o perfil Th2. As citocinas IL-4 e IL-10 (anti-inflamat√≥ria) desativam os macr√≥fagos e inibem a produ√ß√£o de IFN-Œ≥, permitindo a prolifera√ß√£o bacilar descontrolada."
            },
            {
                id: 2,
                text: "O Staphylococcus aureus possui a Prote√≠na A em sua parede celular. Qual √© o mecanismo molecular pelo qual essa prote√≠na atua como fator de subvers√£o imune?",
                options: [
                    "Ela cliva a regi√£o Fab das imunoglobulinas, impedindo o reconhecimento do ant√≠geno.",
                    "Ela se liga √† regi√£o Fc das imunoglobulinas IgG, impedindo a opsoniza√ß√£o correta e a fagocitose mediada por receptor Fc.",
                    "Ela mimetiza o Fator H do complemento, inibindo a forma√ß√£o da convertase C3bBb.",
                    "Ela degrada o componente C5a, impedindo a quimiotaxia de neutr√≥filos para o s√≠tio de infec√ß√£o."
                ],
                correct: 1,
                explanation: "A Prote√≠na A do S. aureus liga-se √† por√ß√£o Fc (fra√ß√£o cristaliz√°vel) dos anticorpos IgG. Normalmente, o fag√≥cito reconhece a por√ß√£o Fc. Ao ligar a Fc 'ao contr√°rio' (deixando a Fab exposta para fora), a bact√©ria impede que o fag√≥cito agarre o anticorpo, bloqueando a opsoniza√ß√£o."
            },
            {
                id: 3,
                text: "Sobre a ativa√ß√£o do Sistema Complemento pela Via Alternativa, assinale a afirmativa correta que descreve o fen√¥meno de 'tick-over' e a estabiliza√ß√£o da convertase.",
                options: [
                    "A hidr√≥lise espont√¢nea de C3 gera C3(H2O), que liga o Fator B e sofre clivagem pelo Fator D, formando a convertase C3bBb, estabilizada pela Properdina.",
                    "A clivagem de C3 √© iniciada pela liga√ß√£o da MBL √† manose, recrutando o Fator D que estabiliza o complexo na membrana.",
                    "O 'tick-over' refere-se √† ativa√ß√£o de C1q na aus√™ncia de anticorpos, permitindo a clivagem direta de C3 em C3a e C3b.",
                    "A convertase C3bBb √© inst√°vel e requer a liga√ß√£o da Prote√≠na S para se manter ativa na superf√≠cie bacteriana."
                ],
                correct: 0,
                explanation: "A via alternativa est√° sempre em baixo n√≠vel de ativa√ß√£o ('tick-over') devido √† hidr√≥lise espont√¢nea da liga√ß√£o tio√©ster do C3 no plasma, formando C3(H2O). Este se liga ao Fator B, que √© clivado pelo Fator D. Se isso ocorrer pr√≥ximo a uma superf√≠cie microbiana, o C3b se fixa e forma a convertase C3bBb, que √© estabilizada pela Properdina."
            },
            {
                id: 4,
                text: "Durante a matura√ß√£o da afinidade nos centros germinativos, as c√©lulas B sofrem hipermuta√ß√£o som√°tica. Qual enzima √© fundamental para esse processo e para a troca de classe (isotype switching), e qual √© sua fun√ß√£o molecular?",
                options: [
                    "Enzima RAG-1/RAG-2, que promove a recombina√ß√£o V(D)J.",
                    "Enzima TdT (Terminal deoxynucleotidyl Transferase), que adiciona nucleot√≠deos N.",
                    "Enzima AID (Activation-Induced Cytidine Deaminase), que converte citosina em uracila no DNA.",
                    "Enzima DNA Polimerase Beta, que corrige erros de pareamento durante a replica√ß√£o."
                ],
                correct: 2,
                explanation: "A enzima AID (Desaminase de Citidina Induzida por Ativa√ß√£o) √© crucial nos centros germinativos. Ela atua no DNA de fita simples, convertendo Citosina em Uracila. Isso cria muta√ß√µes pontuais (hipermuta√ß√£o som√°tica) e quebras de fita dupla necess√°rias para a troca de classe (class switching)."
            },
            {
                id: 5,
                text: "Bact√©rias encapsuladas como Streptococcus pneumoniae s√£o resistentes √† fagocitose direta. Qual √© o principal mecanismo imunol√≥gico adaptativo respons√°vel pela elimina√ß√£o eficaz desses pat√≥genos?",
                options: [
                    "Lise direta via MAC (Complexo de Ataque √† Membrana) gerado pela via alternativa.",
                    "Opsoniza√ß√£o mediada por anticorpos IgG espec√≠ficos contra o polissacar√≠deo capsular e C3b.",
                    "Ativa√ß√£o de c√©lulas NK via ADCC (Citotoxicidade Celular Dependente de Anticorpo).",
                    "Neutraliza√ß√£o da c√°psula por IgA secretora na mucosa respirat√≥ria."
                ],
                correct: 1,
                explanation: "A c√°psula esconde PAMPs e repele fag√≥citos (carga negativa). A defesa eficaz exige opsoniza√ß√£o: anticorpos (IgG) se ligam √† c√°psula, e o sistema complemento deposita C3b. Os fag√≥citos possuem receptores de alta afinidade para Fc de IgG e para C3b, permitindo a fagocitose."
            },
            {
                id: 6,
                text: "Em rela√ß√£o aos Superant√≠genos bacterianos (ex: TSST-1), qual √© o mecanismo que leva √† tempestade de citocinas (choque t√≥xico)?",
                options: [
                    "Ativa√ß√£o policlonal de c√©lulas B independente de T, gerando excesso de IgM.",
                    "Liga√ß√£o cruzada entre o dom√≠nio vari√°vel beta do TCR e a regi√£o conservada do MHC-II fora da fenda de liga√ß√£o do pept√≠deo.",
                    "Mimetismo molecular com prote√≠nas do hospedeiro, levando a uma resposta autoimune Th17.",
                    "Inibi√ß√£o direta de c√©lulas T reguladoras (Tregs), impedindo a supress√£o da resposta inflamat√≥ria."
                ],
                correct: 1,
                explanation: "Superant√≠genos n√£o s√£o processados. Eles se ligam lateralmente, conectando '√† for√ßa' o MHC-II da APC com a regi√£o V-beta do TCR da c√©lula T. Isso ativa at√© 20% de todas as c√©lulas T do corpo (inespecificamente), liberando quantidades massivas de citocinas (IFN-Œ≥, TNF-Œ±, IL-2)."
            },
            {
                id: 7,
                text: "A s√≠ndrome de Hiper-IgM ligada ao X √© causada por uma muta√ß√£o no gene do ligante CD40 (CD40L) nas c√©lulas T. Por que essa falha resulta em defici√™ncia de IgG, IgA e IgE?",
                options: [
                    "Sem CD40L, as c√©lulas T n√£o conseguem migrar para os linfonodos.",
                    "O CD40L √© necess√°rio para a ativa√ß√£o inicial das c√©lulas B virgens via BCR.",
                    "A intera√ß√£o CD40-CD40L √© essencial para sinalizar √† c√©lula B para expressar AID e realizar a troca de isotipo.",
                    "O CD40L √© um cofator necess√°rio para a transcri√ß√£o da cadeia pesada Mu da IgM."
                ],
                correct: 2,
                explanation: "A troca de classe (de IgM para IgG/IgA/IgE) depende da ajuda da c√©lula T (T-dependent). Essa ajuda ocorre via intera√ß√£o CD40 (na c√©lula B) com CD40L (na c√©lula T ativada). Sem esse sinal, a c√©lula B n√£o ativa a enzima AID e permanece produzindo apenas IgM (e IgD)."
            },
            {
                id: 8,
                text: "Qual das seguintes citocinas √© essencial para a manuten√ß√£o e sobreviv√™ncia de c√©lulas T de mem√≥ria a longo prazo, na aus√™ncia do ant√≠geno?",
                options: [
                    "IL-2",
                    "IL-7 e IL-15",
                    "IL-4",
                    "TNF-Œ±"
                ],
                correct: 1,
                explanation: "Enquanto a IL-2 √© crucial para a prolifera√ß√£o r√°pida na fase efetora, a manuten√ß√£o das c√©lulas de mem√≥ria em estado quiescente (mas prontas para responder) depende das citocinas homeost√°ticas IL-7 e IL-15."
            },
            {
                id: 9,
                text: "As c√©lulas Th17 s√£o cruciais na defesa contra bact√©rias extracelulares e fungos. A diferencia√ß√£o dessas c√©lulas √© promovida pela combina√ß√£o de TGF-Œ≤ com quais citocinas inflamat√≥rias, e qual √© o fator de transcri√ß√£o mestre?",
                options: [
                    "IL-12 e IFN-Œ≥; Fator T-bet.",
                    "IL-4 e IL-5; Fator GATA-3.",
                    "IL-6 e IL-23; Fator RORŒ≥t.",
                    "IL-10 e TGF-Œ≤; Fator FoxP3."
                ],
                correct: 2,
                explanation: "A diferencia√ß√£o Th17 requer TGF-Œ≤ em um ambiente inflamat√≥rio (presen√ßa de IL-6 e, posteriormente, IL-23 para estabiliza√ß√£o). O fator de transcri√ß√£o que define a linhagem Th17 √© o RORŒ≥t."
            },
            {
                id: 10,
                text: "Algumas bact√©rias, como a Neisseria gonorrhoeae, utilizam a varia√ß√£o antig√™nica dos pili para evadir o sistema imune. Como isso afeta a resposta humoral?",
                options: [
                    "Impede a ativa√ß√£o do complemento pela via das lectinas.",
                    "Torna os anticorpos previamente formados ineficazes, pois o ep√≠topo alvo foi alterado geneticamente.",
                    "Induz a produ√ß√£o de anticorpos n√£o neutralizantes que bloqueiam a liga√ß√£o de anticorpos eficazes.",
                    "Causa apoptose das c√©lulas B de mem√≥ria espec√≠ficas para o pili original."
                ],
                correct: 1,
                explanation: "A varia√ß√£o antig√™nica envolve a recombina√ß√£o gen√©tica dos genes que codificam prote√≠nas de superf√≠cie (como a pilina). O sistema imune produz anticorpos contra a vers√£o A, mas a bact√©ria passa a expressar a vers√£o B, escapando do reconhecimento pelos anticorpos j√° existentes."
            },
            {
                id: 11,
                text: "Qual √© a fun√ß√£o do componente C3b do sistema complemento quando n√£o est√° participando da forma√ß√£o da convertase?",
                options: [
                    "Atuar como anafilotoxina, recrutando neutr√≥filos.",
                    "Formar o poro na membrana bacteriana.",
                    "Atuar como opsonina, ligando-se ao receptor CR1 nos fag√≥citos.",
                    "Inibir a ativa√ß√£o da via alternativa para evitar dano tecidual."
                ],
                correct: 2,
                explanation: "O C3b tem fun√ß√£o dupla: compor a C5 convertase e atuar como opsonina. Ele recobre a superf√≠cie do pat√≥geno. Fag√≥citos (macr√≥fagos e neutr√≥filos) possuem receptores CR1 (Complement Receptor 1) que se ligam ao C3b, facilitando imensamente a fagocitose."
            },
            {
                id: 12,
                text: "A imunoglobulina A (IgA) secretora √© a principal defesa nas mucosas. Qual componente √© essencial para o seu transporte transepitelial para o l√∫men?",
                options: [
                    "Cadeia J e Componente Secretor (derivado do receptor poli-Ig).",
                    "Cadeia Delta e Prote√≠na de liga√ß√£o √† manose.",
                    "Receptor FcRn neonatal.",
                    "Receptor FcŒ≥RIIb inibit√≥rio."
                ],
                correct: 0,
                explanation: "A IgA √© produzida como d√≠mero ligado pela Cadeia J. Para atravessar o epit√©lio, ela se liga ao Receptor Poli-Ig (pIgR) na base da c√©lula epitelial. Ao ser liberada no l√∫men, uma parte desse receptor permanece ligada ao anticorpo, formando o 'Componente Secretor', que protege a IgA da digest√£o enzim√°tica."
            },
            {
                id: 13,
                text: "Em uma infec√ß√£o por Listeria monocytogenes, a bact√©ria escapa do fagossomo para o citosol. Como o sistema imune processa e apresenta ant√≠genos dessa bact√©ria para gerar uma resposta eficaz?",
                options: [
                    "Via MHC-II para c√©lulas CD4+, gerando resposta Th2.",
                    "Via MHC-I para c√©lulas CD8+, gerando resposta citot√≥xica (CTL).",
                    "Via MHC-II para c√©lulas CD4+, gerando resposta Th17.",
                    "Diretamente via receptores Toll-like (TLR) citos√≥licos."
                ],
                correct: 1,
                explanation: "Como a Listeria escapa para o citoplasma, suas prote√≠nas s√£o processadas pelo proteassoma (via citos√≥lica) e apresentadas via MHC de Classe I. Isso ativa c√©lulas T CD8+ Citot√≥xicas, que s√£o essenciais para matar as c√©lulas infectadas onde a bact√©ria se esconde."
            },
            {
                id: 14,
                text: "Qual √© o papel do Fator H na regula√ß√£o do Sistema Complemento?",
                options: [
                    "Estabilizar a convertase C3bBb na superf√≠cie bacteriana.",
                    "Atuar como cofator para o Fator I na clivagem e inativa√ß√£o do C3b sol√∫vel ou ligado a c√©lulas pr√≥prias.",
                    "Iniciar a via das lectinas ligando-se √† manose.",
                    "Impedir a forma√ß√£o do MAC ligando-se ao C5b67."
                ],
                correct: 1,
                explanation: "O Fator H √© um regulador negativo cr√≠tico da via alternativa. Ele se liga ao C3b (especialmente em c√©lulas do hospedeiro ricas em √°cido si√°lico) e atua como cofator para a enzima Fator I, que cliva o C3b em iC3b (inativo), impedindo a amplifica√ß√£o do complemento em nossos pr√≥prios tecidos."
            },
            {
                id: 15,
                text: "A resposta T-independente tipo 2 (TI-2) √© caracterizada pela ativa√ß√£o de c√©lulas B por ant√≠genos polissacar√≠dicos repetitivos. Qual √© a principal limita√ß√£o dessa resposta em compara√ß√£o √† T-dependente?",
                options: [
                    "N√£o produz IgM.",
                    "Gera maci√ßa produ√ß√£o de IgE.",
                    "Gera pouca ou nenhuma mem√≥ria imunol√≥gica e pouca troca de classe (predom√≠nio de IgM).",
                    "Requer apresenta√ß√£o de ant√≠geno via MHC-I."
                ],
                correct: 2,
                explanation: "Ant√≠genos polissacar√≠dicos (como c√°psulas) ativam B via cross-linking do BCR, sem ajuda T. Sem a ajuda T (CD40L/Citocinas), n√£o h√° forma√ß√£o de centro germinativo robusto, pouca troca de isotipo (fica IgM) e praticamente nenhuma gera√ß√£o de c√©lulas B de mem√≥ria. Por isso vacinas polissacar√≠dicas puras s√£o pouco eficazes em crian√ßas pequenas."
            },
            {
                id: 16,
                text: "Qual √© o mecanismo de a√ß√£o das defensinas produzidas sob est√≠mulo de IL-22 na resposta Th17?",
                options: [
                    "Quelar ferro, privando as bact√©rias desse nutriente.",
                    "Inserir-se na membrana microbiana carregada negativamente, formando poros e causando lise.",
                    "Opsonizar bact√©rias para fagocitose por macr√≥fagos.",
                    "Degradar o DNA bacteriano enzimaticamente."
                ],
                correct: 1,
                explanation: "Defensinas s√£o pept√≠deos cati√¥nicos (carga positiva). Elas s√£o atra√≠das pela superf√≠cie de bact√©rias (carga negativa), inserem-se na membrana lip√≠dica e formam poros, desestabilizando e matando o pat√≥geno."
            },
            {
                id: 17,
                text: "A forma√ß√£o do granuloma na tuberculose √© dependente de uma intera√ß√£o cont√≠nua entre macr√≥fagos e c√©lulas T. Qual par de citocina-receptor √© cr√≠tico para manter a estrutura do granuloma?",
                options: [
                    "IL-4 e IL-4R",
                    "TNF-Œ± e TNFR",
                    "IL-10 e IL-10R",
                    "TGF-Œ≤ e TGF-Œ≤R"
                ],
                correct: 1,
                explanation: "O TNF-Œ± (Fator de Necrose Tumoral) √© essencial para a forma√ß√£o e manuten√ß√£o da integridade do granuloma. √â por isso que pacientes que usam inibidores de TNF (anti-TNF) para doen√ßas autoimunes t√™m alto risco de reativa√ß√£o de tuberculose latente (o granuloma se desfaz)."
            },
            {
                id: 18,
                text: "Qual a fun√ß√£o da mol√©cula CD59 (Protectina) na superf√≠cie das c√©lulas humanas?",
                options: [
                    "Inibir a liga√ß√£o do C1q.",
                    "Acelerar o decaimento da convertase C3.",
                    "Impedir a incorpora√ß√£o de C9 ao complexo C5b-8, bloqueando a forma√ß√£o do MAC.",
                    "Clivar anafilotoxinas C3a e C5a."
                ],
                correct: 2,
                explanation: "CD59 √© um regulador de membrana que impede a lise de c√©lulas pr√≥prias. Ele se liga ao complexo C5b-8 em forma√ß√£o e impede a polimeriza√ß√£o do C9, bloqueando a forma√ß√£o do poro l√≠tico (MAC)."
            },
            {
                id: 19,
                text: "O que caracteriza a 'Exclus√£o Al√©lica' durante o desenvolvimento das c√©lulas B?",
                options: [
                    "A c√©lula B expressa receptores para ant√≠genos pr√≥prios e estranhos simultaneamente.",
                    "Apenas um dos dois alelos herdados para a cadeia pesada e um para a leve √© expresso, garantindo que cada c√©lula B tenha especificidade para um √∫nico ant√≠geno.",
                    "A exclus√£o de c√©lulas B que reagem a ant√≠genos pr√≥prios na medula √≥ssea.",
                    "A mudan√ßa de express√£o de IgM para IgD."
                ],
                correct: 1,
                explanation: "Exclus√£o al√©lica √© o processo que garante a especificidade clonal. Se o rearranjo do gene da imunoglobulina em um cromossomo for produtivo, o rearranjo no outro cromossomo √© inibido. Assim, cada linf√≥cito B produz anticorpos com apenas uma especificidade antig√™nica."
            },
            {
                id: 20,
                text: "Em rela√ß√£o √† resposta imune contra helmintos, qual o papel da IgE?",
                options: [
                    "Neutralizar as toxinas liberadas pelo verme.",
                    "Ativar a via cl√°ssica do complemento para lisar o verme.",
                    "Ligar-se ao verme e a receptores FcŒµRI em eosin√≥filos, desencadeando a degranula√ß√£o de prote√≠nas t√≥xicas (ADCC).",
                    "Promover a fagocitose do verme por macr√≥fagos gigantes."
                ],
                correct: 2,
                explanation: "Helmintos s√£o grandes demais para serem fagocitados. A IgE recobre o parasita. Eosin√≥filos possuem receptores de alta afinidade para IgE (FcŒµRI). Ao se ligarem, liberam gr√¢nulos com Prote√≠na B√°sica Principal e outras enzimas que destroem a cut√≠cula do verme."
            },
            {
                id: 21,
                text: "Qual a principal consequ√™ncia da defici√™ncia de C3 do complemento?",
                options: [
                    "Suscetibilidade exclusiva a infec√ß√µes por Neisseria.",
                    "Incapacidade de formar o MAC, mas opsoniza√ß√£o preservada.",
                    "Infec√ß√µes bacterianas piog√™nicas graves e recorrentes, devido √† falha na opsoniza√ß√£o e quimiotaxia.",
                    "Doen√ßas autoimunes tipo L√∫pus, mas sem risco infeccioso aumentado."
                ],
                correct: 2,
                explanation: "O C3 √© o ponto central de todas as vias. Sua aus√™ncia impede a opsoniza√ß√£o (C3b), a inflama√ß√£o (C3a/C5a) e a lise (MAC). Isso resulta em suscetibilidade severa a bact√©rias piog√™nicas encapsuladas e dificuldade na elimina√ß√£o de imunocomplexos."
            },
            {
                id: 22,
                text: "Como as bact√©rias do g√™nero Neisseria utilizam o √°cido si√°lico do hospedeiro para evadir o sistema imune (mimetismo molecular)?",
                options: [
                    "Incorporam √°cido si√°lico em sua c√°psula para recrutar Fator H e inibir a via alternativa do complemento.",
                    "Usam √°cido si√°lico para se ligar diretamente a receptores de c√©lulas T e induzir apoptose.",
                    "O √°cido si√°lico forma uma barreira f√≠sica imperme√°vel a antibi√≥ticos.",
                    "Degradam o √°cido si√°lico para obter carbono."
                ],
                correct: 0,
                explanation: "A 'sialila√ß√£o' do lipopolissacar√≠deo (LPS) ou c√°psula permite que a bact√©ria se 'disfarce' de c√©lula do hospedeiro. O √°cido si√°lico atrai o Fator H (regulador inibit√≥rio), que desativa o C3b depositado na superf√≠cie bacteriana, inibindo o ataque do complemento."
            },
            {
                id: 23,
                text: "Qual √© a fun√ß√£o da regi√£o Fab e da regi√£o Fc de um anticorpo, respectivamente?",
                options: [
                    "Fab: Fun√ß√£o Efetora; Fc: Liga√ß√£o ao Ant√≠geno.",
                    "Fab: Liga√ß√£o ao Ant√≠geno; Fc: Ativa√ß√£o do Complemento e liga√ß√£o a receptores celulares.",
                    "Fab: Liga√ß√£o √† membrana da c√©lula B; Fc: Liga√ß√£o ao Ant√≠geno.",
                    "Ambas t√™m fun√ß√£o de liga√ß√£o ao ant√≠geno, aumentando a avidez."
                ],
                correct: 1,
                explanation: "Fab (Fragment antigen-binding) cont√©m as regi√µes vari√°veis que reconhecem o ant√≠geno especificamente. Fc (Fragment crystallizable) √© a haste constante que define o isotipo e a fun√ß√£o biol√≥gica (liga a receptores de fag√≥citos, ativa complemento C1q)."
            },
            {
                id: 24,
                text: "Na resposta imune adaptativa, o que √© o 'Reconhecimento Ligado' (Linked Recognition)?",
                options: [
                    "Reconhecimento simult√¢neo de ant√≠geno e PAMP pelo TLR.",
                    "Necessidade de a c√©lula B e a c√©lula T reconhecerem ep√≠topos do mesmo complexo antig√™nico (fisicamente ligados) para que ocorra a coopera√ß√£o.",
                    "Liga√ß√£o cruzada de dois anticorpos na superf√≠cie bacteriana.",
                    "Ativa√ß√£o de T CD4 e CD8 ao mesmo tempo."
                ],
                correct: 1,
                explanation: "Para que a c√©lula T ajude a c√©lula B (troca de classe, etc), a c√©lula B deve endocitar o ant√≠geno que seu BCR reconheceu, process√°-lo e apresentar pept√≠deos desse mesmo ant√≠geno no MHC-II para a c√©lula T. Isso garante que a ajuda seja espec√≠fica e direcionada."
            },
            {
                id: 25,
                text: "Qual mecanismo permite que um √∫nico gene de imunoglobulina gere tanto a forma ligada √† membrana (BCR) quanto a forma secretada (anticorpo)?",
                options: [
                    "Recombina√ß√£o som√°tica V(D)J diferente.",
                    "Processamento alternativo do RNA (Splicing alternativo) do transcrito prim√°rio.",
                    "Troca de classe mediada por AID.",
                    "A√ß√£o de proteases na superf√≠cie celular."
                ],
                correct: 1,
                explanation: "N√£o √© mudan√ßa no DNA. √â splicing alternativo do RNA mensageiro. O gene da cadeia pesada tem √©xons para a regi√£o transmembrana e para a cauda de secre√ß√£o. O processamento do RNA decide qual parte ser√° mantida no mRNA final."
            },
            {
                id: 26,
                text: "A opsoniza√ß√£o por IgG √© mais eficiente que a por C3b em qual aspecto?",
                options: [
                    "IgG ativa a via l√≠tica mais rapidamente.",
                    "A liga√ß√£o Fc-Receptor Fc induz sinais de ativa√ß√£o metab√≥lica no fag√≥cito (burst respirat√≥rio) mais potentes que os receptores de complemento sozinhos.",
                    "IgG n√£o depende de inflama√ß√£o pr√©via.",
                    "IgG funciona melhor em pH √°cido."
                ],
                correct: 1,
                explanation: "Embora ambos facilitem a ades√£o, a agrega√ß√£o dos receptores FcŒ≥ (FcR) na superf√≠cie do fag√≥cito dispara vias de sinaliza√ß√£o intracelular robustas (ITAMs) que ativam o citoesqueleto para fagocitose e a enzima NADPH oxidase para o burst respirat√≥rio."
            },
            {
                id: 27,
                text: "O que distingue a c√©lula B-1 das c√©lulas B-2 (convencionais)?",
                options: [
                    "B-1 produzem principalmente IgG de alta afinidade e t√™m muita mem√≥ria.",
                    "B-1 localizam-se nas cavidades peritonial/pleural, produzem anticorpos naturais (IgM) de baixa afinidade e independem de T.",
                    "B-1 s√≥ existem no feto e desaparecem ao nascer.",
                    "B-1 s√£o respons√°veis pela resposta a al√©rgenos."
                ],
                correct: 1,
                explanation: "C√©lulas B-1 s√£o uma linhagem primitiva, auto-renov√°vel nas cavidades serosas. Produzem 'anticorpos naturais' (polirreativos, IgM) contra carboidratos comuns de bact√©rias, sem necessidade de ajuda T, provendo uma primeira linha de defesa r√°pida."
            },
            {
                id: 28,
                text: "Qual √© a fun√ß√£o da cadeia J (Joining chain) na estrutura das imunoglobulinas?",
                options: [
                    "Ligar a cadeia pesada √† leve.",
                    "Permitir a polimeriza√ß√£o da IgM (pent√¢mero) e da IgA (d√≠mero), essencial tamb√©m para o transporte mucoso.",
                    "Ativar a via do complemento.",
                    "Servir de regi√£o transmembrana."
                ],
                correct: 1,
                explanation: "A Cadeia J √© uma pequena polipept√≠deo que une as unidades monom√©ricas de IgA (formando d√≠meros) e IgM (formando pent√¢meros). Ela √© fundamental para a liga√ß√£o ao Receptor Poli-Ig e transporte atrav√©s dos epit√©lios."
            },
            {
                id: 29,
                text: "Bact√©rias como Mycobacterium leprae podem inibir a fus√£o fagossomo-lisossomo. Qual a consequ√™ncia direta disso para a resposta imune?",
                options: [
                    "A bact√©ria √© degradada no citoplasma.",
                    "Os ant√≠genos bacterianos n√£o s√£o processados adequadamente para apresenta√ß√£o via MHC-II, dificultando a ativa√ß√£o de T CD4+.",
                    "Ocorre apoptose imediata do macr√≥fago.",
                    "H√° aumento da produ√ß√£o de radicais livres."
                ],
                correct: 1,
                explanation: "Para apresentar ant√≠genos no MHC-II, o pat√≥geno deve ser degradado em pept√≠deos no fagolisossomo. Se a bact√©ria impede essa fus√£o, ela permanece intacta no fagossomo, seus ant√≠genos n√£o s√£o gerados e o sistema imune adaptativo 'n√£o v√™' a infec√ß√£o eficientemente."
            },
            {
                id: 30,
                text: "Qual a diferen√ßa entre afinidade e avidez de um anticorpo?",
                options: [
                    "Afinidade √© a for√ßa total de liga√ß√£o; Avidez √© a for√ßa de um √∫nico s√≠tio.",
                    "Afinidade √© a for√ßa de liga√ß√£o entre um √∫nico ep√≠topo e um √∫nico s√≠tio de liga√ß√£o; Avidez √© a for√ßa total de todas as intera√ß√µes (ex: IgM pentam√©rica tem baixa afinidade mas alt√≠ssima avidez).",
                    "S√£o sin√¥nimos.",
                    "Avidez refere-se √† velocidade de produ√ß√£o do anticorpo."
                ],
                correct: 1,
                explanation: "Conceito fundamental. Afinidade = for√ßa da liga√ß√£o qu√≠mica individual (fechadura-chave). Avidez = soma das for√ßas de todas as liga√ß√µes. Uma IgM tem baixa afinidade individual (n√£o sofreu matura√ß√£o), mas como tem 10 s√≠tios de liga√ß√£o, sua avidez (capacidade de segurar a bact√©ria) √© enorme."
            }
        ];

        // --- L√ìGICA DO QUIZ ---
        let currentQuestions = [];
        let score = 0;

        function startQuiz(amount) {
            // Embaralhar e selecionar X quest√µes
            const shuffled = [...questionsDB].sort(() => 0.5 - Math.random());
            currentQuestions = shuffled.slice(0, amount);
            
            // Resetar estado
            score = 0;
            document.getElementById('questions-container').innerHTML = '';
            document.getElementById('final-score').innerText = '';
            document.getElementById('finish-btn-container').classList.add('hidden');
            
            // Renderizar quest√µes
            currentQuestions.forEach((q, index) => {
                const qEl = createQuestionElement(q, index + 1);
                document.getElementById('questions-container').appendChild(qEl);
            });

            // Atualizar contadores
            document.getElementById('progress-text').innerText = `0/${amount}`;

            // Trocar telas com anima√ß√£o
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            document.getElementById('quiz-screen').classList.add('animate-fade-in');
            window.scrollTo(0, 0);
        }

        function createQuestionElement(q, index) {
            const container = document.createElement('div');
            container.className = 'glass-card rounded-2xl p-6 md:p-8 relative overflow-hidden question-card';
            container.id = `q-${q.id}`;

            const html = `
                <div class="mb-6">
                    <span class="bg-blue-600/20 text-blue-400 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider mb-2 inline-block">Quest√£o ${index}</span>
                    <h3 class="text-xl md:text-2xl font-bold text-white leading-relaxed">${q.text}</h3>
                </div>
                
                <div class="space-y-3 options-container">
                    ${q.options.map((opt, i) => `
                        <div class="relative">
                            <input type="radio" name="q${q.id}" id="q${q.id}-opt${i}" value="${i}" class="option-input peer hidden" onchange="checkAnswer(${q.id}, ${i}, ${q.correct})">
                            <label for="q${q.id}-opt${i}" class="option-label block w-full p-4 rounded-xl border border-slate-600 bg-slate-800/50 text-slate-300 cursor-pointer hover:bg-slate-700/80 hover:border-slate-500">
                                <span class="font-bold text-slate-500 mr-2">${String.fromCharCode(65 + i)}</span> ${opt}
                            </label>
                            
                            <!-- √çcones de feedback (invis√≠veis inicialmente) -->
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 hidden feedback-icon-correct text-emerald-500"><i data-lucide="check-circle"></i></div>
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 hidden feedback-icon-wrong text-red-500"><i data-lucide="x-circle"></i></div>
                        </div>
                    `).join('')}
                </div>

                <!-- Explica√ß√£o (Oculta) -->
                <div id="explanation-${q.id}" class="hidden mt-6 pt-6 border-t border-slate-700 animate-fade-in">
                    <div class="bg-slate-900/50 rounded-xl p-5 border-l-4 border-blue-500">
                        <h4 class="text-blue-400 font-bold mb-2 flex items-center gap-2"><i data-lucide="info"></i> Gabarito Comentado</h4>
                        <p class="text-slate-300 text-sm leading-relaxed">${q.explanation}</p>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
            return container;
        }

        function checkAnswer(qId, selectedIdx, correctIdx) {
            const card = document.getElementById(`q-${qId}`);
            const inputs = card.querySelectorAll('input');
            const labels = card.querySelectorAll('label');
            const explanation = document.getElementById(`explanation-${qId}`);
            
            // Desabilitar todas as op√ß√µes para evitar mudan√ßa de resposta
            inputs.forEach(input => input.disabled = true);
            labels.forEach(label => label.classList.add('cursor-default', 'opacity-70'));

            // Identificar label selecionada e correta
            const selectedLabel = labels[selectedIdx];
            const correctLabel = labels[correctIdx];

            // Aplicar estilos
            if (selectedIdx === correctIdx) {
                selectedLabel.classList.add('correct-answer');
                selectedLabel.classList.remove('opacity-70'); // Manter destaque
                selectedLabel.parentElement.querySelector('.feedback-icon-correct').classList.remove('hidden');
                score++;
            } else {
                selectedLabel.classList.add('wrong-answer');
                correctLabel.classList.add('correct-answer'); // Mostrar qual era a certa
                correctLabel.classList.remove('opacity-70');
                selectedLabel.parentElement.querySelector('.feedback-icon-wrong').classList.remove('hidden');
            }

            // Mostrar explica√ß√£o
            explanation.classList.remove('hidden');
            lucide.createIcons();

            // Atualizar progresso
            updateProgress();
        }

        function updateProgress() {
            const total = currentQuestions.length;
            const answered = document.querySelectorAll('.question-card input:disabled:checked').length;
            document.getElementById('progress-text').innerText = `${answered}/${total}`;

            if (answered === total) {
                const container = document.getElementById('finish-btn-container');
                const scoreText = document.getElementById('final-score');
                
                let message = "";
                const percentage = (score / total) * 100;
                
                if (percentage === 100) message = "Perfeito! Voc√™ √© um mestre da imunologia! üèÜ";
                else if (percentage >= 80) message = "Excelente trabalho! ü©∫";
                else if (percentage >= 60) message = "Bom, mas precisa revisar alguns conceitos. üìö";
                else message = "Continue estudando, a imunologia √© complexa! üí™";

                scoreText.innerHTML = `Voc√™ acertou <strong class="text-white">${score}</strong> de <strong class="text-white">${total}</strong> quest√µes.<br><span class="text-sm mt-2 block text-blue-400">${message}</span>`;
                container.classList.remove('hidden');
                container.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Inicializar √≠cones na carga
        lucide.createIcons();
    </script>
</body>
</html>